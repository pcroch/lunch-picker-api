  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (155.8ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (107.3ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-23 14:35:30.833742"], ["updated_at", "2021-02-23 14:35:30.833742"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "task" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:20:45 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:21:25 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch" for ::1 at 2021-02-23 15:21:59 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant Api::V1::LunchController
Did you mean?  Api::V1::LunchesController):
  
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:92:in `rescue in controller_class_for'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:44:in `controller'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:31:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:23:17 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:23:59 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 5.7ms | Allocations: 1560)
Completed 200 OK in 20ms (Views: 5.0ms | ActiveRecord: 2.2ms | Allocations: 6264)


Started GET "/api/v1/restaurants/1%20" for ::1 at 2021-02-23 15:27:18 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/restaurants/1%20"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch/1%20" for ::1 at 2021-02-23 15:27:32 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunch/1%20"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch/1%20" for ::1 at 2021-02-23 15:27:41 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunch/1%20"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch/1" for ::1 at 2021-02-23 15:27:52 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunch/1"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:28:19 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:14:in `set_restaurant'
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 3490)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:43:24 +0000
  
NameError (undefined local variable or method `acts_as_token_authenticatable' for User (call 'User.connection' to establish a connection):Class):
  
app/models/user.rb:2:in `<class:User>'
app/models/user.rb:1:in `<main>'
config/routes.rb:2:in `block in <main>'
config/routes.rb:1:in `<main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$oKuII45WQpgAjQ6P6JXk5uilORfrrpBtUE43.m7QJKYkfSDhwkcO2"], ["created_at", "2021-02-23 15:45:51.328084"], ["updated_at", "2021-02-23 15:45:51.328084"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "DaHCeVsDvKQs1Q37xkCu"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$7kmmtN7Uxqckj0w5VxaIPO8XwwkdJydXyxmDn.QvcfLjFFdaj2R0W"], ["created_at", "2021-02-23 15:45:51.519164"], ["updated_at", "2021-02-23 15:45:51.519164"], ["authentication_token", "DaHCeVsDvKQs1Q37xkCu"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "wNHPxYtDD5u4L1h3d9vT"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$U3PXSxZ1ty95t9PFcxG2z.FipQL96Bfs0hGxtYt.NrVNvZ4RI9.Ma"], ["created_at", "2021-02-23 15:45:51.701368"], ["updated_at", "2021-02-23 15:45:51.701368"], ["authentication_token", "wNHPxYtDD5u4L1h3d9vT"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "E6_YYmHd23x62omEB75H"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$lLM/UGzWmWiYBeW0fa6VKOqjfNv8z5BU.GP84n2CLDugR12/o4RUy"], ["created_at", "2021-02-23 15:45:51.887279"], ["updated_at", "2021-02-23 15:45:51.887279"], ["authentication_token", "E6_YYmHd23x62omEB75H"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:46:30 +0000
  
NameError (undefined local variable or method `acts_as_token_authenticatable' for User (call 'User.connection' to establish a connection):Class):
  
app/models/user.rb:2:in `<class:User>'
app/models/user.rb:1:in `<main>'
config/routes.rb:2:in `block in <main>'
config/routes.rb:1:in `<main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:47:04 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}, "id"=>"1"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:23:in `set_lunch'
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 2415)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-23 15:50:19 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:23:in `set_lunch'
Completed 404 Not Found in 47ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 12559)


Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:52:27 +0000
  
ActionController::RoutingError (No route matches [POST] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:54:14 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :release[0m
Completed 500 Internal Server Error in 38ms (ActiveRecord: 7.4ms | Allocations: 15223)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:21:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:54:53 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameters: :release, :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[36mLunch Create (0.8ms)[0m  [1m[32mINSERT INTO "lunches" ("distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-23 15:54:53.636661"], ["updated_at", "2021-02-23 15:54:53.636661"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 112)
Completed 201 Created in 31ms (Views: 0.9ms | ActiveRecord: 7.1ms | Allocations: 19857)


Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:55:07 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-23 15:55:07.679911"], ["updated_at", "2021-02-23 15:55:07.679911"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.1ms | Allocations: 47)
Completed 201 Created in 15ms (Views: 0.7ms | ActiveRecord: 7.4ms | Allocations: 4611)


Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:56:01 +0000
  
ActionController::RoutingError (No route matches [DELETE] "/api/v1/lunches/1"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:03 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
Completed 500 Internal Server Error in 53ms (ActiveRecord: 4.5ms | Allocations: 21296)


  
NoMethodError (undefined method `destroy' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:36 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[36mLunch Destroy (0.7ms)[0m  [1m[31mDELETE FROM "lunches" WHERE "lunches"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
Completed 204 No Content in 36ms (ActiveRecord: 7.8ms | Allocations: 19341)


Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:46 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
Completed 404 Not Found in 23ms (Views: 0.2ms | ActiveRecord: 5.8ms | Allocations: 12028)


Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:57:51 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-23 15:57:51.155682"], ["updated_at", "2021-02-23 15:57:51.155682"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 114)
Completed 201 Created in 16ms (Views: 0.8ms | ActiveRecord: 7.5ms | Allocations: 9950)


Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:55 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 2669)


Started DELETE "/api/v1/lunches/3" for ::1 at 2021-02-23 15:58:01 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[36mLunch Destroy (0.3ms)[0m  [1m[31mDELETE FROM "lunches" WHERE "lunches"."id" = $1[0m  [["id", 3]]
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 8.1ms | Allocations: 5590)


  
ArgumentError (Unrecognized status code :done):
  
app/controllers/api/v1/lunches_controller.rb:33:in `destroy'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:58:17 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 8.2ms | Allocations: 5474)
Completed 200 OK in 11ms (Views: 4.8ms | ActiveRecord: 3.9ms | Allocations: 7858)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 17:35:38 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 2937)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/api/v1/lunches_controller.rb:59:in `find_country'
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 17:36:16 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 3181)


  
NoMethodError (undefined method `merge' for #<String:0x000055727289f820>):
  
app/controllers/api/v1/lunches_controller.rb:59:in `find_country'
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 17:37:00 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (115.23ms)  GET https://api.yelp.com/v3/autocomplete?text=del&latitude=37.786882&longitude=-122.399972[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (302 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 8.4ms | Allocations: 5978)
Completed 200 OK in 374ms (Views: 5.2ms | ActiveRecord: 3.6ms | Excon: 115.2ms | Allocations: 21503)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:08:28 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (79.22ms)  GET https://api.yelp.com/v3/autocomplete?text=del&latitude=37.786882&longitude=-122.399972[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 5.3ms | Allocations: 5246)
Completed 200 OK in 272ms (Views: 5.2ms | ActiveRecord: 0.5ms | Excon: 79.2ms | Allocations: 13268)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:37:11 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (86.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories%22Restaurants%22[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 15.6ms | Allocations: 6081)
Completed 200 OK in 290ms (Views: 14.0ms | ActiveRecord: 3.5ms | Excon: 86.7ms | Allocations: 17906)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:39:41 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 4004)


  
NameError (uninitialized constant Api::V1::LunchesController::Arlon):
  
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:40:36 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 3993)


  
NameError (uninitialized constant Api::V1::LunchesController::Arlon):
  
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:40:48 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 3993)


  
NameError (uninitialized constant Api::V1::LunchesController::Arlon):
  
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:41:51 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (95.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 9.8ms | Allocations: 5418)
Completed 200 OK in 330ms (Views: 8.1ms | ActiveRecord: 2.3ms | Excon: 96.0ms | Allocations: 13447)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:42:20 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (83.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 11.7ms | Allocations: 5377)
Completed 200 OK in 266ms (Views: 8.8ms | ActiveRecord: 3.7ms | Excon: 83.6ms | Allocations: 13397)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:43:50 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (105.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 10.7ms | Allocations: 5369)
Completed 200 OK in 299ms (Views: 8.3ms | ActiveRecord: 3.0ms | Excon: 106.0ms | Allocations: 13120)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:20:38 +0000
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (118.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:28:in `create'
  [1m[36mLunch Create (2.0ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-24 10:21:08.848244"], ["updated_at", "2021-02-24 10:21:08.848244"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:28:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.8ms | Allocations: 228)
Completed 201 Created in 29919ms (Views: 4.0ms | ActiveRecord: 9.8ms | Excon: 118.7ms | Allocations: 165958)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:21:15 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (5116.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 253488ms (ActiveRecord: 7.0ms | Excon: 5116.2ms | Allocations: 945813)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:25:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:25:39 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:27:02 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (76.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 4719ms (ActiveRecord: 5.7ms | Excon: 76.6ms | Allocations: 852607)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Completed 500 Internal Server Error in 123082ms (ActiveRecord: 2.3ms | Allocations: 2722067)


  
Errno::EIO (Input/output error @ io_writev - <STDOUT>):
  
app/controllers/api/v1/lunches_controller.rb:30:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:27:50 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (114.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 228148ms (ActiveRecord: 6.6ms | Excon: 114.7ms | Allocations: 1061505)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:32:24 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :attendees[0m
[31mUnpermitted parameter: :attendees[0m
[31mUnpermitted parameter: :attendees[0m
[31mUnpermitted parameter: :attendees[0m
  [1m[34mExcon Request[0m (85.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:39:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 10:32:24.971302"], ["updated_at", "2021-02-24 10:32:24.971302"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:39:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:39:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 228)
Completed 201 Created in 331ms (Views: 4.2ms | ActiveRecord: 12.7ms | Excon: 85.4ms | Allocations: 28776)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:38:59 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (74.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 295ms (ActiveRecord: 5.9ms | Excon: 74.5ms | Allocations: 24410)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:36:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:41:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (96.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:43:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 10:41:16.364304"], ["updated_at", "2021-02-24 10:41:16.364304"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:43:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:43:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 117)
Completed 201 Created in 294ms (Views: 1.0ms | ActiveRecord: 5.8ms | Excon: 96.4ms | Allocations: 24933)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:48:00 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (87.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:44:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 10:48:01.177791"], ["updated_at", "2021-02-24 10:48:01.177791"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:44:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:44:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.4ms | Allocations: 151)
Completed 201 Created in 289ms (Views: 1.3ms | ActiveRecord: 2.3ms | Excon: 87.5ms | Allocations: 23639)


Started GET "/api/v1/lunches" for ::1 at 2021-02-24 10:48:11 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 2.0ms | Allocations: 1298)
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.2ms | Allocations: 1900)


  [1m[36mLunch Load (0.6ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  [1m[36mPreference Load (1.0ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:15:16 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 3.5ms | Allocations: 1522)
Completed 200 OK in 12ms (Views: 3.7ms | ActiveRecord: 1.0ms | Allocations: 5374)


Started GET "/api/v1/preferences/2" for ::1 at 2021-02-24 11:16:03 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"2", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
Completed 404 Not Found in 13ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 3302)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-24 11:16:08 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1101)


Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:16:18 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 1.3ms | Allocations: 711)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 1145)


Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:17:20 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "tastes"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :tastes[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (6.8ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Gaelle"], ["user_id", 1], ["created_at", "2021-02-24 11:17:20.928815"], ["updated_at", "2021-02-24 11:17:20.928815"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 2.8ms | Allocations: 2858)
Completed 500 Internal Server Error in 64ms (ActiveRecord: 10.0ms | Allocations: 19989)


  
ActionView::Template::Error (undefined method `taste' for #<Preference:0x000055822bd0b120>
Did you mean?  task):
    1: # frozen_string_literal: true
    2: 
    3: json.extract! @preference, :name, :taste
  
app/views/api/v1/preferences/show.json.jbuilder:3
app/controllers/api/v1/preferences_controller.rb:29:in `create'
Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:17:32 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :taste[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Gaelle"], ["user_id", 1], ["created_at", "2021-02-24 11:17:32.725612"], ["updated_at", "2021-02-24 11:17:32.725612"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 2.3ms | Allocations: 2499)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.4ms | Allocations: 6978)


  
ActionView::Template::Error (undefined method `taste' for #<Preference:0x000055822da74c20>
Did you mean?  task):
    1: # frozen_string_literal: true
    2: 
    3: json.extract! @preference, :name, :taste
  
app/views/api/v1/preferences/show.json.jbuilder:3
app/controllers/api/v1/preferences_controller.rb:29:in `create'
Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:21:17 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 50ms (ActiveRecord: 6.7ms | Allocations: 14486)


  
ActiveModel::UnknownAttributeError (unknown attribute 'taste' for Preference.):
  
app/controllers/api/v1/preferences_controller.rb:25:in `create'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (14.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (153.0ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (73.9ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-24 11:22:10.698453"], ["updated_at", "2021-02-24 11:22:10.698453"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$UX3MDttwBQoWxpXxJpoBxug6DrL8mcg5ZLQaIYQ5kSHuIIbE9/TvO"], ["created_at", "2021-02-24 11:22:10.983143"], ["updated_at", "2021-02-24 11:22:10.983143"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "RNQ-wxhupEsbGfPvCNwk"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$5py/H.PC3eZOVnSNMKa7k.IBVWXI0s1gLNRJO1MXjRaEPtVQCJQ4a"], ["created_at", "2021-02-24 11:22:11.163011"], ["updated_at", "2021-02-24 11:22:11.163011"], ["authentication_token", "RNQ-wxhupEsbGfPvCNwk"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "2wbUzhFBBn-iTJSpTXBY"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$.16jSn8eCLVLYlThZjXeNe4LgtdTn12USFR6mv1bRn1ePVFuCzgie"], ["created_at", "2021-02-24 11:22:11.344034"], ["updated_at", "2021-02-24 11:22:11.344034"], ["authentication_token", "2wbUzhFBBn-iTJSpTXBY"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "bGNT2q5LiLqRnwU_xxJa"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$ZGXws9.R0a3B/BQ.zQZose2xNMzLXljwMCiMbCGA0K3qPHzSN71fe"], ["created_at", "2021-02-24 11:22:11.524005"], ["updated_at", "2021-02-24 11:22:11.524005"], ["authentication_token", "bGNT2q5LiLqRnwU_xxJa"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:22:21 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.8ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gaelle"], ["taste", "{Japanese,Lebanese}"], ["user_id", 1], ["created_at", "2021-02-24 11:22:21.633826"], ["updated_at", "2021-02-24 11:22:21.633826"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.3ms | Allocations: 250)
Completed 201 Created in 56ms (Views: 2.3ms | ActiveRecord: 6.0ms | Allocations: 19568)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-24 11:22:29 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.3ms | Allocations: 139)
Completed 200 OK in 6ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 2064)


Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:22:32 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 13.2ms | Allocations: 861)
Completed 200 OK in 15ms (Views: 13.3ms | ActiveRecord: 0.2ms | Allocations: 1439)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (24.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (73.7ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (70.8ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-24 11:25:30.528902"], ["updated_at", "2021-02-24 11:25:30.528902"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$zp5vymkrj5i3PhH3Li7Vb.LzrkuwFZfGYAK2jkR123y6QNBaEuTJ6"], ["created_at", "2021-02-24 11:25:30.766505"], ["updated_at", "2021-02-24 11:25:30.766505"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "12V8WuMPpFTas3ZYtmzF"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$xwrFrRltCzgQCEDaFBTau.ft3pCk8CBDy6JlcFgo3z3IgQzh8DNQ."], ["created_at", "2021-02-24 11:25:30.949956"], ["updated_at", "2021-02-24 11:25:30.949956"], ["authentication_token", "12V8WuMPpFTas3ZYtmzF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "P-zbdx6CukQmKeBPD1QL"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$GP.5Qnq.Tl81m6KmRgGj8uMMYA3xJrXnXu2hAAT.dbKB3zQrIjqlW"], ["created_at", "2021-02-24 11:25:31.132117"], ["updated_at", "2021-02-24 11:25:31.132117"], ["authentication_token", "P-zbdx6CukQmKeBPD1QL"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "LVYLNsYKBMcA23fvg5mA"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$CeKtXzWZXQezF1Cjgp1MX.LbzjJeIDULSAZ8ZPd19iLM2Vqb0P67K"], ["created_at", "2021-02-24 11:25:31.314917"], ["updated_at", "2021-02-24 11:25:31.314917"], ["authentication_token", "LVYLNsYKBMcA23fvg5mA"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-24 11:25:31.326204"], ["updated_at", "2021-02-24 11:25:31.326204"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:31.329889"], ["updated_at", "2021-02-24 11:25:31.329889"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:31.333342"], ["updated_at", "2021-02-24 11:25:31.333342"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (23.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (66.6ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (69.4ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-24 11:25:52.421397"], ["updated_at", "2021-02-24 11:25:52.421397"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$9eyp1Ez.tSZ9FOccOHYpEelGlKbd4I9UvezUejWcAlhhJEB72m3ja"], ["created_at", "2021-02-24 11:25:52.700484"], ["updated_at", "2021-02-24 11:25:52.700484"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "adp5MzszBCMxZ8f5J5Ko"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$r8bcECvQamQDP5DB0LwG4eN0VvZ.yKcCMY3.aql86TCz1tJXqxxuC"], ["created_at", "2021-02-24 11:25:52.880826"], ["updated_at", "2021-02-24 11:25:52.880826"], ["authentication_token", "adp5MzszBCMxZ8f5J5Ko"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "DebMfTQpfswE4pyhHuBF"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$9.Lei7jGCsJyz.8GN0GE4eCRMqLTn/5adKI9czcknpassOPfDM2ui"], ["created_at", "2021-02-24 11:25:53.062201"], ["updated_at", "2021-02-24 11:25:53.062201"], ["authentication_token", "DebMfTQpfswE4pyhHuBF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "U9QeEAVdy2-hsyZ7Hvk8"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$KjOAnAvlzVsloFqJ8luSzupdiEqueffVFSb1o3.nRWr.uTicsYCv2"], ["created_at", "2021-02-24 11:25:53.244794"], ["updated_at", "2021-02-24 11:25:53.244794"], ["authentication_token", "U9QeEAVdy2-hsyZ7Hvk8"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-24 11:25:53.256437"], ["updated_at", "2021-02-24 11:25:53.256437"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:53.260478"], ["updated_at", "2021-02-24 11:25:53.260478"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:53.264330"], ["updated_at", "2021-02-24 11:25:53.264330"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Create (0.1ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-24 11:25:53.267917"], ["updated_at", "2021-02-24 11:25:53.267917"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:29:19 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.5ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 18.1ms | Allocations: 5657)
Completed 200 OK in 34ms (Views: 15.9ms | ActiveRecord: 4.0ms | Allocations: 9509)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-24 11:29:26 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.3ms | Allocations: 152)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 1832)


Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:29:33 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.8ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gaelle"], ["taste", "{Japanese,Lebanese}"], ["user_id", 1], ["created_at", "2021-02-24 11:29:33.790115"], ["updated_at", "2021-02-24 11:29:33.790115"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 66)
Completed 201 Created in 39ms (Views: 0.4ms | ActiveRecord: 9.3ms | Allocations: 13338)


Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:29:36 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 1.5ms | Allocations: 1084)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 1519)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:02:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:92:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:92:in `matching_preferences'
  [1m[34mExcon Request[0m (109.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants,%20french[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 12:03:33.512536"], ["updated_at", "2021-02-24 12:03:33.512536"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.4ms | Allocations: 152)
Completed 201 Created in 64451ms (Views: 1.3ms | ActiveRecord: 12.1ms | Excon: 109.9ms | Allocations: 424284)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:03:37 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.5ms | Allocations: 17127)


  
NoMethodError (undefined method `[]=' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:106:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:04:09 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 5.6ms | Allocations: 17079)


  
NoMethodError (undefined method `[]=' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:106:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:04:57 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:06:52 +0000
  [1m[34mExcon Request[0m (77.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants,%20french[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 12:06:56.738993"], ["updated_at", "2021-02-24 12:06:56.738993"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 271)
Completed 201 Created in 119267ms (Views: 2.6ms | ActiveRecord: 16.9ms | Excon: 77.7ms | Allocations: 2252289)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[34mExcon Request[0m (77.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=[%22Italian%22,%202][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 12:06:57.098954"], ["updated_at", "2021-02-24 12:06:57.098954"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 91)
Completed 201 Created in 291ms (Views: 0.8ms | ActiveRecord: 9.4ms | Excon: 77.3ms | Allocations: 30689)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:09:25 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[34mExcon Request[0m (99.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 12:09:25.473555"], ["updated_at", "2021-02-24 12:09:25.473555"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.1ms | Allocations: 84)
Completed 201 Created in 310ms (Views: 0.6ms | ActiveRecord: 13.0ms | Excon: 99.6ms | Allocations: 31477)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.1ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:52:37 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (5125.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:52:43.141881"], ["updated_at", "2021-02-24 13:52:43.141881"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 264)
Completed 201 Created in 5378ms (Views: 2.1ms | ActiveRecord: 18.0ms | Excon: 5125.9ms | Allocations: 37180)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:53:00 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
Completed 500 Internal Server Error in 168ms (ActiveRecord: 4.5ms | Allocations: 132409)


  
NameError (undefined local variable or method `empty_request' for #<Api::V1::LunchesController:0x000055a417ca7e00>
Did you mean?  set_request!):
  
app/controllers/api/v1/lunches_controller.rb:89:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:32:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:53:23 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:122:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:122:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:122:in `matching_preferences'
  [1m[34mExcon Request[0m (80.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:53:23.427552"], ["updated_at", "2021-02-24 13:53:23.427552"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 297ms (ActiveRecord: 8.6ms | Excon: 80.3ms | Allocations: 31211)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:89:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:54:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (98.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:54:21.576075"], ["updated_at", "2021-02-24 13:54:21.576075"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 85819ms (ActiveRecord: 9.8ms | Excon: 98.0ms | Allocations: 408403)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:55:53 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (128.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:55:54.092607"], ["updated_at", "2021-02-24 13:55:54.092607"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 43735ms (ActiveRecord: 17.0ms | Excon: 128.6ms | Allocations: 524596)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:56:41 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (73.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:56:41.655948"], ["updated_at", "2021-02-24 13:56:41.655948"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 84980ms (ActiveRecord: 8.7ms | Excon: 73.1ms | Allocations: 1825168)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:58:12 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (79.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.8ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:58:54.626373"], ["updated_at", "2021-02-24 13:58:54.626373"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.647927"], ["updated_at", "2021-02-24 13:58:54.647927"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.654736"], ["updated_at", "2021-02-24 13:58:54.654736"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.661127"], ["updated_at", "2021-02-24 13:58:54.661127"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.667630"], ["updated_at", "2021-02-24 13:58:54.667630"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.673964"], ["updated_at", "2021-02-24 13:58:54.673964"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.680267"], ["updated_at", "2021-02-24 13:58:54.680267"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.686687"], ["updated_at", "2021-02-24 13:58:54.686687"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.692938"], ["updated_at", "2021-02-24 13:58:54.692938"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.699211"], ["updated_at", "2021-02-24 13:58:54.699211"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.705472"], ["updated_at", "2021-02-24 13:58:54.705472"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 11.7ms | Allocations: 262)
Completed 500 Internal Server Error in 42209ms (Views: 14.1ms | ActiveRecord: 29.2ms | Excon: 79.1ms | Allocations: 226984)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:59:23 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (106.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.21ms)  [1m200 OK (9.63 KB)[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:04:01 +0000
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:04:07.419017"], ["updated_at", "2021-02-24 14:04:07.419017"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.438946"], ["updated_at", "2021-02-24 14:04:07.438946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.442849"], ["updated_at", "2021-02-24 14:04:07.442849"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.446889"], ["updated_at", "2021-02-24 14:04:07.446889"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.452535"], ["updated_at", "2021-02-24 14:04:07.452535"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.458061"], ["updated_at", "2021-02-24 14:04:07.458061"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.463974"], ["updated_at", "2021-02-24 14:04:07.463974"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.469494"], ["updated_at", "2021-02-24 14:04:07.469494"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.474781"], ["updated_at", "2021-02-24 14:04:07.474781"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.480135"], ["updated_at", "2021-02-24 14:04:07.480135"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.485578"], ["updated_at", "2021-02-24 14:04:07.485578"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 262)
Completed 500 Internal Server Error in 283910ms (Views: 2.6ms | ActiveRecord: 30.0ms | Excon: 106.8ms | Allocations: 4371114)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (76.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:04:08.485567"], ["updated_at", "2021-02-24 14:04:08.485567"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.505703"], ["updated_at", "2021-02-24 14:04:08.505703"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.511738"], ["updated_at", "2021-02-24 14:04:08.511738"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.517773"], ["updated_at", "2021-02-24 14:04:08.517773"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.523668"], ["updated_at", "2021-02-24 14:04:08.523668"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.529529"], ["updated_at", "2021-02-24 14:04:08.529529"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.535821"], ["updated_at", "2021-02-24 14:04:08.535821"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.541778"], ["updated_at", "2021-02-24 14:04:08.541778"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.547503"], ["updated_at", "2021-02-24 14:04:08.547503"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.551540"], ["updated_at", "2021-02-24 14:04:08.551540"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.554869"], ["updated_at", "2021-02-24 14:04:08.554869"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.1ms | Allocations: 84)
Completed 500 Internal Server Error in 899ms (Views: 0.5ms | ActiveRecord: 24.3ms | Excon: 76.8ms | Allocations: 78428)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:04:41 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (81.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:04:42.359341"], ["updated_at", "2021-02-24 14:04:42.359341"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.379885"], ["updated_at", "2021-02-24 14:04:42.379885"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.400426"], ["updated_at", "2021-02-24 14:04:42.400426"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.406442"], ["updated_at", "2021-02-24 14:04:42.406442"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.412295"], ["updated_at", "2021-02-24 14:04:42.412295"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.418209"], ["updated_at", "2021-02-24 14:04:42.418209"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.424212"], ["updated_at", "2021-02-24 14:04:42.424212"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.430174"], ["updated_at", "2021-02-24 14:04:42.430174"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.436003"], ["updated_at", "2021-02-24 14:04:42.436003"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.441802"], ["updated_at", "2021-02-24 14:04:42.441802"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.447618"], ["updated_at", "2021-02-24 14:04:42.447618"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 84)
Completed 201 Created in 698ms (Views: 1.0ms | ActiveRecord: 25.0ms | Excon: 81.3ms | Allocations: 77296)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:09:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (5084.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:10:03.368795"], ["updated_at", "2021-02-24 14:10:03.368795"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.376727"], ["updated_at", "2021-02-24 14:10:03.376727"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.383049"], ["updated_at", "2021-02-24 14:10:03.383049"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.389291"], ["updated_at", "2021-02-24 14:10:03.389291"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.395665"], ["updated_at", "2021-02-24 14:10:03.395665"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.400432"], ["updated_at", "2021-02-24 14:10:03.400432"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.404898"], ["updated_at", "2021-02-24 14:10:03.404898"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.410920"], ["updated_at", "2021-02-24 14:10:03.410920"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.417191"], ["updated_at", "2021-02-24 14:10:03.417191"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.423309"], ["updated_at", "2021-02-24 14:10:03.423309"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.429360"], ["updated_at", "2021-02-24 14:10:03.429360"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1319)
Completed 500 Internal Server Error in 5634ms (ActiveRecord: 14.7ms | Excon: 5084.0ms | Allocations: 55431)


  
ActionView::Template::Error (undefined method `restaurants' for nil:NilClass):
    1: # json.cache! ['finders'], expires_in: 1.minutes do |json|
    2:   json.extract! @lunch, :id, :localisation, :distance, :price
    3: 
    4:   json.restaurants @finder.restaurants do |restaurant|
    5:     json.extract! restaurant, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
    6:   end
    7: # end
  
app/views/api/v1/lunches/show.json.jbuilder:4
app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:10:35 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (98.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:10:36.163721"], ["updated_at", "2021-02-24 14:10:36.163721"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.175937"], ["updated_at", "2021-02-24 14:10:36.175937"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.182002"], ["updated_at", "2021-02-24 14:10:36.182002"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.186579"], ["updated_at", "2021-02-24 14:10:36.186579"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.189992"], ["updated_at", "2021-02-24 14:10:36.189992"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.193560"], ["updated_at", "2021-02-24 14:10:36.193560"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.203629"], ["updated_at", "2021-02-24 14:10:36.203629"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.207217"], ["updated_at", "2021-02-24 14:10:36.207217"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.210968"], ["updated_at", "2021-02-24 14:10:36.210968"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.214372"], ["updated_at", "2021-02-24 14:10:36.214372"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.217870"], ["updated_at", "2021-02-24 14:10:36.217870"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 9.6ms | Allocations: 6585)
Completed 201 Created in 623ms (Views: 9.9ms | ActiveRecord: 19.9ms | Excon: 98.1ms | Allocations: 61181)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:11:13 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (5090.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:11:34.990196"], ["updated_at", "2021-02-24 14:11:34.990196"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.012655"], ["updated_at", "2021-02-24 14:11:35.012655"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.018972"], ["updated_at", "2021-02-24 14:11:35.018972"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.024355"], ["updated_at", "2021-02-24 14:11:35.024355"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.029702"], ["updated_at", "2021-02-24 14:11:35.029702"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.035285"], ["updated_at", "2021-02-24 14:11:35.035285"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.042007"], ["updated_at", "2021-02-24 14:11:35.042007"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.046358"], ["updated_at", "2021-02-24 14:11:35.046358"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.050756"], ["updated_at", "2021-02-24 14:11:35.050756"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.053945"], ["updated_at", "2021-02-24 14:11:35.053945"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.057297"], ["updated_at", "2021-02-24 14:11:35.057297"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 2526)
Completed 201 Created in 21774ms (Views: 2.1ms | ActiveRecord: 23.3ms | Excon: 5090.1ms | Allocations: 236000)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:11:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (71.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:11:46.991130"], ["updated_at", "2021-02-24 14:11:46.991130"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.018356"], ["updated_at", "2021-02-24 14:11:47.018356"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.024290"], ["updated_at", "2021-02-24 14:11:47.024290"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.030487"], ["updated_at", "2021-02-24 14:11:47.030487"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Greek"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.036779"], ["updated_at", "2021-02-24 14:11:47.036779"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.043809"], ["updated_at", "2021-02-24 14:11:47.043809"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Irish Pub"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.049557"], ["updated_at", "2021-02-24 14:11:47.049557"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.055308"], ["updated_at", "2021-02-24 14:11:47.055308"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.060944"], ["updated_at", "2021-02-24 14:11:47.060944"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Chinese"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.066523"], ["updated_at", "2021-02-24 14:11:47.066523"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Bars"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.071483"], ["updated_at", "2021-02-24 14:11:47.071483"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.2ms | Allocations: 2527)
Completed 201 Created in 590ms (Views: 2.4ms | ActiveRecord: 30.1ms | Excon: 72.0ms | Allocations: 79459)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:12:14 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (67.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:13:40 +0000
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:13:48.371250"], ["updated_at", "2021-02-24 14:13:48.371250"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.396900"], ["updated_at", "2021-02-24 14:13:48.396900"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.403216"], ["updated_at", "2021-02-24 14:13:48.403216"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.409110"], ["updated_at", "2021-02-24 14:13:48.409110"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Greek"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.415095"], ["updated_at", "2021-02-24 14:13:48.415095"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.421134"], ["updated_at", "2021-02-24 14:13:48.421134"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Irish Pub"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.426889"], ["updated_at", "2021-02-24 14:13:48.426889"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.433169"], ["updated_at", "2021-02-24 14:13:48.433169"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.439203"], ["updated_at", "2021-02-24 14:13:48.439203"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Chinese"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.445184"], ["updated_at", "2021-02-24 14:13:48.445184"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Bars"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.451020"], ["updated_at", "2021-02-24 14:13:48.451020"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 2529)
Completed 201 Created in 93814ms (Views: 3.6ms | ActiveRecord: 31.9ms | Excon: 67.8ms | Allocations: 872604)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (98.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:13:49.207670"], ["updated_at", "2021-02-24 14:13:49.207670"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.232017"], ["updated_at", "2021-02-24 14:13:49.232017"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.237842"], ["updated_at", "2021-02-24 14:13:49.237842"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.243441"], ["updated_at", "2021-02-24 14:13:49.243441"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.248946"], ["updated_at", "2021-02-24 14:13:49.248946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.254383"], ["updated_at", "2021-02-24 14:13:49.254383"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.260196"], ["updated_at", "2021-02-24 14:13:49.260196"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.265810"], ["updated_at", "2021-02-24 14:13:49.265810"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.271530"], ["updated_at", "2021-02-24 14:13:49.271530"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.277063"], ["updated_at", "2021-02-24 14:13:49.277063"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.282736"], ["updated_at", "2021-02-24 14:13:49.282736"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2596)
Completed 201 Created in 772ms (Views: 3.8ms | ActiveRecord: 30.7ms | Excon: 98.6ms | Allocations: 80943)


Started POST "/api/v1/sign_up" for ::1 at 2021-02-24 14:31:51 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"4444@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "registration"=>{"user"=>{"email"=>"4444@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "4444@example.com"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "CW3ANozHyzjCFExyHsnA"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "4444@example.com"], ["encrypted_password", "$2a$12$ZM.WJ6Zw4CTT6LiaQsDxzO8oBt3o7pQwXk.5PAf1SltREp4n1z6nC"], ["created_at", "2021-02-24 14:31:51.515829"], ["updated_at", "2021-02-24 14:31:51.515829"], ["authentication_token", "CW3ANozHyzjCFExyHsnA"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
Completed 200 OK in 222ms (Views: 0.7ms | ActiveRecord: 5.4ms | Allocations: 13210)


Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:32:00 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 676)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:32:33 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 509)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:34:00 +0000
Processing by Api::V1::SessionsController#create as JSON
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 504)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:41:11 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 601)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:41:26 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 508)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:42:10 +0000
Processing by Api::V1::SessionsController#create as JSON
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 504)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:42:26 +0000
Processing by Api::V1::SessionsController#create as JSON
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 504)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:42:54 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 520)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:44:07 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 622)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/v1/sign_up" for ::1 at 2021-02-24 15:17:26 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "registration"=>{"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaaaaa@example.com"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "6qN63HFPDzCDWPdG379_"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "aaaaaa@example.com"], ["encrypted_password", "$2a$12$eyQ2rOG1sO0Ifv2D/J6VfOiMaUlKPsL3cQbo4Nsq3YwWmJRlY9thy"], ["created_at", "2021-02-24 15:17:26.406320"], ["updated_at", "2021-02-24 15:17:26.406320"], ["authentication_token", "6qN63HFPDzCDWPdG379_"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
Completed 200 OK in 203ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 13211)


Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 15:17:30 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 611)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 15:17:58 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 509)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 15:18:25 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]"}}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 520)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:19:38 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[34mExcon Request[0m (111.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 15:19:38.827844"], ["updated_at", "2021-02-24 15:19:38.827844"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.847107"], ["updated_at", "2021-02-24 15:19:38.847107"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.852524"], ["updated_at", "2021-02-24 15:19:38.852524"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.858171"], ["updated_at", "2021-02-24 15:19:38.858171"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.864745"], ["updated_at", "2021-02-24 15:19:38.864745"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.878938"], ["updated_at", "2021-02-24 15:19:38.878938"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.890993"], ["updated_at", "2021-02-24 15:19:38.890993"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.902827"], ["updated_at", "2021-02-24 15:19:38.902827"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.913177"], ["updated_at", "2021-02-24 15:19:38.913177"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.920056"], ["updated_at", "2021-02-24 15:19:38.920056"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.928347"], ["updated_at", "2021-02-24 15:19:38.928347"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 6.8ms | Allocations: 3470)
Completed 201 Created in 888ms (Views: 9.1ms | ActiveRecord: 32.2ms | Excon: 111.1ms | Allocations: 86749)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:19:52 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 5], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[34mExcon Request[0m (111.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,5}"], ["user_id", 1], ["created_at", "2021-02-24 15:19:52.949104"], ["updated_at", "2021-02-24 15:19:52.949104"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.963968"], ["updated_at", "2021-02-24 15:19:52.963968"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.970010"], ["updated_at", "2021-02-24 15:19:52.970010"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.975765"], ["updated_at", "2021-02-24 15:19:52.975765"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.981505"], ["updated_at", "2021-02-24 15:19:52.981505"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.987317"], ["updated_at", "2021-02-24 15:19:52.987317"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.992883"], ["updated_at", "2021-02-24 15:19:52.992883"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.998302"], ["updated_at", "2021-02-24 15:19:52.998302"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:53.003803"], ["updated_at", "2021-02-24 15:19:53.003803"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:53.010578"], ["updated_at", "2021-02-24 15:19:53.010578"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:53.015289"], ["updated_at", "2021-02-24 15:19:53.015289"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1975)
Completed 201 Created in 673ms (Views: 2.9ms | ActiveRecord: 20.9ms | Excon: 111.5ms | Allocations: 58371)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:34:45 +0000
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 5], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[34mExcon Request[0m (80.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,5}"], ["user_id", 1], ["created_at", "2021-02-24 15:41:56.355694"], ["updated_at", "2021-02-24 15:41:56.355694"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.375055"], ["updated_at", "2021-02-24 15:41:56.375055"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.381123"], ["updated_at", "2021-02-24 15:41:56.381123"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.386653"], ["updated_at", "2021-02-24 15:41:56.386653"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.396128"], ["updated_at", "2021-02-24 15:41:56.396128"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.411015"], ["updated_at", "2021-02-24 15:41:56.411015"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.423784"], ["updated_at", "2021-02-24 15:41:56.423784"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.435017"], ["updated_at", "2021-02-24 15:41:56.435017"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.444298"], ["updated_at", "2021-02-24 15:41:56.444298"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.450236"], ["updated_at", "2021-02-24 15:41:56.450236"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.458563"], ["updated_at", "2021-02-24 15:41:56.458563"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 13.7ms | Allocations: 3479)
Completed 201 Created in 430896ms (Views: 16.0ms | ActiveRecord: 26.8ms | Excon: 80.7ms | Allocations: 2385931)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:41:58 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 5], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:42:17 +0000
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (89.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4,5&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (122 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,5}"], ["user_id", 1], ["created_at", "2021-02-24 15:42:21.177533"], ["updated_at", "2021-02-24 15:42:21.177533"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 22436ms (ActiveRecord: 16.6ms | Excon: 89.8ms | Allocations: 201267)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (73.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m500 Internal Server Error (112 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:42:36.617120"], ["updated_at", "2021-02-24 15:42:36.617120"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 15250ms (ActiveRecord: 16.0ms | Excon: 73.1ms | Allocations: 60517)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:44:53 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (89.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:45:58.944452"], ["updated_at", "2021-02-24 15:45:58.944452"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Japanese"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.969163"], ["updated_at", "2021-02-24 15:45:58.969163"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.974816"], ["updated_at", "2021-02-24 15:45:58.974816"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Italian"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.980107"], ["updated_at", "2021-02-24 15:45:58.980107"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Hotels"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.993653"], ["updated_at", "2021-02-24 15:45:58.993653"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.999668"], ["updated_at", "2021-02-24 15:45:58.999668"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.005326"], ["updated_at", "2021-02-24 15:45:59.005326"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.010686"], ["updated_at", "2021-02-24 15:45:59.010686"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.016039"], ["updated_at", "2021-02-24 15:45:59.016039"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.021681"], ["updated_at", "2021-02-24 15:45:59.021681"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.027085"], ["updated_at", "2021-02-24 15:45:59.027085"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2681)
Completed 201 Created in 65100ms (Views: 4.1ms | ActiveRecord: 30.0ms | Excon: 89.3ms | Allocations: 437410)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:46:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:47:39 +0000
  [1m[34mExcon Request[0m (94.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=Italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:47:48.279593"], ["updated_at", "2021-02-24 15:47:48.279593"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Japanese"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.297423"], ["updated_at", "2021-02-24 15:47:48.297423"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.300855"], ["updated_at", "2021-02-24 15:47:48.300855"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Italian"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.303985"], ["updated_at", "2021-02-24 15:47:48.303985"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.0ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Hotels"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.307014"], ["updated_at", "2021-02-24 15:47:48.307014"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.310129"], ["updated_at", "2021-02-24 15:47:48.310129"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.0ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.313201"], ["updated_at", "2021-02-24 15:47:48.313201"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.316247"], ["updated_at", "2021-02-24 15:47:48.316247"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.319326"], ["updated_at", "2021-02-24 15:47:48.319326"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.323892"], ["updated_at", "2021-02-24 15:47:48.323892"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.329388"], ["updated_at", "2021-02-24 15:47:48.329388"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 2607)
Completed 201 Created in 104986ms (Views: 3.1ms | ActiveRecord: 27.0ms | Excon: 94.2ms | Allocations: 749624)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (80.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=Italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:47:48.994007"], ["updated_at", "2021-02-24 15:47:48.994007"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.026480"], ["updated_at", "2021-02-24 15:47:49.026480"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.032787"], ["updated_at", "2021-02-24 15:47:49.032787"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.038567"], ["updated_at", "2021-02-24 15:47:49.038567"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.044380"], ["updated_at", "2021-02-24 15:47:49.044380"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.050840"], ["updated_at", "2021-02-24 15:47:49.050840"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.057096"], ["updated_at", "2021-02-24 15:47:49.057096"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.062822"], ["updated_at", "2021-02-24 15:47:49.062822"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.069356"], ["updated_at", "2021-02-24 15:47:49.069356"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.075689"], ["updated_at", "2021-02-24 15:47:49.075689"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.081502"], ["updated_at", "2021-02-24 15:47:49.081502"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.7ms | Allocations: 2604)
Completed 201 Created in 720ms (Views: 4.1ms | ActiveRecord: 21.7ms | Excon: 80.1ms | Allocations: 82597)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:49:14 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:49:41 +0000
  [1m[34mExcon Request[0m (85.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=Italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:02.033939"], ["updated_at", "2021-02-24 15:51:02.033939"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.054156"], ["updated_at", "2021-02-24 15:51:02.054156"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.060685"], ["updated_at", "2021-02-24 15:51:02.060685"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.066927"], ["updated_at", "2021-02-24 15:51:02.066927"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.081842"], ["updated_at", "2021-02-24 15:51:02.081842"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.087371"], ["updated_at", "2021-02-24 15:51:02.087371"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.093411"], ["updated_at", "2021-02-24 15:51:02.093411"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.098388"], ["updated_at", "2021-02-24 15:51:02.098388"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.103179"], ["updated_at", "2021-02-24 15:51:02.103179"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.108266"], ["updated_at", "2021-02-24 15:51:02.108266"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.112306"], ["updated_at", "2021-02-24 15:51:02.112306"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.9ms | Allocations: 2608)
Completed 201 Created in 107305ms (Views: 2.1ms | ActiveRecord: 23.3ms | Excon: 85.8ms | Allocations: 822168)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (64.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:02.962848"], ["updated_at", "2021-02-24 15:51:02.962848"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-24 15:51:02.987397"], ["updated_at", "2021-02-24 15:51:02.987397"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-24 15:51:02.993561"], ["updated_at", "2021-02-24 15:51:02.993561"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (1.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 16.6ms | Allocations: 1860)
Completed 201 Created in 835ms (Views: 15.8ms | ActiveRecord: 21.7ms | Excon: 64.2ms | Allocations: 48484)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (73.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (949 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:16.302752"], ["updated_at", "2021-02-24 15:51:16.302752"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-24 15:51:16.316304"], ["updated_at", "2021-02-24 15:51:16.316304"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.0ms | Allocations: 1060)
Completed 201 Created in 742ms (Views: 1.1ms | ActiveRecord: 9.6ms | Excon: 73.7ms | Allocations: 19312)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (82.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (949 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:21.751917"], ["updated_at", "2021-02-24 15:51:21.751917"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-24 15:51:21.765771"], ["updated_at", "2021-02-24 15:51:21.765771"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1060)
Completed 201 Created in 516ms (Views: 2.0ms | ActiveRecord: 9.5ms | Excon: 82.8ms | Allocations: 19283)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[8, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (66.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4,5,6,7,8&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (144 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{8,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:29.274435"], ["updated_at", "2021-02-24 15:51:29.274435"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 262ms (ActiveRecord: 7.9ms | Excon: 66.2ms | Allocations: 13947)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (91.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:44.198085"], ["updated_at", "2021-02-24 15:51:44.198085"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-24 15:51:44.204959"], ["updated_at", "2021-02-24 15:51:44.204959"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-24 15:51:44.211156"], ["updated_at", "2021-02-24 15:51:44.211156"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 1153)
Completed 201 Created in 507ms (Views: 2.1ms | ActiveRecord: 4.8ms | Excon: 91.6ms | Allocations: 23321)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (191.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:50.636142"], ["updated_at", "2021-02-24 15:51:50.636142"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 404 Not Found in 539ms (Views: 0.1ms | ActiveRecord: 7.8ms | Excon: 191.0ms | Allocations: 14329)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:56 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 8], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (90.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=4,5,6,7,8&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (132 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,8}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:57.038500"], ["updated_at", "2021-02-24 15:51:57.038500"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 272ms (ActiveRecord: 7.7ms | Excon: 90.3ms | Allocations: 13981)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (83.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:03.591659"], ["updated_at", "2021-02-24 15:52:03.591659"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 404 Not Found in 444ms (Views: 0.1ms | ActiveRecord: 2.1ms | Excon: 83.1ms | Allocations: 14040)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:08 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>40000, "price"=>[4, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (68.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=40000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "40000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:09.132122"], ["updated_at", "2021-02-24 15:52:09.132122"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 404 Not Found in 420ms (Views: 0.1ms | ActiveRecord: 8.1ms | Excon: 68.3ms | Allocations: 14043)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>40000, "price"=>[0, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (84.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=40000&price=0,1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (132 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "40000"], ["price", "{0,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:15.286962"], ["updated_at", "2021-02-24 15:52:15.286962"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 268ms (ActiveRecord: 1.9ms | Excon: 84.6ms | Allocations: 13686)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>40000, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (87.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=40000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m500 Internal Server Error (112 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "40000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:21.609437"], ["updated_at", "2021-02-24 15:52:21.609437"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 1795ms (ActiveRecord: 8.0ms | Excon: 87.9ms | Allocations: 13995)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:26 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (97.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:27.467427"], ["updated_at", "2021-02-24 15:52:27.467427"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-24 15:52:27.475726"], ["updated_at", "2021-02-24 15:52:27.475726"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-24 15:52:27.482218"], ["updated_at", "2021-02-24 15:52:27.482218"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.0ms | Allocations: 1153)
Completed 201 Created in 565ms (Views: 2.3ms | ActiveRecord: 6.0ms | Excon: 97.2ms | Allocations: 23299)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:31 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[0, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (70.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=0,1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (132 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{0,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:32.211574"], ["updated_at", "2021-02-24 15:52:32.211574"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 260ms (ActiveRecord: 1.8ms | Excon: 70.7ms | Allocations: 13967)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (74.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:36.523516"], ["updated_at", "2021-02-24 15:52:36.523516"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-24 15:52:36.535497"], ["updated_at", "2021-02-24 15:52:36.535497"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-24 15:52:36.540345"], ["updated_at", "2021-02-24 15:52:36.540345"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.4ms | Allocations: 1153)
Completed 201 Created in 491ms (Views: 1.6ms | ActiveRecord: 10.9ms | Excon: 74.2ms | Allocations: 23339)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:55:18 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (83.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:55:18.726298"], ["updated_at", "2021-02-24 15:55:18.726298"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-24 15:55:18.751624"], ["updated_at", "2021-02-24 15:55:18.751624"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-24 15:55:18.757791"], ["updated_at", "2021-02-24 15:55:18.757791"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.0ms | Allocations: 1858)
Completed 201 Created in 604ms (Views: 3.5ms | ActiveRecord: 18.8ms | Excon: 83.3ms | Allocations: 48533)


