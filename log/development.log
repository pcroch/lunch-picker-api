  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (155.8ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (107.3ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-23 14:35:30.833742"], ["updated_at", "2021-02-23 14:35:30.833742"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "task" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:20:45 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:21:25 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch" for ::1 at 2021-02-23 15:21:59 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant Api::V1::LunchController
Did you mean?  Api::V1::LunchesController):
  
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:92:in `rescue in controller_class_for'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:44:in `controller'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:31:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:23:17 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:23:59 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 5.7ms | Allocations: 1560)
Completed 200 OK in 20ms (Views: 5.0ms | ActiveRecord: 2.2ms | Allocations: 6264)


Started GET "/api/v1/restaurants/1%20" for ::1 at 2021-02-23 15:27:18 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/restaurants/1%20"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch/1%20" for ::1 at 2021-02-23 15:27:32 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunch/1%20"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch/1%20" for ::1 at 2021-02-23 15:27:41 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunch/1%20"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunch/1" for ::1 at 2021-02-23 15:27:52 +0000
  
ActionController::RoutingError (No route matches [GET] "/api/v1/lunch/1"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:28:19 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:14:in `set_restaurant'
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 3490)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:43:24 +0000
  
NameError (undefined local variable or method `acts_as_token_authenticatable' for User (call 'User.connection' to establish a connection):Class):
  
app/models/user.rb:2:in `<class:User>'
app/models/user.rb:1:in `<main>'
config/routes.rb:2:in `block in <main>'
config/routes.rb:1:in `<main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$oKuII45WQpgAjQ6P6JXk5uilORfrrpBtUE43.m7QJKYkfSDhwkcO2"], ["created_at", "2021-02-23 15:45:51.328084"], ["updated_at", "2021-02-23 15:45:51.328084"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "DaHCeVsDvKQs1Q37xkCu"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$7kmmtN7Uxqckj0w5VxaIPO8XwwkdJydXyxmDn.QvcfLjFFdaj2R0W"], ["created_at", "2021-02-23 15:45:51.519164"], ["updated_at", "2021-02-23 15:45:51.519164"], ["authentication_token", "DaHCeVsDvKQs1Q37xkCu"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "wNHPxYtDD5u4L1h3d9vT"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$U3PXSxZ1ty95t9PFcxG2z.FipQL96Bfs0hGxtYt.NrVNvZ4RI9.Ma"], ["created_at", "2021-02-23 15:45:51.701368"], ["updated_at", "2021-02-23 15:45:51.701368"], ["authentication_token", "wNHPxYtDD5u4L1h3d9vT"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "E6_YYmHd23x62omEB75H"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$lLM/UGzWmWiYBeW0fa6VKOqjfNv8z5BU.GP84n2CLDugR12/o4RUy"], ["created_at", "2021-02-23 15:45:51.887279"], ["updated_at", "2021-02-23 15:45:51.887279"], ["authentication_token", "E6_YYmHd23x62omEB75H"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:46:30 +0000
  
NameError (undefined local variable or method `acts_as_token_authenticatable' for User (call 'User.connection' to establish a connection):Class):
  
app/models/user.rb:2:in `<class:User>'
app/models/user.rb:1:in `<main>'
config/routes.rb:2:in `block in <main>'
config/routes.rb:1:in `<main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-23 15:47:04 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}, "id"=>"1"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:23:in `set_lunch'
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 2415)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-23 15:50:19 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:23:in `set_lunch'
Completed 404 Not Found in 47ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 12559)


Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:52:27 +0000
  
ActionController::RoutingError (No route matches [POST] "/api/v1/lunches"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:54:14 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :release[0m
Completed 500 Internal Server Error in 38ms (ActiveRecord: 7.4ms | Allocations: 15223)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:21:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:54:53 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameters: :release, :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[36mLunch Create (0.8ms)[0m  [1m[32mINSERT INTO "lunches" ("distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-23 15:54:53.636661"], ["updated_at", "2021-02-23 15:54:53.636661"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 112)
Completed 201 Created in 31ms (Views: 0.9ms | ActiveRecord: 7.1ms | Allocations: 19857)


Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:55:07 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-23 15:55:07.679911"], ["updated_at", "2021-02-23 15:55:07.679911"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.1ms | Allocations: 47)
Completed 201 Created in 15ms (Views: 0.7ms | ActiveRecord: 7.4ms | Allocations: 4611)


Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:56:01 +0000
  
ActionController::RoutingError (No route matches [DELETE] "/api/v1/lunches/1"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:03 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
Completed 500 Internal Server Error in 53ms (ActiveRecord: 4.5ms | Allocations: 21296)


  
NoMethodError (undefined method `destroy' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:36 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[36mLunch Destroy (0.7ms)[0m  [1m[31mDELETE FROM "lunches" WHERE "lunches"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
Completed 204 No Content in 36ms (ActiveRecord: 7.8ms | Allocations: 19341)


Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:46 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
Completed 404 Not Found in 23ms (Views: 0.2ms | ActiveRecord: 5.8ms | Allocations: 12028)


Started POST "/api/v1/lunches" for ::1 at 2021-02-23 15:57:51 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-23 15:57:51.155682"], ["updated_at", "2021-02-23 15:57:51.155682"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:24:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 114)
Completed 201 Created in 16ms (Views: 0.8ms | ActiveRecord: 7.5ms | Allocations: 9950)


Started DELETE "/api/v1/lunches/1" for ::1 at 2021-02-23 15:57:55 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 2669)


Started DELETE "/api/v1/lunches/3" for ::1 at 2021-02-23 15:58:01 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:40:in `set_lunch'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[36mLunch Destroy (0.3ms)[0m  [1m[31mDELETE FROM "lunches" WHERE "lunches"."id" = $1[0m  [["id", 3]]
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:32:in `destroy'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 8.1ms | Allocations: 5590)


  
ArgumentError (Unrecognized status code :done):
  
app/controllers/api/v1/lunches_controller.rb:33:in `destroy'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 15:58:17 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 8.2ms | Allocations: 5474)
Completed 200 OK in 11ms (Views: 4.8ms | ActiveRecord: 3.9ms | Allocations: 7858)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 17:35:38 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 2937)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/api/v1/lunches_controller.rb:59:in `find_country'
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 17:36:16 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 3181)


  
NoMethodError (undefined method `merge' for #<String:0x000055727289f820>):
  
app/controllers/api/v1/lunches_controller.rb:59:in `find_country'
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 17:37:00 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (115.23ms)  GET https://api.yelp.com/v3/autocomplete?text=del&latitude=37.786882&longitude=-122.399972[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (302 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 8.4ms | Allocations: 5978)
Completed 200 OK in 374ms (Views: 5.2ms | ActiveRecord: 3.6ms | Excon: 115.2ms | Allocations: 21503)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:08:28 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (79.22ms)  GET https://api.yelp.com/v3/autocomplete?text=del&latitude=37.786882&longitude=-122.399972[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 5.3ms | Allocations: 5246)
Completed 200 OK in 272ms (Views: 5.2ms | ActiveRecord: 0.5ms | Excon: 79.2ms | Allocations: 13268)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:37:11 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (86.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories%22Restaurants%22[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.5ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 15.6ms | Allocations: 6081)
Completed 200 OK in 290ms (Views: 14.0ms | ActiveRecord: 3.5ms | Excon: 86.7ms | Allocations: 17906)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:39:41 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 4004)


  
NameError (uninitialized constant Api::V1::LunchesController::Arlon):
  
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:40:36 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 3993)


  
NameError (uninitialized constant Api::V1::LunchesController::Arlon):
  
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:40:48 +0000
Processing by Api::V1::LunchesController#index as JSON
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 3993)


  
NameError (uninitialized constant Api::V1::LunchesController::Arlon):
  
app/controllers/api/v1/lunches_controller.rb:7:in `index'
Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:41:51 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (95.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 9.8ms | Allocations: 5418)
Completed 200 OK in 330ms (Views: 8.1ms | ActiveRecord: 2.3ms | Excon: 96.0ms | Allocations: 13447)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:42:20 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (83.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 11.7ms | Allocations: 5377)
Completed 200 OK in 266ms (Views: 8.8ms | ActiveRecord: 3.7ms | Excon: 83.6ms | Allocations: 13397)


Started GET "/api/v1/lunches" for ::1 at 2021-02-23 18:43:50 +0000
Processing by Api::V1::LunchesController#index as JSON
  [1m[34mExcon Request[0m (105.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 10.7ms | Allocations: 5369)
Completed 200 OK in 299ms (Views: 8.3ms | ActiveRecord: 3.0ms | Excon: 106.0ms | Allocations: 13120)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:20:38 +0000
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (118.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:28:in `create'
  [1m[36mLunch Create (2.0ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{25,100}"], ["user_id", 1], ["created_at", "2021-02-24 10:21:08.848244"], ["updated_at", "2021-02-24 10:21:08.848244"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:28:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.8ms | Allocations: 228)
Completed 201 Created in 29919ms (Views: 4.0ms | ActiveRecord: 9.8ms | Excon: 118.7ms | Allocations: 165958)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:21:15 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (5116.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 253488ms (ActiveRecord: 7.0ms | Excon: 5116.2ms | Allocations: 945813)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:25:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:25:39 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[25, 100], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:27:02 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (76.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 4719ms (ActiveRecord: 5.7ms | Excon: 76.6ms | Allocations: 852607)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Completed 500 Internal Server Error in 123082ms (ActiveRecord: 2.3ms | Allocations: 2722067)


  
Errno::EIO (Input/output error @ io_writev - <STDOUT>):
  
app/controllers/api/v1/lunches_controller.rb:30:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:27:50 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (114.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=10000&price=3&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 228148ms (ActiveRecord: 6.6ms | Excon: 114.7ms | Allocations: 1061505)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:32:24 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :attendees[0m
[31mUnpermitted parameter: :attendees[0m
[31mUnpermitted parameter: :attendees[0m
[31mUnpermitted parameter: :attendees[0m
  [1m[34mExcon Request[0m (85.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
[31mUnpermitted parameter: :attendees[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:39:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 10:32:24.971302"], ["updated_at", "2021-02-24 10:32:24.971302"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:39:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:39:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 228)
Completed 201 Created in 331ms (Views: 4.2ms | ActiveRecord: 12.7ms | Excon: 85.4ms | Allocations: 28776)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:38:59 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (74.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
Completed 500 Internal Server Error in 295ms (ActiveRecord: 5.9ms | Excon: 74.5ms | Allocations: 24410)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:36:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:41:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (96.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:43:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 10:41:16.364304"], ["updated_at", "2021-02-24 10:41:16.364304"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:43:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:43:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 117)
Completed 201 Created in 294ms (Views: 1.0ms | ActiveRecord: 5.8ms | Excon: 96.4ms | Allocations: 24933)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 10:48:00 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[34mExcon Request[0m (87.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:44:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 10:48:01.177791"], ["updated_at", "2021-02-24 10:48:01.177791"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:44:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:44:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.4ms | Allocations: 151)
Completed 201 Created in 289ms (Views: 1.3ms | ActiveRecord: 2.3ms | Excon: 87.5ms | Allocations: 23639)


Started GET "/api/v1/lunches" for ::1 at 2021-02-24 10:48:11 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 2.0ms | Allocations: 1298)
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.2ms | Allocations: 1900)


  [1m[36mLunch Load (0.6ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  [1m[36mPreference Load (1.0ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:15:16 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 3.5ms | Allocations: 1522)
Completed 200 OK in 12ms (Views: 3.7ms | ActiveRecord: 1.0ms | Allocations: 5374)


Started GET "/api/v1/preferences/2" for ::1 at 2021-02-24 11:16:03 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"2", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
Completed 404 Not Found in 13ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 3302)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-24 11:16:08 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1101)


Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:16:18 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 1.3ms | Allocations: 711)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 1145)


Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:17:20 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "tastes"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :tastes[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (6.8ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Gaelle"], ["user_id", 1], ["created_at", "2021-02-24 11:17:20.928815"], ["updated_at", "2021-02-24 11:17:20.928815"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 2.8ms | Allocations: 2858)
Completed 500 Internal Server Error in 64ms (ActiveRecord: 10.0ms | Allocations: 19989)


  
ActionView::Template::Error (undefined method `taste' for #<Preference:0x000055822bd0b120>
Did you mean?  task):
    1: # frozen_string_literal: true
    2: 
    3: json.extract! @preference, :name, :taste
  
app/views/api/v1/preferences/show.json.jbuilder:3
app/controllers/api/v1/preferences_controller.rb:29:in `create'
Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:17:32 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :taste[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Gaelle"], ["user_id", 1], ["created_at", "2021-02-24 11:17:32.725612"], ["updated_at", "2021-02-24 11:17:32.725612"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 2.3ms | Allocations: 2499)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.4ms | Allocations: 6978)


  
ActionView::Template::Error (undefined method `taste' for #<Preference:0x000055822da74c20>
Did you mean?  task):
    1: # frozen_string_literal: true
    2: 
    3: json.extract! @preference, :name, :taste
  
app/views/api/v1/preferences/show.json.jbuilder:3
app/controllers/api/v1/preferences_controller.rb:29:in `create'
Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:21:17 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 50ms (ActiveRecord: 6.7ms | Allocations: 14486)


  
ActiveModel::UnknownAttributeError (unknown attribute 'taste' for Preference.):
  
app/controllers/api/v1/preferences_controller.rb:25:in `create'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (14.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (153.0ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (73.9ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-24 11:22:10.698453"], ["updated_at", "2021-02-24 11:22:10.698453"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$UX3MDttwBQoWxpXxJpoBxug6DrL8mcg5ZLQaIYQ5kSHuIIbE9/TvO"], ["created_at", "2021-02-24 11:22:10.983143"], ["updated_at", "2021-02-24 11:22:10.983143"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "RNQ-wxhupEsbGfPvCNwk"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$5py/H.PC3eZOVnSNMKa7k.IBVWXI0s1gLNRJO1MXjRaEPtVQCJQ4a"], ["created_at", "2021-02-24 11:22:11.163011"], ["updated_at", "2021-02-24 11:22:11.163011"], ["authentication_token", "RNQ-wxhupEsbGfPvCNwk"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "2wbUzhFBBn-iTJSpTXBY"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$.16jSn8eCLVLYlThZjXeNe4LgtdTn12USFR6mv1bRn1ePVFuCzgie"], ["created_at", "2021-02-24 11:22:11.344034"], ["updated_at", "2021-02-24 11:22:11.344034"], ["authentication_token", "2wbUzhFBBn-iTJSpTXBY"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "bGNT2q5LiLqRnwU_xxJa"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$ZGXws9.R0a3B/BQ.zQZose2xNMzLXljwMCiMbCGA0K3qPHzSN71fe"], ["created_at", "2021-02-24 11:22:11.524005"], ["updated_at", "2021-02-24 11:22:11.524005"], ["authentication_token", "bGNT2q5LiLqRnwU_xxJa"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:22:21 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.8ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gaelle"], ["taste", "{Japanese,Lebanese}"], ["user_id", 1], ["created_at", "2021-02-24 11:22:21.633826"], ["updated_at", "2021-02-24 11:22:21.633826"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.3ms | Allocations: 250)
Completed 201 Created in 56ms (Views: 2.3ms | ActiveRecord: 6.0ms | Allocations: 19568)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-24 11:22:29 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.3ms | Allocations: 139)
Completed 200 OK in 6ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 2064)


Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:22:32 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 13.2ms | Allocations: 861)
Completed 200 OK in 15ms (Views: 13.3ms | ActiveRecord: 0.2ms | Allocations: 1439)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (24.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (73.7ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (70.8ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-24 11:25:30.528902"], ["updated_at", "2021-02-24 11:25:30.528902"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$zp5vymkrj5i3PhH3Li7Vb.LzrkuwFZfGYAK2jkR123y6QNBaEuTJ6"], ["created_at", "2021-02-24 11:25:30.766505"], ["updated_at", "2021-02-24 11:25:30.766505"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "12V8WuMPpFTas3ZYtmzF"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$xwrFrRltCzgQCEDaFBTau.ft3pCk8CBDy6JlcFgo3z3IgQzh8DNQ."], ["created_at", "2021-02-24 11:25:30.949956"], ["updated_at", "2021-02-24 11:25:30.949956"], ["authentication_token", "12V8WuMPpFTas3ZYtmzF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "P-zbdx6CukQmKeBPD1QL"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$GP.5Qnq.Tl81m6KmRgGj8uMMYA3xJrXnXu2hAAT.dbKB3zQrIjqlW"], ["created_at", "2021-02-24 11:25:31.132117"], ["updated_at", "2021-02-24 11:25:31.132117"], ["authentication_token", "P-zbdx6CukQmKeBPD1QL"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "LVYLNsYKBMcA23fvg5mA"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$CeKtXzWZXQezF1Cjgp1MX.LbzjJeIDULSAZ8ZPd19iLM2Vqb0P67K"], ["created_at", "2021-02-24 11:25:31.314917"], ["updated_at", "2021-02-24 11:25:31.314917"], ["authentication_token", "LVYLNsYKBMcA23fvg5mA"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-24 11:25:31.326204"], ["updated_at", "2021-02-24 11:25:31.326204"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:31.329889"], ["updated_at", "2021-02-24 11:25:31.329889"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:31.333342"], ["updated_at", "2021-02-24 11:25:31.333342"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (23.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (66.6ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (69.4ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-24 11:25:52.421397"], ["updated_at", "2021-02-24 11:25:52.421397"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$9eyp1Ez.tSZ9FOccOHYpEelGlKbd4I9UvezUejWcAlhhJEB72m3ja"], ["created_at", "2021-02-24 11:25:52.700484"], ["updated_at", "2021-02-24 11:25:52.700484"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "adp5MzszBCMxZ8f5J5Ko"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$r8bcECvQamQDP5DB0LwG4eN0VvZ.yKcCMY3.aql86TCz1tJXqxxuC"], ["created_at", "2021-02-24 11:25:52.880826"], ["updated_at", "2021-02-24 11:25:52.880826"], ["authentication_token", "adp5MzszBCMxZ8f5J5Ko"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "DebMfTQpfswE4pyhHuBF"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$9.Lei7jGCsJyz.8GN0GE4eCRMqLTn/5adKI9czcknpassOPfDM2ui"], ["created_at", "2021-02-24 11:25:53.062201"], ["updated_at", "2021-02-24 11:25:53.062201"], ["authentication_token", "DebMfTQpfswE4pyhHuBF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "U9QeEAVdy2-hsyZ7Hvk8"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$KjOAnAvlzVsloFqJ8luSzupdiEqueffVFSb1o3.nRWr.uTicsYCv2"], ["created_at", "2021-02-24 11:25:53.244794"], ["updated_at", "2021-02-24 11:25:53.244794"], ["authentication_token", "U9QeEAVdy2-hsyZ7Hvk8"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-24 11:25:53.256437"], ["updated_at", "2021-02-24 11:25:53.256437"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:53.260478"], ["updated_at", "2021-02-24 11:25:53.260478"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-24 11:25:53.264330"], ["updated_at", "2021-02-24 11:25:53.264330"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Create (0.1ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-24 11:25:53.267917"], ["updated_at", "2021-02-24 11:25:53.267917"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:29:19 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.5ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 18.1ms | Allocations: 5657)
Completed 200 OK in 34ms (Views: 15.9ms | ActiveRecord: 4.0ms | Allocations: 9509)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-24 11:29:26 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.3ms | Allocations: 152)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 1832)


Started POST "/api/v1/preferences" for ::1 at 2021-02-24 11:29:33 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Gaelle", "taste"=>["Japanese", "Lebanese"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.8ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gaelle"], ["taste", "{Japanese,Lebanese}"], ["user_id", 1], ["created_at", "2021-02-24 11:29:33.790115"], ["updated_at", "2021-02-24 11:29:33.790115"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 66)
Completed 201 Created in 39ms (Views: 0.4ms | ActiveRecord: 9.3ms | Allocations: 13338)


Started GET "/api/v1/preferences" for ::1 at 2021-02-24 11:29:36 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 1.5ms | Allocations: 1084)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 1519)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:02:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:92:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:92:in `matching_preferences'
  [1m[34mExcon Request[0m (109.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants,%20french[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 12:03:33.512536"], ["updated_at", "2021-02-24 12:03:33.512536"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.4ms | Allocations: 152)
Completed 201 Created in 64451ms (Views: 1.3ms | ActiveRecord: 12.1ms | Excon: 109.9ms | Allocations: 424284)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:03:37 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.5ms | Allocations: 17127)


  
NoMethodError (undefined method `[]=' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:106:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:04:09 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 5.6ms | Allocations: 17079)


  
NoMethodError (undefined method `[]=' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:106:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:04:57 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:93:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:06:52 +0000
  [1m[34mExcon Request[0m (77.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=Restaurants,%20french[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 12:06:56.738993"], ["updated_at", "2021-02-24 12:06:56.738993"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 271)
Completed 201 Created in 119267ms (Views: 2.6ms | ActiveRecord: 16.9ms | Excon: 77.7ms | Allocations: 2252289)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[2, 3], "attendees"=>["Pierre", "Gilles"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[34mExcon Request[0m (77.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=[2,%203]&categories=[%22Italian%22,%202][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{2,3}"], ["user_id", 1], ["created_at", "2021-02-24 12:06:57.098954"], ["updated_at", "2021-02-24 12:06:57.098954"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 91)
Completed 201 Created in 291ms (Views: 0.8ms | ActiveRecord: 9.4ms | Excon: 77.3ms | Allocations: 30689)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 12:09:25 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:94:in `matching_preferences'
  [1m[34mExcon Request[0m (99.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 12:09:25.473555"], ["updated_at", "2021-02-24 12:09:25.473555"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.1ms | Allocations: 84)
Completed 201 Created in 310ms (Views: 0.6ms | ActiveRecord: 13.0ms | Excon: 99.6ms | Allocations: 31477)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.1ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:52:37 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (5125.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:52:43.141881"], ["updated_at", "2021-02-24 13:52:43.141881"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 264)
Completed 201 Created in 5378ms (Views: 2.1ms | ActiveRecord: 18.0ms | Excon: 5125.9ms | Allocations: 37180)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:53:00 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
Completed 500 Internal Server Error in 168ms (ActiveRecord: 4.5ms | Allocations: 132409)


  
NameError (undefined local variable or method `empty_request' for #<Api::V1::LunchesController:0x000055a417ca7e00>
Did you mean?  set_request!):
  
app/controllers/api/v1/lunches_controller.rb:89:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:32:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:53:23 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:122:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:122:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:122:in `matching_preferences'
  [1m[34mExcon Request[0m (80.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:53:23.427552"], ["updated_at", "2021-02-24 13:53:23.427552"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 297ms (ActiveRecord: 8.6ms | Excon: 80.3ms | Allocations: 31211)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:89:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:54:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (98.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:54:21.576075"], ["updated_at", "2021-02-24 13:54:21.576075"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 85819ms (ActiveRecord: 9.8ms | Excon: 98.0ms | Allocations: 408403)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:55:53 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (128.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:55:54.092607"], ["updated_at", "2021-02-24 13:55:54.092607"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 43735ms (ActiveRecord: 17.0ms | Excon: 128.6ms | Allocations: 524596)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:56:41 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (73.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (187 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:56:41.655948"], ["updated_at", "2021-02-24 13:56:41.655948"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
Completed 500 Internal Server Error in 84980ms (ActiveRecord: 8.7ms | Excon: 73.1ms | Allocations: 1825168)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:58:12 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (79.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=[%22Italian%22,%203][0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.8ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 13:58:54.626373"], ["updated_at", "2021-02-24 13:58:54.626373"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.647927"], ["updated_at", "2021-02-24 13:58:54.647927"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.654736"], ["updated_at", "2021-02-24 13:58:54.654736"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.661127"], ["updated_at", "2021-02-24 13:58:54.661127"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.667630"], ["updated_at", "2021-02-24 13:58:54.667630"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.673964"], ["updated_at", "2021-02-24 13:58:54.673964"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.680267"], ["updated_at", "2021-02-24 13:58:54.680267"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.686687"], ["updated_at", "2021-02-24 13:58:54.686687"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.692938"], ["updated_at", "2021-02-24 13:58:54.692938"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.699211"], ["updated_at", "2021-02-24 13:58:54.699211"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 10], ["created_at", "2021-02-24 13:58:54.705472"], ["updated_at", "2021-02-24 13:58:54.705472"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 11.7ms | Allocations: 262)
Completed 500 Internal Server Error in 42209ms (Views: 14.1ms | ActiveRecord: 29.2ms | Excon: 79.1ms | Allocations: 226984)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 13:59:23 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (106.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.21ms)  [1m200 OK (9.63 KB)[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:04:01 +0000
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:04:07.419017"], ["updated_at", "2021-02-24 14:04:07.419017"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.438946"], ["updated_at", "2021-02-24 14:04:07.438946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.442849"], ["updated_at", "2021-02-24 14:04:07.442849"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.446889"], ["updated_at", "2021-02-24 14:04:07.446889"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.452535"], ["updated_at", "2021-02-24 14:04:07.452535"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.458061"], ["updated_at", "2021-02-24 14:04:07.458061"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.463974"], ["updated_at", "2021-02-24 14:04:07.463974"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.469494"], ["updated_at", "2021-02-24 14:04:07.469494"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.474781"], ["updated_at", "2021-02-24 14:04:07.474781"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.480135"], ["updated_at", "2021-02-24 14:04:07.480135"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["lunch_id", 11], ["created_at", "2021-02-24 14:04:07.485578"], ["updated_at", "2021-02-24 14:04:07.485578"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.6ms | Allocations: 262)
Completed 500 Internal Server Error in 283910ms (Views: 2.6ms | ActiveRecord: 30.0ms | Excon: 106.8ms | Allocations: 4371114)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (76.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:04:08.485567"], ["updated_at", "2021-02-24 14:04:08.485567"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.505703"], ["updated_at", "2021-02-24 14:04:08.505703"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.511738"], ["updated_at", "2021-02-24 14:04:08.511738"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.517773"], ["updated_at", "2021-02-24 14:04:08.517773"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.523668"], ["updated_at", "2021-02-24 14:04:08.523668"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.529529"], ["updated_at", "2021-02-24 14:04:08.529529"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.535821"], ["updated_at", "2021-02-24 14:04:08.535821"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.541778"], ["updated_at", "2021-02-24 14:04:08.541778"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.547503"], ["updated_at", "2021-02-24 14:04:08.547503"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.551540"], ["updated_at", "2021-02-24 14:04:08.551540"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 12], ["created_at", "2021-02-24 14:04:08.554869"], ["updated_at", "2021-02-24 14:04:08.554869"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.1ms | Allocations: 84)
Completed 500 Internal Server Error in 899ms (Views: 0.5ms | ActiveRecord: 24.3ms | Excon: 76.8ms | Allocations: 78428)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:04:41 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (81.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:04:42.359341"], ["updated_at", "2021-02-24 14:04:42.359341"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.379885"], ["updated_at", "2021-02-24 14:04:42.379885"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.400426"], ["updated_at", "2021-02-24 14:04:42.400426"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.406442"], ["updated_at", "2021-02-24 14:04:42.406442"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.412295"], ["updated_at", "2021-02-24 14:04:42.412295"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.418209"], ["updated_at", "2021-02-24 14:04:42.418209"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.424212"], ["updated_at", "2021-02-24 14:04:42.424212"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.430174"], ["updated_at", "2021-02-24 14:04:42.430174"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.436003"], ["updated_at", "2021-02-24 14:04:42.436003"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.441802"], ["updated_at", "2021-02-24 14:04:42.441802"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 13], ["created_at", "2021-02-24 14:04:42.447618"], ["updated_at", "2021-02-24 14:04:42.447618"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.2ms | Allocations: 84)
Completed 201 Created in 698ms (Views: 1.0ms | ActiveRecord: 25.0ms | Excon: 81.3ms | Allocations: 77296)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:09:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (5084.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:10:03.368795"], ["updated_at", "2021-02-24 14:10:03.368795"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.376727"], ["updated_at", "2021-02-24 14:10:03.376727"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.383049"], ["updated_at", "2021-02-24 14:10:03.383049"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.389291"], ["updated_at", "2021-02-24 14:10:03.389291"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.395665"], ["updated_at", "2021-02-24 14:10:03.395665"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.400432"], ["updated_at", "2021-02-24 14:10:03.400432"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.404898"], ["updated_at", "2021-02-24 14:10:03.404898"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.410920"], ["updated_at", "2021-02-24 14:10:03.410920"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.417191"], ["updated_at", "2021-02-24 14:10:03.417191"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.423309"], ["updated_at", "2021-02-24 14:10:03.423309"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 14], ["created_at", "2021-02-24 14:10:03.429360"], ["updated_at", "2021-02-24 14:10:03.429360"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1319)
Completed 500 Internal Server Error in 5634ms (ActiveRecord: 14.7ms | Excon: 5084.0ms | Allocations: 55431)


  
ActionView::Template::Error (undefined method `restaurants' for nil:NilClass):
    1: # json.cache! ['finders'], expires_in: 1.minutes do |json|
    2:   json.extract! @lunch, :id, :localisation, :distance, :price
    3: 
    4:   json.restaurants @finder.restaurants do |restaurant|
    5:     json.extract! restaurant, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
    6:   end
    7: # end
  
app/views/api/v1/lunches/show.json.jbuilder:4
app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:10:35 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (98.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:10:36.163721"], ["updated_at", "2021-02-24 14:10:36.163721"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.175937"], ["updated_at", "2021-02-24 14:10:36.175937"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.182002"], ["updated_at", "2021-02-24 14:10:36.182002"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.186579"], ["updated_at", "2021-02-24 14:10:36.186579"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.189992"], ["updated_at", "2021-02-24 14:10:36.189992"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.193560"], ["updated_at", "2021-02-24 14:10:36.193560"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.203629"], ["updated_at", "2021-02-24 14:10:36.203629"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.207217"], ["updated_at", "2021-02-24 14:10:36.207217"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.210968"], ["updated_at", "2021-02-24 14:10:36.210968"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.214372"], ["updated_at", "2021-02-24 14:10:36.214372"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 15], ["created_at", "2021-02-24 14:10:36.217870"], ["updated_at", "2021-02-24 14:10:36.217870"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 9.6ms | Allocations: 6585)
Completed 201 Created in 623ms (Views: 9.9ms | ActiveRecord: 19.9ms | Excon: 98.1ms | Allocations: 61181)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:11:13 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (5090.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:11:34.990196"], ["updated_at", "2021-02-24 14:11:34.990196"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.012655"], ["updated_at", "2021-02-24 14:11:35.012655"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.018972"], ["updated_at", "2021-02-24 14:11:35.018972"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.024355"], ["updated_at", "2021-02-24 14:11:35.024355"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.029702"], ["updated_at", "2021-02-24 14:11:35.029702"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.035285"], ["updated_at", "2021-02-24 14:11:35.035285"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.042007"], ["updated_at", "2021-02-24 14:11:35.042007"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.046358"], ["updated_at", "2021-02-24 14:11:35.046358"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.050756"], ["updated_at", "2021-02-24 14:11:35.050756"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.053945"], ["updated_at", "2021-02-24 14:11:35.053945"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 16], ["created_at", "2021-02-24 14:11:35.057297"], ["updated_at", "2021-02-24 14:11:35.057297"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 2526)
Completed 201 Created in 21774ms (Views: 2.1ms | ActiveRecord: 23.3ms | Excon: 5090.1ms | Allocations: 236000)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:11:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (71.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:11:46.991130"], ["updated_at", "2021-02-24 14:11:46.991130"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.018356"], ["updated_at", "2021-02-24 14:11:47.018356"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.024290"], ["updated_at", "2021-02-24 14:11:47.024290"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.030487"], ["updated_at", "2021-02-24 14:11:47.030487"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Greek"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.036779"], ["updated_at", "2021-02-24 14:11:47.036779"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.043809"], ["updated_at", "2021-02-24 14:11:47.043809"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Irish Pub"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.049557"], ["updated_at", "2021-02-24 14:11:47.049557"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.055308"], ["updated_at", "2021-02-24 14:11:47.055308"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.060944"], ["updated_at", "2021-02-24 14:11:47.060944"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Chinese"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.066523"], ["updated_at", "2021-02-24 14:11:47.066523"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Bars"], ["lunch_id", 17], ["created_at", "2021-02-24 14:11:47.071483"], ["updated_at", "2021-02-24 14:11:47.071483"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.2ms | Allocations: 2527)
Completed 201 Created in 590ms (Views: 2.4ms | ActiveRecord: 30.1ms | Excon: 72.0ms | Allocations: 79459)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:12:14 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (67.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 14:13:40 +0000
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:13:48.371250"], ["updated_at", "2021-02-24 14:13:48.371250"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.396900"], ["updated_at", "2021-02-24 14:13:48.396900"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_category", "Belgian"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.403216"], ["updated_at", "2021-02-24 14:13:48.403216"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.409110"], ["updated_at", "2021-02-24 14:13:48.409110"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_category", "Greek"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.415095"], ["updated_at", "2021-02-24 14:13:48.415095"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.421134"], ["updated_at", "2021-02-24 14:13:48.421134"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_category", "Irish Pub"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.426889"], ["updated_at", "2021-02-24 14:13:48.426889"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_category", "Restaurants"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.433169"], ["updated_at", "2021-02-24 14:13:48.433169"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_category", "Bakeries"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.439203"], ["updated_at", "2021-02-24 14:13:48.439203"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_category", "Chinese"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.445184"], ["updated_at", "2021-02-24 14:13:48.445184"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_category", "Bars"], ["lunch_id", 18], ["created_at", "2021-02-24 14:13:48.451020"], ["updated_at", "2021-02-24 14:13:48.451020"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 2529)
Completed 201 Created in 93814ms (Views: 3.6ms | ActiveRecord: 31.9ms | Excon: 67.8ms | Allocations: 872604)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (98.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 14:13:49.207670"], ["updated_at", "2021-02-24 14:13:49.207670"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:56:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.232017"], ["updated_at", "2021-02-24 14:13:49.232017"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.237842"], ["updated_at", "2021-02-24 14:13:49.237842"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.243441"], ["updated_at", "2021-02-24 14:13:49.243441"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.248946"], ["updated_at", "2021-02-24 14:13:49.248946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.254383"], ["updated_at", "2021-02-24 14:13:49.254383"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.260196"], ["updated_at", "2021-02-24 14:13:49.260196"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.265810"], ["updated_at", "2021-02-24 14:13:49.265810"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.271530"], ["updated_at", "2021-02-24 14:13:49.271530"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.277063"], ["updated_at", "2021-02-24 14:13:49.277063"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 19], ["created_at", "2021-02-24 14:13:49.282736"], ["updated_at", "2021-02-24 14:13:49.282736"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2596)
Completed 201 Created in 772ms (Views: 3.8ms | ActiveRecord: 30.7ms | Excon: 98.6ms | Allocations: 80943)


Started POST "/api/v1/sign_up" for ::1 at 2021-02-24 14:31:51 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"4444@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "registration"=>{"user"=>{"email"=>"4444@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "4444@example.com"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "CW3ANozHyzjCFExyHsnA"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "4444@example.com"], ["encrypted_password", "$2a$12$ZM.WJ6Zw4CTT6LiaQsDxzO8oBt3o7pQwXk.5PAf1SltREp4n1z6nC"], ["created_at", "2021-02-24 14:31:51.515829"], ["updated_at", "2021-02-24 14:31:51.515829"], ["authentication_token", "CW3ANozHyzjCFExyHsnA"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
Completed 200 OK in 222ms (Views: 0.7ms | ActiveRecord: 5.4ms | Allocations: 13210)


Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:32:00 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 676)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:32:33 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 509)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:34:00 +0000
Processing by Api::V1::SessionsController#create as JSON
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 504)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:41:11 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 601)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:41:26 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 508)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:42:10 +0000
Processing by Api::V1::SessionsController#create as JSON
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 504)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:42:26 +0000
Processing by Api::V1::SessionsController#create as JSON
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 504)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:42:54 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 520)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 14:44:07 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"pierre@pierre.pierre", "password"=>"[FILTERED]"}}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 622)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/v1/sign_up" for ::1 at 2021-02-24 15:17:26 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "registration"=>{"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaaaaa@example.com"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "6qN63HFPDzCDWPdG379_"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "aaaaaa@example.com"], ["encrypted_password", "$2a$12$eyQ2rOG1sO0Ifv2D/J6VfOiMaUlKPsL3cQbo4Nsq3YwWmJRlY9thy"], ["created_at", "2021-02-24 15:17:26.406320"], ["updated_at", "2021-02-24 15:17:26.406320"], ["authentication_token", "6qN63HFPDzCDWPdG379_"]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
Completed 200 OK in 203ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 13211)


Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 15:17:30 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 611)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 15:17:58 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"session"=>{}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 509)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/sign_in" for ::1 at 2021-02-24 15:18:25 +0000
Processing by Api::V1::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]"}}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 520)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:215:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:247:in `handle_unverified_request'
devise (4.7.3) lib/devise/controllers/helpers.rb:255:in `handle_unverified_request'
actionpack (6.0.3.5) lib/action_controller/metal/request_forgery_protection.rb:242:in `verify_authenticity_token'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (6.0.3.5) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:19:38 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[34mExcon Request[0m (111.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2}"], ["user_id", 1], ["created_at", "2021-02-24 15:19:38.827844"], ["updated_at", "2021-02-24 15:19:38.827844"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.847107"], ["updated_at", "2021-02-24 15:19:38.847107"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.852524"], ["updated_at", "2021-02-24 15:19:38.852524"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.858171"], ["updated_at", "2021-02-24 15:19:38.858171"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.864745"], ["updated_at", "2021-02-24 15:19:38.864745"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.878938"], ["updated_at", "2021-02-24 15:19:38.878938"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.890993"], ["updated_at", "2021-02-24 15:19:38.890993"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.902827"], ["updated_at", "2021-02-24 15:19:38.902827"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.913177"], ["updated_at", "2021-02-24 15:19:38.913177"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.920056"], ["updated_at", "2021-02-24 15:19:38.920056"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 20], ["created_at", "2021-02-24 15:19:38.928347"], ["updated_at", "2021-02-24 15:19:38.928347"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 6.8ms | Allocations: 3470)
Completed 201 Created in 888ms (Views: 9.1ms | ActiveRecord: 32.2ms | Excon: 111.1ms | Allocations: 86749)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:19:52 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 5], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[34mExcon Request[0m (111.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,5}"], ["user_id", 1], ["created_at", "2021-02-24 15:19:52.949104"], ["updated_at", "2021-02-24 15:19:52.949104"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.963968"], ["updated_at", "2021-02-24 15:19:52.963968"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.970010"], ["updated_at", "2021-02-24 15:19:52.970010"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.975765"], ["updated_at", "2021-02-24 15:19:52.975765"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.981505"], ["updated_at", "2021-02-24 15:19:52.981505"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.987317"], ["updated_at", "2021-02-24 15:19:52.987317"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.992883"], ["updated_at", "2021-02-24 15:19:52.992883"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:52.998302"], ["updated_at", "2021-02-24 15:19:52.998302"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:53.003803"], ["updated_at", "2021-02-24 15:19:53.003803"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:53.010578"], ["updated_at", "2021-02-24 15:19:53.010578"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 21], ["created_at", "2021-02-24 15:19:53.015289"], ["updated_at", "2021-02-24 15:19:53.015289"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1975)
Completed 201 Created in 673ms (Views: 2.9ms | ActiveRecord: 20.9ms | Excon: 111.5ms | Allocations: 58371)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:34:45 +0000
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 5], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:117:in `matching_preferences'
  [1m[34mExcon Request[0m (80.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=3[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (9.63 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,5}"], ["user_id", 1], ["created_at", "2021-02-24 15:41:56.355694"], ["updated_at", "2021-02-24 15:41:56.355694"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:48:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.375055"], ["updated_at", "2021-02-24 15:41:56.375055"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.381123"], ["updated_at", "2021-02-24 15:41:56.381123"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.386653"], ["updated_at", "2021-02-24 15:41:56.386653"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.396128"], ["updated_at", "2021-02-24 15:41:56.396128"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.411015"], ["updated_at", "2021-02-24 15:41:56.411015"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.423784"], ["updated_at", "2021-02-24 15:41:56.423784"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Kalinka"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.435017"], ["updated_at", "2021-02-24 15:41:56.435017"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Evrard/Claude"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.444298"], ["updated_at", "2021-02-24 15:41:56.444298"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Corne d'Abondance"], ["restaurant_price", "€€"], ["restaurant_city", "Athus"], ["restaurant_category", "Chinese"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.450236"], ["updated_at", "2021-02-24 15:41:56.450236"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Marmite Ukrainienne"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bars"], ["lunch_id", 22], ["created_at", "2021-02-24 15:41:56.458563"], ["updated_at", "2021-02-24 15:41:56.458563"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:100:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 13.7ms | Allocations: 3479)
Completed 201 Created in 430896ms (Views: 16.0ms | ActiveRecord: 26.8ms | Excon: 80.7ms | Allocations: 2385931)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:41:58 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 5], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:42:17 +0000
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (89.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4,5&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (122 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,5}"], ["user_id", 1], ["created_at", "2021-02-24 15:42:21.177533"], ["updated_at", "2021-02-24 15:42:21.177533"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 22436ms (ActiveRecord: 16.6ms | Excon: 89.8ms | Allocations: 201267)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (73.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m500 Internal Server Error (112 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:42:36.617120"], ["updated_at", "2021-02-24 15:42:36.617120"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 15250ms (ActiveRecord: 16.0ms | Excon: 73.1ms | Allocations: 60517)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:44:53 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (89.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=3[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:45:58.944452"], ["updated_at", "2021-02-24 15:45:58.944452"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Japanese"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.969163"], ["updated_at", "2021-02-24 15:45:58.969163"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.974816"], ["updated_at", "2021-02-24 15:45:58.974816"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Italian"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.980107"], ["updated_at", "2021-02-24 15:45:58.980107"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Hotels"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.993653"], ["updated_at", "2021-02-24 15:45:58.993653"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:58.999668"], ["updated_at", "2021-02-24 15:45:58.999668"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.005326"], ["updated_at", "2021-02-24 15:45:59.005326"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.010686"], ["updated_at", "2021-02-24 15:45:59.010686"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.016039"], ["updated_at", "2021-02-24 15:45:59.016039"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.021681"], ["updated_at", "2021-02-24 15:45:59.021681"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 25], ["created_at", "2021-02-24 15:45:59.027085"], ["updated_at", "2021-02-24 15:45:59.027085"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2681)
Completed 201 Created in 65100ms (Views: 4.1ms | ActiveRecord: 30.0ms | Excon: 89.3ms | Allocations: 437410)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:46:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:47:39 +0000
  [1m[34mExcon Request[0m (94.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=Italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:47:48.279593"], ["updated_at", "2021-02-24 15:47:48.279593"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Japanese"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.297423"], ["updated_at", "2021-02-24 15:47:48.297423"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.300855"], ["updated_at", "2021-02-24 15:47:48.300855"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Italian"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.303985"], ["updated_at", "2021-02-24 15:47:48.303985"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.0ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Hotels"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.307014"], ["updated_at", "2021-02-24 15:47:48.307014"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.310129"], ["updated_at", "2021-02-24 15:47:48.310129"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.0ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Belgian"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.313201"], ["updated_at", "2021-02-24 15:47:48.313201"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Restaurants"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.316247"], ["updated_at", "2021-02-24 15:47:48.316247"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Greek"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.319326"], ["updated_at", "2021-02-24 15:47:48.319326"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Bakeries"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.323892"], ["updated_at", "2021-02-24 15:47:48.323892"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "Irish Pub"], ["lunch_id", 26], ["created_at", "2021-02-24 15:47:48.329388"], ["updated_at", "2021-02-24 15:47:48.329388"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 2607)
Completed 201 Created in 104986ms (Views: 3.1ms | ActiveRecord: 27.0ms | Excon: 94.2ms | Allocations: 749624)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (80.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=Italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:47:48.994007"], ["updated_at", "2021-02-24 15:47:48.994007"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.026480"], ["updated_at", "2021-02-24 15:47:49.026480"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.032787"], ["updated_at", "2021-02-24 15:47:49.032787"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.038567"], ["updated_at", "2021-02-24 15:47:49.038567"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.044380"], ["updated_at", "2021-02-24 15:47:49.044380"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.050840"], ["updated_at", "2021-02-24 15:47:49.050840"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.057096"], ["updated_at", "2021-02-24 15:47:49.057096"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.062822"], ["updated_at", "2021-02-24 15:47:49.062822"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.069356"], ["updated_at", "2021-02-24 15:47:49.069356"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.075689"], ["updated_at", "2021-02-24 15:47:49.075689"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 27], ["created_at", "2021-02-24 15:47:49.081502"], ["updated_at", "2021-02-24 15:47:49.081502"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.7ms | Allocations: 2604)
Completed 201 Created in 720ms (Views: 4.1ms | ActiveRecord: 21.7ms | Excon: 80.1ms | Allocations: 82597)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:49:14 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:49:41 +0000
  [1m[34mExcon Request[0m (85.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=Italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:02.033939"], ["updated_at", "2021-02-24 15:51:02.033939"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.054156"], ["updated_at", "2021-02-24 15:51:02.054156"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.060685"], ["updated_at", "2021-02-24 15:51:02.060685"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.066927"], ["updated_at", "2021-02-24 15:51:02.066927"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.081842"], ["updated_at", "2021-02-24 15:51:02.081842"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.087371"], ["updated_at", "2021-02-24 15:51:02.087371"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.093411"], ["updated_at", "2021-02-24 15:51:02.093411"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.098388"], ["updated_at", "2021-02-24 15:51:02.098388"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.103179"], ["updated_at", "2021-02-24 15:51:02.103179"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.108266"], ["updated_at", "2021-02-24 15:51:02.108266"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 28], ["created_at", "2021-02-24 15:51:02.112306"], ["updated_at", "2021-02-24 15:51:02.112306"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.9ms | Allocations: 2608)
Completed 201 Created in 107305ms (Views: 2.1ms | ActiveRecord: 23.3ms | Excon: 85.8ms | Allocations: 822168)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (64.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:02.962848"], ["updated_at", "2021-02-24 15:51:02.962848"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-24 15:51:02.987397"], ["updated_at", "2021-02-24 15:51:02.987397"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-24 15:51:02.993561"], ["updated_at", "2021-02-24 15:51:02.993561"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (1.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 16.6ms | Allocations: 1860)
Completed 201 Created in 835ms (Views: 15.8ms | ActiveRecord: 21.7ms | Excon: 64.2ms | Allocations: 48484)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[2, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (73.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (949 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{2,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:16.302752"], ["updated_at", "2021-02-24 15:51:16.302752"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-24 15:51:16.316304"], ["updated_at", "2021-02-24 15:51:16.316304"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.0ms | Allocations: 1060)
Completed 201 Created in 742ms (Views: 1.1ms | ActiveRecord: 9.6ms | Excon: 73.7ms | Allocations: 19312)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (82.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (949 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:21.751917"], ["updated_at", "2021-02-24 15:51:21.751917"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-24 15:51:21.765771"], ["updated_at", "2021-02-24 15:51:21.765771"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1060)
Completed 201 Created in 516ms (Views: 2.0ms | ActiveRecord: 9.5ms | Excon: 82.8ms | Allocations: 19283)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[8, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (66.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4,5,6,7,8&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (144 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{8,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:29.274435"], ["updated_at", "2021-02-24 15:51:29.274435"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 262ms (ActiveRecord: 7.9ms | Excon: 66.2ms | Allocations: 13947)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 2], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (91.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,2}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:44.198085"], ["updated_at", "2021-02-24 15:51:44.198085"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-24 15:51:44.204959"], ["updated_at", "2021-02-24 15:51:44.204959"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-24 15:51:44.211156"], ["updated_at", "2021-02-24 15:51:44.211156"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 1153)
Completed 201 Created in 507ms (Views: 2.1ms | ActiveRecord: 4.8ms | Excon: 91.6ms | Allocations: 23321)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (191.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:50.636142"], ["updated_at", "2021-02-24 15:51:50.636142"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 404 Not Found in 539ms (Views: 0.1ms | ActiveRecord: 7.8ms | Excon: 191.0ms | Allocations: 14329)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:51:56 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 8], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (90.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=4,5,6,7,8&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (132 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,8}"], ["user_id", 1], ["created_at", "2021-02-24 15:51:57.038500"], ["updated_at", "2021-02-24 15:51:57.038500"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 272ms (ActiveRecord: 7.7ms | Excon: 90.3ms | Allocations: 13981)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[4, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (83.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:03.591659"], ["updated_at", "2021-02-24 15:52:03.591659"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 404 Not Found in 444ms (Views: 0.1ms | ActiveRecord: 2.1ms | Excon: 83.1ms | Allocations: 14040)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:08 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>40000, "price"=>[4, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (68.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=40000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "40000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:09.132122"], ["updated_at", "2021-02-24 15:52:09.132122"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 404 Not Found in 420ms (Views: 0.1ms | ActiveRecord: 8.1ms | Excon: 68.3ms | Allocations: 14043)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>40000, "price"=>[0, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (84.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=40000&price=0,1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (132 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "40000"], ["price", "{0,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:15.286962"], ["updated_at", "2021-02-24 15:52:15.286962"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 268ms (ActiveRecord: 1.9ms | Excon: 84.6ms | Allocations: 13686)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>40000, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (87.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=40000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m500 Internal Server Error (112 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "40000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:21.609437"], ["updated_at", "2021-02-24 15:52:21.609437"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 1795ms (ActiveRecord: 8.0ms | Excon: 87.9ms | Allocations: 13995)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:26 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (97.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:27.467427"], ["updated_at", "2021-02-24 15:52:27.467427"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-24 15:52:27.475726"], ["updated_at", "2021-02-24 15:52:27.475726"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-24 15:52:27.482218"], ["updated_at", "2021-02-24 15:52:27.482218"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.0ms | Allocations: 1153)
Completed 201 Created in 565ms (Views: 2.3ms | ActiveRecord: 6.0ms | Excon: 97.2ms | Allocations: 23299)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:31 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[0, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (70.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=0,1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (132 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{0,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:32.211574"], ["updated_at", "2021-02-24 15:52:32.211574"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
Completed 500 Internal Server Error in 260ms (ActiveRecord: 1.8ms | Excon: 70.7ms | Allocations: 13967)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:56:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:52:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (74.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:52:36.523516"], ["updated_at", "2021-02-24 15:52:36.523516"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-24 15:52:36.535497"], ["updated_at", "2021-02-24 15:52:36.535497"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-24 15:52:36.540345"], ["updated_at", "2021-02-24 15:52:36.540345"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.4ms | Allocations: 1153)
Completed 201 Created in 491ms (Views: 1.6ms | ActiveRecord: 10.9ms | Excon: 74.2ms | Allocations: 23339)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:55:18 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (83.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:55:18.726298"], ["updated_at", "2021-02-24 15:55:18.726298"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-24 15:55:18.751624"], ["updated_at", "2021-02-24 15:55:18.751624"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-24 15:55:18.757791"], ["updated_at", "2021-02-24 15:55:18.757791"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.0ms | Allocations: 1858)
Completed 201 Created in 604ms (Views: 3.5ms | ActiveRecord: 18.8ms | Excon: 83.3ms | Allocations: 48533)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:57:18 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (103.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:57:19.590588"], ["updated_at", "2021-02-24 15:57:19.590588"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-24 15:57:19.611624"], ["updated_at", "2021-02-24 15:57:19.611624"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-24 15:57:19.617910"], ["updated_at", "2021-02-24 15:57:19.617910"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.0ms | Allocations: 2732)
Completed 201 Created in 615ms (Views: 6.3ms | ActiveRecord: 17.7ms | Excon: 103.3ms | Allocations: 55520)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:57:24 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.7ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.7ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (105.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:57:25.057982"], ["updated_at", "2021-02-24 15:57:25.057982"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-24 15:57:25.071976"], ["updated_at", "2021-02-24 15:57:25.071976"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-24 15:57:25.080152"], ["updated_at", "2021-02-24 15:57:25.080152"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.1ms | Allocations: 1229)
Completed 201 Created in 544ms (Views: 4.0ms | ActiveRecord: 6.4ms | Excon: 105.1ms | Allocations: 25475)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:57:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>39, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (98.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=39000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.72 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "39"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:57:33.468467"], ["updated_at", "2021-02-24 15:57:33.468467"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 46], ["created_at", "2021-02-24 15:57:33.475195"], ["updated_at", "2021-02-24 15:57:33.475195"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 46], ["created_at", "2021-02-24 15:57:33.479180"], ["updated_at", "2021-02-24 15:57:33.479180"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giorgi"], ["restaurant_price", "€€"], ["restaurant_city", "Bastogne"], ["restaurant_category", "pizza"], ["lunch_id", 46], ["created_at", "2021-02-24 15:57:33.483681"], ["updated_at", "2021-02-24 15:57:33.483681"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.2ms | Allocations: 1247)
Completed 201 Created in 559ms (Views: 1.4ms | ActiveRecord: 5.4ms | Excon: 98.9ms | Allocations: 27264)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:57:45 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Pierre", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (81.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:57:45.719588"], ["updated_at", "2021-02-24 15:57:45.719588"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-24 15:57:45.734573"], ["updated_at", "2021-02-24 15:57:45.734573"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-24 15:57:45.741419"], ["updated_at", "2021-02-24 15:57:45.741419"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.3ms | Allocations: 1154)
Completed 201 Created in 520ms (Views: 2.4ms | ActiveRecord: 11.0ms | Excon: 81.9ms | Allocations: 23313)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:58:22 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (74.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:58:23.332710"], ["updated_at", "2021-02-24 15:58:23.332710"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-24 15:58:23.345784"], ["updated_at", "2021-02-24 15:58:23.345784"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-24 15:58:23.351344"], ["updated_at", "2021-02-24 15:58:23.351344"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 1153)
Completed 201 Created in 520ms (Views: 1.8ms | ActiveRecord: 10.9ms | Excon: 74.7ms | Allocations: 21742)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:58:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Gilles"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (107.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:58:30.752028"], ["updated_at", "2021-02-24 15:58:30.752028"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-24 15:58:30.765233"], ["updated_at", "2021-02-24 15:58:30.765233"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-24 15:58:30.770982"], ["updated_at", "2021-02-24 15:58:30.770982"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1153)
Completed 201 Created in 800ms (Views: 2.0ms | ActiveRecord: 10.6ms | Excon: 107.6ms | Allocations: 21737)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:59:11 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (80.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:59:12.095398"], ["updated_at", "2021-02-24 15:59:12.095398"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 50], ["created_at", "2021-02-24 15:59:12.106721"], ["updated_at", "2021-02-24 15:59:12.106721"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 50], ["created_at", "2021-02-24 15:59:12.111064"], ["updated_at", "2021-02-24 15:59:12.111064"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 50], ["created_at", "2021-02-24 15:59:12.116290"], ["updated_at", "2021-02-24 15:59:12.116290"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1247)
Completed 201 Created in 520ms (Views: 2.8ms | ActiveRecord: 11.6ms | Excon: 80.5ms | Allocations: 25651)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 15:59:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (68.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 15:59:21.814442"], ["updated_at", "2021-02-24 15:59:21.814442"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 51], ["created_at", "2021-02-24 15:59:21.829091"], ["updated_at", "2021-02-24 15:59:21.829091"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 51], ["created_at", "2021-02-24 15:59:21.835855"], ["updated_at", "2021-02-24 15:59:21.835855"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 51], ["created_at", "2021-02-24 15:59:21.842581"], ["updated_at", "2021-02-24 15:59:21.842581"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.0ms | Allocations: 1247)
Completed 201 Created in 486ms (Views: 2.2ms | ActiveRecord: 12.3ms | Excon: 68.7ms | Allocations: 27232)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:15:36 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:22:23 +0000
  [1m[34mExcon Request[0m (95.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:22:28.641234"], ["updated_at", "2021-02-24 16:22:28.641234"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:55:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 52], ["created_at", "2021-02-24 16:22:28.667545"], ["updated_at", "2021-02-24 16:22:28.667545"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 52], ["created_at", "2021-02-24 16:22:28.673988"], ["updated_at", "2021-02-24 16:22:28.673988"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 52], ["created_at", "2021-02-24 16:22:28.679920"], ["updated_at", "2021-02-24 16:22:28.679920"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.8ms | Allocations: 2829)
Completed 201 Created in 412557ms (Views: 6.6ms | ActiveRecord: 24.9ms | Excon: 95.2ms | Allocations: 1618803)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "20"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:22:34.861861"], ["updated_at", "2021-02-24 16:22:34.861861"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (71.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=20000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 53], ["created_at", "2021-02-24 16:22:35.320933"], ["updated_at", "2021-02-24 16:22:35.320933"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 53], ["created_at", "2021-02-24 16:22:35.333440"], ["updated_at", "2021-02-24 16:22:35.333440"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 53], ["created_at", "2021-02-24 16:22:35.339660"], ["updated_at", "2021-02-24 16:22:35.339660"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 1953)
Completed 201 Created in 6593ms (Views: 3.3ms | ActiveRecord: 29.2ms | Excon: 71.5ms | Allocations: 65563)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:33:48 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
Completed 500 Internal Server Error in 161ms (ActiveRecord: 1.4ms | Allocations: 132259)


  
NameError (undefined local variable or method `choice_array' for #<Api::V1::LunchesController:0x00005640bdb3c8c0>):
  
app/controllers/api/v1/lunches_controller.rb:140:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:34:18 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
Completed 500 Internal Server Error in 171ms (ActiveRecord: 7.2ms | Allocations: 132651)


  
NameError (undefined local variable or method `choice_array' for #<Api::V1::LunchesController:0x00007fc0bc144860>):
  
app/controllers/api/v1/lunches_controller.rb:140:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:35:37 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>20, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
Completed 500 Internal Server Error in 150ms (ActiveRecord: 5.8ms | Allocations: 132572)


  
NameError (undefined local variable or method `choice_array' for #<Api::V1::LunchesController:0x00005640bda28830>):
  
app/controllers/api/v1/lunches_controller.rb:140:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:39:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>500, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
Completed 500 Internal Server Error in 171ms (ActiveRecord: 6.4ms | Allocations: 132530)


  
NameError (undefined local variable or method `tmp_array' for #<Api::V1::LunchesController:0x00007fc0bc109418>):
  
app/controllers/api/v1/lunches_controller.rb:140:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:40:51 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>500, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:40:51.987429"], ["updated_at", "2021-02-24 16:40:51.987429"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (117.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 335ms (ActiveRecord: 10.0ms | Excon: 117.1ms | Allocations: 32016)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:41:08 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:41:08.321057"], ["updated_at", "2021-02-24 16:41:08.321057"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (84.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 292ms (ActiveRecord: 8.2ms | Excon: 84.8ms | Allocations: 13966)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:41:24 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:41:24.824525"], ["updated_at", "2021-02-24 16:41:24.824525"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (87.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
Completed 404 Not Found in 460ms (Views: 0.2ms | ActiveRecord: 10.5ms | Excon: 87.6ms | Allocations: 32052)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:41:33 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>500, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:41:34.003104"], ["updated_at", "2021-02-24 16:41:34.003104"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (73.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (5 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le 203"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 57], ["created_at", "2021-02-24 16:41:34.547952"], ["updated_at", "2021-02-24 16:41:34.547952"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Bistro"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "brasseries"], ["lunch_id", 57], ["created_at", "2021-02-24 16:41:34.560827"], ["updated_at", "2021-02-24 16:41:34.560827"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Porteuse d'Eau"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "brasseries"], ["lunch_id", 57], ["created_at", "2021-02-24 16:41:34.567028"], ["updated_at", "2021-02-24 16:41:34.567028"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Brésilien Port'alegre"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 57], ["created_at", "2021-02-24 16:41:34.573564"], ["updated_at", "2021-02-24 16:41:34.573564"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Brasserie Breughel"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 57], ["created_at", "2021-02-24 16:41:34.579907"], ["updated_at", "2021-02-24 16:41:34.579907"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 57]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.0ms | Allocations: 2142)
Completed 201 Created in 589ms (Views: 3.4ms | ActiveRecord: 24.0ms | Excon: 73.6ms | Allocations: 42408)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 16:42:11 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 16:42:11.289683"], ["updated_at", "2021-02-24 16:42:11.289683"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (66.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.8 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nüetnigenough"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.121304"], ["updated_at", "2021-02-24 16:42:12.121304"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Bistro"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "brasseries"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.134077"], ["updated_at", "2021-02-24 16:42:12.134077"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le 203"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.140178"], ["updated_at", "2021-02-24 16:42:12.140178"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Houtsiplou"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.146012"], ["updated_at", "2021-02-24 16:42:12.146012"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Rachel"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "bagels"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.151896"], ["updated_at", "2021-02-24 16:42:12.151896"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "BabDar"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "moroccan"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.157681"], ["updated_at", "2021-02-24 16:42:12.157681"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Humus x Hortense"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "cocktailbars"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.163336"], ["updated_at", "2021-02-24 16:42:12.163336"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Clef d'Or"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.169076"], ["updated_at", "2021-02-24 16:42:12.169076"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Les Filles"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.175141"], ["updated_at", "2021-02-24 16:42:12.175141"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ballekes"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 58], ["created_at", "2021-02-24 16:42:12.181450"], ["updated_at", "2021-02-24 16:42:12.181450"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:107:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 58]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1898)
Completed 201 Created in 904ms (Views: 2.7ms | ActiveRecord: 27.4ms | Excon: 67.0ms | Allocations: 59166)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:02:02 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:145:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:145:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:145:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:02:02.856479"], ["updated_at", "2021-02-24 17:02:02.856479"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (99.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.8 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nüetnigenough"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.492944"], ["updated_at", "2021-02-24 17:02:03.492944"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Bistro"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "brasseries"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.503742"], ["updated_at", "2021-02-24 17:02:03.503742"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le 203"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.507416"], ["updated_at", "2021-02-24 17:02:03.507416"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Houtsiplou"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.511127"], ["updated_at", "2021-02-24 17:02:03.511127"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Rachel"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "bagels"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.514852"], ["updated_at", "2021-02-24 17:02:03.514852"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "BabDar"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "moroccan"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.520437"], ["updated_at", "2021-02-24 17:02:03.520437"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Humus x Hortense"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "cocktailbars"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.526244"], ["updated_at", "2021-02-24 17:02:03.526244"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Clef d'Or"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.532099"], ["updated_at", "2021-02-24 17:02:03.532099"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Les Filles"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.538062"], ["updated_at", "2021-02-24 17:02:03.538062"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ballekes"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.544914"], ["updated_at", "2021-02-24 17:02:03.544914"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Comme Chez Soi"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "modern_european"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.564365"], ["updated_at", "2021-02-24 17:02:03.564365"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Fritland"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "friterie"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.570690"], ["updated_at", "2021-02-24 17:02:03.570690"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Chez Léon"], ["restaurant_price", "€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.576849"], ["updated_at", "2021-02-24 17:02:03.576849"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Les Brassins"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "brasseries"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.582832"], ["updated_at", "2021-02-24 17:02:03.582832"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "C'est Bon C'est Belge"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.588655"], ["updated_at", "2021-02-24 17:02:03.588655"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Wine Bar des Marolles"], ["restaurant_price", "€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.594651"], ["updated_at", "2021-02-24 17:02:03.594651"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Jour de Fête"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.599867"], ["updated_at", "2021-02-24 17:02:03.599867"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pré de Chez Nous"], ["restaurant_price", "€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.604312"], ["updated_at", "2021-02-24 17:02:03.604312"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Clan des Belges"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "belgian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.608128"], ["updated_at", "2021-02-24 17:02:03.608128"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Al Piccolo Mondo"], ["restaurant_price", "€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 59], ["created_at", "2021-02-24 17:02:03.611377"], ["updated_at", "2021-02-24 17:02:03.611377"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:128:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 59]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.9ms | Allocations: 3539)
Completed 201 Created in 780ms (Views: 3.3ms | ActiveRecord: 33.3ms | Excon: 99.8ms | Allocations: 119517)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:04:23 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:152:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:152:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:152:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:04:23.969826"], ["updated_at", "2021-02-24 17:04:23.969826"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (99.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.8 KB)[0m
  [1m[34mExcon Request[0m (78.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
Completed 500 Internal Server Error in 947ms (ActiveRecord: 11.3ms | Excon: 178.2ms | Allocations: 44181)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:04:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:152:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:152:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:152:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:04:46.378582"], ["updated_at", "2021-02-24 17:04:46.378582"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (74.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.8 KB)[0m
  [1m[34mExcon Request[0m (91.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
Completed 500 Internal Server Error in 859ms (ActiveRecord: 9.4ms | Excon: 166.3ms | Allocations: 44105)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:13:38 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:13:38.938816"], ["updated_at", "2021-02-24 17:13:38.938816"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (84.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.8 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nüetnigenough"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.781102"], ["updated_at", "2021-02-24 17:13:39.781102"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Bistro"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "brasseries"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.791742"], ["updated_at", "2021-02-24 17:13:39.791742"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le 203"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.795234"], ["updated_at", "2021-02-24 17:13:39.795234"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Houtsiplou"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.798898"], ["updated_at", "2021-02-24 17:13:39.798898"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Rachel"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "bagels"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.804431"], ["updated_at", "2021-02-24 17:13:39.804431"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "BabDar"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "moroccan"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.810757"], ["updated_at", "2021-02-24 17:13:39.810757"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Humus x Hortense"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "cocktailbars"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.816734"], ["updated_at", "2021-02-24 17:13:39.816734"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Clef d'Or"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.822158"], ["updated_at", "2021-02-24 17:13:39.822158"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Les Filles"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "belgian"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.827517"], ["updated_at", "2021-02-24 17:13:39.827517"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ballekes"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "belgian"], ["lunch_id", 62], ["created_at", "2021-02-24 17:13:39.833620"], ["updated_at", "2021-02-24 17:13:39.833620"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 62]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 2606)
Completed 201 Created in 936ms (Views: 3.7ms | ActiveRecord: 23.4ms | Excon: 84.6ms | Allocations: 82286)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:14:04 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:14:05.088030"], ["updated_at", "2021-02-24 17:14:05.088030"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (74.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.89 KB)[0m
  [1m[34mExcon Request[0m (85.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
Completed 500 Internal Server Error in 1110ms (ActiveRecord: 10.0ms | Excon: 160.5ms | Allocations: 38822)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:214:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:216:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:81:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:29:20 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:29:20.652206"], ["updated_at", "2021-02-24 17:29:20.652206"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (118.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 582418ms (ActiveRecord: 11.9ms | Excon: 118.1ms | Allocations: 2327424)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:215:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:81:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:39:09 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:39:09.991528"], ["updated_at", "2021-02-24 17:39:09.991528"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
Completed 500 Internal Server Error in 66ms (Views: 0.1ms | ActiveRecord: 9.9ms | Allocations: 28036)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/base_controller.rb:23:in `empty_request'
app/controllers/api/v1/lunches_controller.rb:91:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:40:33 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:40:34.099195"], ["updated_at", "2021-02-24 17:40:34.099195"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
Completed 404 Not Found in 24ms (Views: 0.1ms | ActiveRecord: 5.9ms | Allocations: 25599)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:40:38 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:40:38.295049"], ["updated_at", "2021-02-24 17:40:38.295049"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
Completed 404 Not Found in 18ms (Views: 0.1ms | ActiveRecord: 7.8ms | Allocations: 7539)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:40:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:40:50.118199"], ["updated_at", "2021-02-24 17:40:50.118199"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (5139.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (120.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (136.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (90.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (107.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (99.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (86.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (95.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (85.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (82.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (104.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (91.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (88.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (87.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (89.91ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (88.05ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (92.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (79.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (91.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (77.77ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (5095.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (96.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (89.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (88.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (85.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (101.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (94.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (85.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (105.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (99.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (83.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (107.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (94.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (84.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (95.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[34mExcon Request[0m (86.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m500 Internal Server Error (112 Bytes)[0m
Completed 500 Internal Server Error in 34480ms (ActiveRecord: 7.9ms | Excon: 13428.4ms | Allocations: 359030)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:217:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:219:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:219:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:81:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:43:03 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:225: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/api/v1/lunches_controller.rb:225: syntax error, unexpected end-of-input, expecting end
app/controllers/api/v1/lunches_controller.rb:225: syntax error, unexpected end-of-input, expecting end
app/controllers/api/v1/lunches_controller.rb:225: syntax error, unexpected end-of-input, expecting end
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:43:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:43:15.686201"], ["updated_at", "2021-02-24 17:43:15.686201"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (115.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (79.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (110.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (14.9 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.398651"], ["updated_at", "2021-02-24 17:43:17.398651"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.411211"], ["updated_at", "2021-02-24 17:43:17.411211"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.416817"], ["updated_at", "2021-02-24 17:43:17.416817"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.422408"], ["updated_at", "2021-02-24 17:43:17.422408"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.427950"], ["updated_at", "2021-02-24 17:43:17.427950"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.433567"], ["updated_at", "2021-02-24 17:43:17.433567"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.439114"], ["updated_at", "2021-02-24 17:43:17.439114"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.444657"], ["updated_at", "2021-02-24 17:43:17.444657"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.450546"], ["updated_at", "2021-02-24 17:43:17.450546"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Régalade"], ["restaurant_price", "€€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 69], ["created_at", "2021-02-24 17:43:17.456120"], ["updated_at", "2021-02-24 17:43:17.456120"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:106:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 69]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.6ms | Allocations: 3367)
Completed 201 Created in 1814ms (Views: 5.3ms | ActiveRecord: 29.8ms | Excon: 305.7ms | Allocations: 102568)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:43:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:183:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:43:43.569100"], ["updated_at", "2021-02-24 17:43:43.569100"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:50:in `create'
  [1m[34mExcon Request[0m (102.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 902ms (ActiveRecord: 7.8ms | Excon: 191.4ms | Allocations: 20728)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:216:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:218:in `fetch_yelp'
app/controllers/api/v1/lunches_controller.rb:81:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:51:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:50:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.4ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (84.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (121.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5109.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:50:43.435746"], ["updated_at", "2021-02-24 17:50:43.435746"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.458920"], ["updated_at", "2021-02-24 17:50:43.458920"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.465330"], ["updated_at", "2021-02-24 17:50:43.465330"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.470819"], ["updated_at", "2021-02-24 17:50:43.470819"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.476901"], ["updated_at", "2021-02-24 17:50:43.476901"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.482866"], ["updated_at", "2021-02-24 17:50:43.482866"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.488807"], ["updated_at", "2021-02-24 17:50:43.488807"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.494149"], ["updated_at", "2021-02-24 17:50:43.494149"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.499434"], ["updated_at", "2021-02-24 17:50:43.499434"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.504603"], ["updated_at", "2021-02-24 17:50:43.504603"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 71], ["created_at", "2021-02-24 17:50:43.509799"], ["updated_at", "2021-02-24 17:50:43.509799"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 71]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.0ms | Allocations: 2608)
Completed 201 Created in 6525ms (Views: 3.4ms | ActiveRecord: 21.0ms | Excon: 5315.6ms | Allocations: 93193)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:53:14 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (83.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (104.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:53:16.538408"], ["updated_at", "2021-02-24 17:53:16.538408"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.561571"], ["updated_at", "2021-02-24 17:53:16.561571"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.567465"], ["updated_at", "2021-02-24 17:53:16.567465"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.572962"], ["updated_at", "2021-02-24 17:53:16.572962"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.578439"], ["updated_at", "2021-02-24 17:53:16.578439"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.583910"], ["updated_at", "2021-02-24 17:53:16.583910"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.589285"], ["updated_at", "2021-02-24 17:53:16.589285"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.594556"], ["updated_at", "2021-02-24 17:53:16.594556"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.599676"], ["updated_at", "2021-02-24 17:53:16.599676"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.604842"], ["updated_at", "2021-02-24 17:53:16.604842"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 72], ["created_at", "2021-02-24 17:53:16.610005"], ["updated_at", "2021-02-24 17:53:16.610005"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 72]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.9ms | Allocations: 2604)
Completed 201 Created in 2160ms (Views: 3.4ms | ActiveRecord: 26.9ms | Excon: 270.6ms | Allocations: 93844)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:53:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (97.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:53:37.806500"], ["updated_at", "2021-02-24 17:53:37.806500"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 73], ["created_at", "2021-02-24 17:53:37.831279"], ["updated_at", "2021-02-24 17:53:37.831279"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 73], ["created_at", "2021-02-24 17:53:37.837078"], ["updated_at", "2021-02-24 17:53:37.837078"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 73], ["created_at", "2021-02-24 17:53:37.842569"], ["updated_at", "2021-02-24 17:53:37.842569"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 73]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.4ms | Allocations: 1952)
Completed 201 Created in 788ms (Views: 2.8ms | ActiveRecord: 19.5ms | Excon: 97.6ms | Allocations: 52188)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:53:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (88.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (78.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 17:53:51.964475"], ["updated_at", "2021-02-24 17:53:51.964475"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:51.990189"], ["updated_at", "2021-02-24 17:53:51.990189"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:51.996167"], ["updated_at", "2021-02-24 17:53:51.996167"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.001947"], ["updated_at", "2021-02-24 17:53:52.001947"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.007482"], ["updated_at", "2021-02-24 17:53:52.007482"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.013027"], ["updated_at", "2021-02-24 17:53:52.013027"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.018529"], ["updated_at", "2021-02-24 17:53:52.018529"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.024008"], ["updated_at", "2021-02-24 17:53:52.024008"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.029465"], ["updated_at", "2021-02-24 17:53:52.029465"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.034843"], ["updated_at", "2021-02-24 17:53:52.034843"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 74], ["created_at", "2021-02-24 17:53:52.039961"], ["updated_at", "2021-02-24 17:53:52.039961"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 74]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.9ms | Allocations: 2605)
Completed 201 Created in 1396ms (Views: 3.3ms | ActiveRecord: 30.8ms | Excon: 260.4ms | Allocations: 95322)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 17:54:20 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (5115.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5086.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.78ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (101.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.40ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.37ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.91ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.40ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (78.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.66ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (102.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (72.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5052.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (112.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (118.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (73.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (260.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5099.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.37ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (78.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.77ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (108.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (77.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5106.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (76.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (78.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (83.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (120.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (109.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.06ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (111.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5095.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5108.92ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (117.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (700.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (389.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (76.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.25ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.40ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (120.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.05ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (100.40ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (75.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (119.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (124.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (108.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (106.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (108.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5108.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (106.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (100.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (103.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (83.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5057.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (106.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (83.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5097.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.03ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.25ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5106.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.03ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (114.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.66ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (76.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (111.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (78.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (78.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (83.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (108.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m500 Internal Server Error (112 Bytes)[0m
  [1m[34mExcon Request[0m (97.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=3000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.89 KB)[0m
  [1m[34mExcon Request[0m (85.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (260.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (78.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (118.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (112.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (108.73ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (116.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (83.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5101.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (101.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (102.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (77.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.77ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.78ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (101.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (75.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (118.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (108.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (103.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (101.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.37ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (114.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (118.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.78ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (75.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (128.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.77ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (77.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (107.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (106.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5121.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.73ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.25ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (78.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (78.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (74.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.40ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (260.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.66ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (119.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (102.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (308.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5051.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (101.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (74.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (104.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (113.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (78.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (101.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (108.88ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (80.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (102.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.73ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (75.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (113.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5115.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5112.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5110.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (123.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (125.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (261.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (80.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (106.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (77.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (81.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (111.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5055.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (76.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (106.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (101.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (103.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.08ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (100.73ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (113.35ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (75.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.25ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (104.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (103.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5095.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (80.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (97.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (105.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (72.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.37ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (103.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.91ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (344.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (82.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (76.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (80.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (112.92ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (104.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (106.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.48ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (92.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.09ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (98.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (100.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (109.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.88ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (113.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (93.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (96.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (110.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (105.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (97.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (79.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5061.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (108.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (101.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (94.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (93.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (84.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (85.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (113.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (5055.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (91.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (89.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (84.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (100.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (94.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.06ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (301.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (99.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (87.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.02ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (90.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.03ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.61ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (95.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (81.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (89.78ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (102.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (83.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (114.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (92.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (88.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (99.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (98.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-24 18:01:25 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.6ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (89.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (86.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (91.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 18:01:27.191005"], ["updated_at", "2021-02-24 18:01:27.191005"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 75], ["created_at", "2021-02-24 18:01:27.210782"], ["updated_at", "2021-02-24 18:01:27.210782"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 75], ["created_at", "2021-02-24 18:01:27.224740"], ["updated_at", "2021-02-24 18:01:27.224740"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 75], ["created_at", "2021-02-24 18:01:27.237581"], ["updated_at", "2021-02-24 18:01:27.237581"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 75]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 8.5ms | Allocations: 2826)
Completed 201 Created in 1407ms (Views: 11.9ms | ActiveRecord: 18.7ms | Excon: 266.9ms | Allocations: 71433)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 18:01:37 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>38000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (1.4ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (1.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (80.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=38000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (68.05ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=380000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (87.06ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=38000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "38000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 18:01:38.585543"], ["updated_at", "2021-02-24 18:01:38.585543"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 76], ["created_at", "2021-02-24 18:01:38.598970"], ["updated_at", "2021-02-24 18:01:38.598970"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 76], ["created_at", "2021-02-24 18:01:38.604432"], ["updated_at", "2021-02-24 18:01:38.604432"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 76], ["created_at", "2021-02-24 18:01:38.609782"], ["updated_at", "2021-02-24 18:01:38.609782"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 76]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.1ms | Allocations: 1324)
Completed 201 Created in 1288ms (Views: 3.7ms | ActiveRecord: 15.6ms | Excon: 235.2ms | Allocations: 41709)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 18:04:08 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>38000, "price"=>[1, 4], "attendees"=>["Sam", "Gilles", "Vince"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Sam"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Gilles"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Vince"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (115.49ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=38000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (2.86 KB)[0m
  [1m[34mExcon Request[0m (90.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=380000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (103.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=38000&price=1,2,3,4&categories=belgian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (2.86 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "38000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-24 18:04:10.522014"], ["updated_at", "2021-02-24 18:04:10.522014"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 77], ["created_at", "2021-02-24 18:04:10.543986"], ["updated_at", "2021-02-24 18:04:10.543986"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 77], ["created_at", "2021-02-24 18:04:10.553650"], ["updated_at", "2021-02-24 18:04:10.553650"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 77], ["created_at", "2021-02-24 18:04:10.566319"], ["updated_at", "2021-02-24 18:04:10.566319"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 77]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 9.4ms | Allocations: 2826)
Completed 201 Created in 1563ms (Views: 13.0ms | ActiveRecord: 24.4ms | Excon: 309.4ms | Allocations: 71446)


Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:41:24 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 458.4ms | Allocations: 359420)
Completed 500 Internal Server Error in 470ms (ActiveRecord: 2.3ms | Allocations: 363688)


  
ActionView::Template::Error (undefined local variable or method `finder' for #<#<Class:0x000055972d773700>:0x000055972d770938>):
    1: json.array! @lunches do |lunch|
    2:   json.extract! lunch, :id, :localisation, :distance, :price
    3:   json.movies finder.movies, :title, :overview, :vote_average
    4: end
    5: 
    6: 
  
app/views/api/v1/lunches/index.json.jbuilder:3
app/views/api/v1/lunches/index.json.jbuilder:1
Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:42:50 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 0.7ms | Allocations: 1034)
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1746)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check json.array! @lunches do |lunch|
  json.extract! lunch, :id, :localisation, :distance, :price
  json.restaurants lunch.restaurants, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
  end
# end

end



# resturent title, taste and price?

):
1:    json.array! @lunches do |lunch|
2:      json.extract! lunch, :id, :localisation, :distance, :price
3:      json.restaurants lunch.restaurants, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
4:      end
5:    # end
6:    
7:    end
8:    
9:    
10:    
11:    # resturent title, taste and price?
  
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:42:51 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 0.6ms | Allocations: 1010)
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 1408)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check json.array! @lunches do |lunch|
  json.extract! lunch, :id, :localisation, :distance, :price
  json.restaurants lunch.restaurants, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
  end
# end

end



# resturent title, taste and price?

):
1:    json.array! @lunches do |lunch|
2:      json.extract! lunch, :id, :localisation, :distance, :price
3:      json.restaurants lunch.restaurants, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
4:      end
5:    # end
6:    
7:    end
8:    
9:    
10:    
11:    # resturent title, taste and price?
  
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:42:52 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 0.6ms | Allocations: 1010)
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1408)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check json.array! @lunches do |lunch|
  json.extract! lunch, :id, :localisation, :distance, :price
  json.restaurants lunch.restaurants, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
  end
# end

end



# resturent title, taste and price?

):
1:    json.array! @lunches do |lunch|
2:      json.extract! lunch, :id, :localisation, :distance, :price
3:      json.restaurants lunch.restaurants, :restaurant_name, :restaurant_price, :restaurant_city, :restaurant_category
4:      end
5:    # end
6:    
7:    end
8:    
9:    
10:    
11:    # resturent title, taste and price?
  
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
app/views/api/v1/lunches/index.json.jbuilder:14: syntax error, unexpected end, expecting end-of-input
Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:43:24 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 23]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 39]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 41]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 54]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 55]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 56]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 57]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 58]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 59]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 60]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 61]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 62]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 63]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 64]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 65]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 66]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 67]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 68]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 69]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 70]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 71]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 72]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 73]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 74]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 75]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 76]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 77]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 111.6ms | Allocations: 115668)
Completed 200 OK in 113ms (Views: 97.0ms | ActiveRecord: 15.1ms | Allocations: 116415)


Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:44:28 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 23]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 39]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 41]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 54]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 55]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 56]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 57]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 58]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 59]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 60]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 61]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 62]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 63]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 64]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 65]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 66]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 67]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 68]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 69]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 70]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 71]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 72]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 73]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 74]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 75]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 76]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 77]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 106.9ms | Allocations: 104229)
Completed 200 OK in 108ms (Views: 95.1ms | ActiveRecord: 12.1ms | Allocations: 104657)


Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:45:14 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 23]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 39]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 41]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 54]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 55]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 56]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 57]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 58]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 59]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 60]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 61]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 62]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 63]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 64]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 65]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 66]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 67]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 68]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 69]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 70]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 71]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 72]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 73]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 74]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 75]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 76]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 77]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 74.8ms | Allocations: 104232)
Completed 200 OK in 76ms (Views: 65.2ms | ActiveRecord: 9.9ms | Allocations: 104665)


Started GET "/api/v1/lunches" for ::1 at 2021-02-24 19:58:11 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.6ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 23]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 39]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 41]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 54]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 55]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 56]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 57]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 58]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 59]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 60]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 61]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 62]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 63]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 64]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 65]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 66]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 67]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 68]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 69]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 70]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 71]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 72]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 73]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 74]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 75]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 76]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 77]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 130.0ms | Allocations: 118867)
Completed 200 OK in 158ms (Views: 114.1ms | ActiveRecord: 16.6ms | Allocations: 123166)


Started POST "/api/v1/lunches" for ::1 at 2021-02-24 19:58:14 +0000
Processing by Api::V1::LunchesController#create as JSON
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.0ms | Allocations: 1101)


Started POST "/api/v1/lunches/1" for ::1 at 2021-02-24 19:58:32 +0000
  
ActionController::RoutingError (No route matches [POST] "/api/v1/lunches/1"):
  
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/lunches/1" for ::1 at 2021-02-24 19:58:37 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.0ms | Allocations: 1053)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 2403)


Started GET "/api/v1/lunches/10" for ::1 at 2021-02-24 19:58:43 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"10"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.4ms | Allocations: 1620)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.4ms | Allocations: 2655)


Started GET "/api/v1/lunches/25" for ::1 at 2021-02-24 19:58:46 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"25"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.4ms | Allocations: 1907)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.4ms | Allocations: 2926)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-24 19:59:06 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[1, 3], "attendees"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
[31mUnpermitted parameter: :release[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 3.5ms | Allocations: 12691)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (1.8ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["localisation", "Arlon"], ["distance", "1000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 10:57:25.643369"], ["updated_at", "2021-02-25 10:57:25.643369"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (7.4ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 100000], ["localisation", "Arlon"], ["distance", "1000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 10:57:37.628754"], ["updated_at", "2021-02-25 10:57:37.628754"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 100000], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (14.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (161.3ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (81.9ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-25 10:58:43.021081"], ["updated_at", "2021-02-25 10:58:43.021081"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$FNrNbjFdLeSMFWX8Sc9qh.a97VlDO1k0MdtqxvxcSO6xtKb2D92ba"], ["created_at", "2021-02-25 10:58:43.286802"], ["updated_at", "2021-02-25 10:58:43.286802"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "z6F7uww9fJhs-i1oXunA"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$XLfJ4VCbSx4pVJN1puNQhu5zkep7x5acMzJtAn6GtQfWWt2itdNZ6"], ["created_at", "2021-02-25 10:58:43.472988"], ["updated_at", "2021-02-25 10:58:43.472988"], ["authentication_token", "z6F7uww9fJhs-i1oXunA"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "-RDJ8_PHSWUnYvXetsoP"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$0r.T3kEHkjeaD4RFdkZcRelMoc7Z6cHZsn/kVzhwlj1ICWOxcz9z2"], ["created_at", "2021-02-25 10:58:43.653610"], ["updated_at", "2021-02-25 10:58:43.653610"], ["authentication_token", "-RDJ8_PHSWUnYvXetsoP"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "nkLjybdcMVHu7csy8iQy"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$OvjvgZoBRjFACs.vDBsOWOqyNWDMqnkBp8Zwxr3zPDcHQVsKsXEdi"], ["created_at", "2021-02-25 10:58:43.837661"], ["updated_at", "2021-02-25 10:58:43.837661"], ["authentication_token", "nkLjybdcMVHu7csy8iQy"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 10:58:43.849626"], ["updated_at", "2021-02-25 10:58:43.849626"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-25 10:58:43.853715"], ["updated_at", "2021-02-25 10:58:43.853715"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-25 10:58:43.857368"], ["updated_at", "2021-02-25 10:58:43.857368"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-25 10:58:43.869575"], ["updated_at", "2021-02-25 10:58:43.869575"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["localisation", "Arlon"], ["distance", "1000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 10:58:43.883433"], ["updated_at", "2021-02-25 10:58:43.883433"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 10:58:43.887521"], ["updated_at", "2021-02-25 10:58:43.887521"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:05:49 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (101.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (78.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (65.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (1.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:05:50.514324"], ["updated_at", "2021-02-25 11:05:50.514324"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
Completed 500 Internal Server Error in 1249ms (ActiveRecord: 7.0ms | Excon: 244.4ms | Allocations: 48551)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "lunches_pkey"
DETAIL:  Key (id)=(1) already exists.
):
  
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started GET "/api/v1/lunches" for ::1 at 2021-02-25 11:06:17 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 19.7ms | Allocations: 9531)
Completed 200 OK in 23ms (Views: 19.0ms | ActiveRecord: 1.2ms | Allocations: 10396)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:06:34 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (83.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (73.66ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (67.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:06:36.327585"], ["updated_at", "2021-02-25 11:06:36.327585"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
Completed 500 Internal Server Error in 1433ms (ActiveRecord: 1.6ms | Excon: 224.7ms | Allocations: 26489)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "lunches_pkey"
DETAIL:  Key (id)=(2) already exists.
):
  
app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5007.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (24.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (13.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (73.2ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (66.2ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-25 11:07:42.425461"], ["updated_at", "2021-02-25 11:07:42.425461"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$x4DFoxVC6N.En9B4hgwLhe4.Ul.CdCA2oYijvFO1Zbyu9vaQj7qMi"], ["created_at", "2021-02-25 11:07:42.690245"], ["updated_at", "2021-02-25 11:07:42.690245"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "PrzXyUqXuXn9RqrWwVp5"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$EhkTuBMvPasCqvwoNDk57e3FAT2R0CYgXLqFlzaQZ8Jfc5RJRLm9m"], ["created_at", "2021-02-25 11:07:42.871092"], ["updated_at", "2021-02-25 11:07:42.871092"], ["authentication_token", "PrzXyUqXuXn9RqrWwVp5"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "cz1DPWXwZnB-kUzYCV8D"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$5hFI7/zxKSQy.sRiXONoBOn5Wy.sTVpQ0p9BcTwkhaHlle3eJSLN6"], ["created_at", "2021-02-25 11:07:43.052630"], ["updated_at", "2021-02-25 11:07:43.052630"], ["authentication_token", "cz1DPWXwZnB-kUzYCV8D"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "KGdEyzGAmNnaAmH-q7jj"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$i2p3WkLMga2Quntp1nqru.CIbnrgzyrXpGYXlCzQZYxFcwIwgG9wC"], ["created_at", "2021-02-25 11:07:43.234424"], ["updated_at", "2021-02-25 11:07:43.234424"], ["authentication_token", "KGdEyzGAmNnaAmH-q7jj"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 11:07:43.246161"], ["updated_at", "2021-02-25 11:07:43.246161"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-25 11:07:43.250239"], ["updated_at", "2021-02-25 11:07:43.250239"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-25 11:07:43.253818"], ["updated_at", "2021-02-25 11:07:43.253818"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-25 11:07:43.266340"], ["updated_at", "2021-02-25 11:07:43.266340"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:07:52 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (78.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (82.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (72.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.8ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:07:53.705638"], ["updated_at", "2021-02-25 11:07:53.705638"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 1], ["created_at", "2021-02-25 11:07:53.746703"], ["updated_at", "2021-02-25 11:07:53.746703"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 1], ["created_at", "2021-02-25 11:07:53.755751"], ["updated_at", "2021-02-25 11:07:53.755751"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.4ms | Allocations: 2734)
Completed 201 Created in 1499ms (Views: 6.0ms | ActiveRecord: 16.8ms | Excon: 233.4ms | Allocations: 66533)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (15.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (76.6ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (69.9ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-25 11:08:08.362141"], ["updated_at", "2021-02-25 11:08:08.362141"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$zwUrYldZUm49btyD6sKMDOkrZz8swwxDI4aXKgle1m8U/eBZNSUCK"], ["created_at", "2021-02-25 11:08:08.651475"], ["updated_at", "2021-02-25 11:08:08.651475"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "nDzx_Y-b-VncGe2nnbcN"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$kVEcUZPYtun68el/VOYBGe/B07/BQQ7J2mIxH6ihMEDifxVWJSwLW"], ["created_at", "2021-02-25 11:08:08.832346"], ["updated_at", "2021-02-25 11:08:08.832346"], ["authentication_token", "nDzx_Y-b-VncGe2nnbcN"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "8QsyYUwG44HLYJ7zRCZc"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$47/f3T2TyOqbD6YKQuV03e6P6R1828REErEYNQMd3lmd6RZsGu7US"], ["created_at", "2021-02-25 11:08:09.014288"], ["updated_at", "2021-02-25 11:08:09.014288"], ["authentication_token", "8QsyYUwG44HLYJ7zRCZc"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "TSxR3DS3x4d1ZxTSf6Ts"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$BmWtLUzaTpX7DHD4IGxe3OO8jOlblNxtpz231./NN5mUKSKQ2k6L6"], ["created_at", "2021-02-25 11:08:09.195709"], ["updated_at", "2021-02-25 11:08:09.195709"], ["authentication_token", "TSxR3DS3x4d1ZxTSf6Ts"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:09.207561"], ["updated_at", "2021-02-25 11:08:09.207561"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-25 11:08:09.211675"], ["updated_at", "2021-02-25 11:08:09.211675"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-25 11:08:09.215328"], ["updated_at", "2021-02-25 11:08:09.215328"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-25 11:08:09.218999"], ["updated_at", "2021-02-25 11:08:09.218999"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["localisation", "Arlon"], ["distance", "1000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:09.238587"], ["updated_at", "2021-02-25 11:08:09.238587"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:09.242739"], ["updated_at", "2021-02-25 11:08:09.242739"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:08:14 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (82.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (72.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (58.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.04ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (2.1ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:15.895747"], ["updated_at", "2021-02-25 11:08:15.895747"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
Completed 500 Internal Server Error in 1268ms (ActiveRecord: 9.4ms | Excon: 212.8ms | Allocations: 48863)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "lunches_pkey"
DETAIL:  Key (id)=(1) already exists.
):
  
app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (22.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (15.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (72.1ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (92.9ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-25 11:08:39.016314"], ["updated_at", "2021-02-25 11:08:39.016314"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$ZNM.bKapS7Acz5Jn5ifs5eEJbh/QSoXGNCHNyN3p6N2.JOozywpkO"], ["created_at", "2021-02-25 11:08:39.301974"], ["updated_at", "2021-02-25 11:08:39.301974"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "kWaMJ8YoATKnLho2TNR8"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$lF7FAzwFNqCvXFjLhNV9nOmDW8WfqlqCBgR4nP8z9sfPDJBoGGctW"], ["created_at", "2021-02-25 11:08:39.482131"], ["updated_at", "2021-02-25 11:08:39.482131"], ["authentication_token", "kWaMJ8YoATKnLho2TNR8"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "gGE2rD7bbvBaJE3ywGrK"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$lXV/AcwkfG.g.6B/P7GHvOFPVUK9ZTprUkci4NrYINxXVQuBpg12C"], ["created_at", "2021-02-25 11:08:39.661967"], ["updated_at", "2021-02-25 11:08:39.661967"], ["authentication_token", "gGE2rD7bbvBaJE3ywGrK"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "neuXUzmud9taodT-dmMz"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$/jPtrVNTEDOHNEhQdPnZTOrSW/o5ngyQ9DTm14PgNScw8PZB.bFG2"], ["created_at", "2021-02-25 11:08:39.841660"], ["updated_at", "2021-02-25 11:08:39.841660"], ["authentication_token", "neuXUzmud9taodT-dmMz"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:39.852109"], ["updated_at", "2021-02-25 11:08:39.852109"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-25 11:08:39.855762"], ["updated_at", "2021-02-25 11:08:39.855762"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-25 11:08:39.859193"], ["updated_at", "2021-02-25 11:08:39.859193"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-25 11:08:39.862607"], ["updated_at", "2021-02-25 11:08:39.862607"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 100], ["localisation", "Arlon"], ["distance", "1000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:39.881067"], ["updated_at", "2021-02-25 11:08:39.881067"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 200], ["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:39.884942"], ["updated_at", "2021-02-25 11:08:39.884942"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:08:45 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>30000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (103.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (77.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (66.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "30000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:08:47.076006"], ["updated_at", "2021-02-25 11:08:47.076006"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 1], ["created_at", "2021-02-25 11:08:47.099772"], ["updated_at", "2021-02-25 11:08:47.099772"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 1], ["created_at", "2021-02-25 11:08:47.106408"], ["updated_at", "2021-02-25 11:08:47.106408"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.4ms | Allocations: 2731)
Completed 201 Created in 1534ms (Views: 6.5ms | ActiveRecord: 22.1ms | Excon: 247.8ms | Allocations: 66989)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:09:24 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (73.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (100.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (67.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:09:25.278689"], ["updated_at", "2021-02-25 11:09:25.278689"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 2], ["created_at", "2021-02-25 11:09:25.290153"], ["updated_at", "2021-02-25 11:09:25.290153"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 2], ["created_at", "2021-02-25 11:09:25.293783"], ["updated_at", "2021-02-25 11:09:25.293783"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.2ms | Allocations: 1230)
Completed 201 Created in 1175ms (Views: 1.6ms | ActiveRecord: 10.4ms | Excon: 242.4ms | Allocations: 36820)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:14:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Girsh", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (87.44ms)  GET https://api.yelp.com/v3/businesses/search?location=Girsh,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Girsh"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:14:17.322349"], ["updated_at", "2021-02-25 11:14:17.322349"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ca' Dario Goleta"], ["restaurant_price", "$$"], ["restaurant_city", "Goleta"], ["restaurant_category", "italian"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.336338"], ["updated_at", "2021-02-25 11:14:17.336338"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Toma Restaurant & Bar"], ["restaurant_price", "$$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "bars"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.341521"], ["updated_at", "2021-02-25 11:14:17.341521"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Via Maestra 42"], ["restaurant_price", "$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "delis"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.347280"], ["updated_at", "2021-02-25 11:14:17.347280"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ca' Dario"], ["restaurant_price", "$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "italian"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.353427"], ["updated_at", "2021-02-25 11:14:17.353427"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Fresco Cafe"], ["restaurant_price", "$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "tradamerican"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.359201"], ["updated_at", "2021-02-25 11:14:17.359201"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Olio E Limone Ristorante"], ["restaurant_price", "$$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "italian"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.364931"], ["updated_at", "2021-02-25 11:14:17.364931"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "S Y Kitchen"], ["restaurant_price", "$$$"], ["restaurant_city", "Santa Ynez"], ["restaurant_category", "italian"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.368898"], ["updated_at", "2021-02-25 11:14:17.368898"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "MIZZA"], ["restaurant_price", "$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "italian"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.374313"], ["updated_at", "2021-02-25 11:14:17.374313"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pascucci"], ["restaurant_price", "$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "italian"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.380541"], ["updated_at", "2021-02-25 11:14:17.380541"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Bettina"], ["restaurant_price", "$$"], ["restaurant_city", "Santa Barbara"], ["restaurant_category", "pizza"], ["lunch_id", 3], ["created_at", "2021-02-25 11:14:17.387227"], ["updated_at", "2021-02-25 11:14:17.387227"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1906)
Completed 201 Created in 1424ms (Views: 2.7ms | ActiveRecord: 20.8ms | Excon: 87.5ms | Allocations: 56541)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:14:27 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (72.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (70.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (60.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:14:29.405485"], ["updated_at", "2021-02-25 11:14:29.405485"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 4], ["created_at", "2021-02-25 11:14:29.417736"], ["updated_at", "2021-02-25 11:14:29.417736"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 4], ["created_at", "2021-02-25 11:14:29.422042"], ["updated_at", "2021-02-25 11:14:29.422042"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.1ms | Allocations: 1154)
Completed 201 Created in 1621ms (Views: 1.2ms | ActiveRecord: 9.7ms | Excon: 202.7ms | Allocations: 34261)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:24:30 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (80.93ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (64.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.10ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:24:32.120313"], ["updated_at", "2021-02-25 11:24:32.120313"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 5], ["created_at", "2021-02-25 11:24:32.134483"], ["updated_at", "2021-02-25 11:24:32.134483"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 5], ["created_at", "2021-02-25 11:24:32.139728"], ["updated_at", "2021-02-25 11:24:32.139728"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.2ms | Allocations: 1156)
Completed 201 Created in 1339ms (Views: 1.4ms | ActiveRecord: 11.3ms | Excon: 224.1ms | Allocations: 34465)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:28:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `matching_preferences'
  [1m[34mExcon Request[0m (95.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (85.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.88ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:28:47.901832"], ["updated_at", "2021-02-25 11:28:47.901832"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 6], ["created_at", "2021-02-25 11:28:47.920120"], ["updated_at", "2021-02-25 11:28:47.920120"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 6], ["created_at", "2021-02-25 11:28:47.923756"], ["updated_at", "2021-02-25 11:28:47.923756"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.4ms | Allocations: 1858)
Completed 201 Created in 1420ms (Views: 1.6ms | ActiveRecord: 11.8ms | Excon: 260.9ms | Allocations: 59412)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:45:58 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (5096.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (5118.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (82.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:46:09.432879"], ["updated_at", "2021-02-25 11:46:09.432879"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 7], ["created_at", "2021-02-25 11:46:09.456301"], ["updated_at", "2021-02-25 11:46:09.456301"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 7], ["created_at", "2021-02-25 11:46:09.462829"], ["updated_at", "2021-02-25 11:46:09.462829"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.6ms | Allocations: 1861)
Completed 201 Created in 11250ms (Views: 3.0ms | ActiveRecord: 12.3ms | Excon: 10297.1ms | Allocations: 58379)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:47:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (59.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (73.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (65.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:47:23.386945"], ["updated_at", "2021-02-25 11:47:23.386945"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 8], ["created_at", "2021-02-25 11:47:23.406512"], ["updated_at", "2021-02-25 11:47:23.406512"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 8], ["created_at", "2021-02-25 11:47:23.410537"], ["updated_at", "2021-02-25 11:47:23.410537"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.4ms | Allocations: 1859)
Completed 201 Created in 1401ms (Views: 1.7ms | ActiveRecord: 19.9ms | Excon: 198.2ms | Allocations: 59842)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:49:38 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (76.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (68.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (96.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:49:40.006291"], ["updated_at", "2021-02-25 11:49:40.006291"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 9], ["created_at", "2021-02-25 11:49:40.024560"], ["updated_at", "2021-02-25 11:49:40.024560"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 9], ["created_at", "2021-02-25 11:49:40.030385"], ["updated_at", "2021-02-25 11:49:40.030385"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.3ms | Allocations: 1858)
Completed 201 Created in 1159ms (Views: 2.7ms | ActiveRecord: 15.2ms | Excon: 242.4ms | Allocations: 59167)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:51:51 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (60.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:51:51.996707"], ["updated_at", "2021-02-25 11:51:51.996707"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.010598"], ["updated_at", "2021-02-25 11:51:52.010598"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.016762"], ["updated_at", "2021-02-25 11:51:52.016762"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.022871"], ["updated_at", "2021-02-25 11:51:52.022871"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.028974"], ["updated_at", "2021-02-25 11:51:52.028974"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.034950"], ["updated_at", "2021-02-25 11:51:52.034950"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.040892"], ["updated_at", "2021-02-25 11:51:52.040892"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.046842"], ["updated_at", "2021-02-25 11:51:52.046842"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.052850"], ["updated_at", "2021-02-25 11:51:52.052850"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.058769"], ["updated_at", "2021-02-25 11:51:52.058769"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 10], ["created_at", "2021-02-25 11:51:52.064732"], ["updated_at", "2021-02-25 11:51:52.064732"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1898)
Completed 201 Created in 1019ms (Views: 2.8ms | ActiveRecord: 21.0ms | Excon: 60.5ms | Allocations: 56168)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:52:01 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (88.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (91.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (113.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:52:03.425357"], ["updated_at", "2021-02-25 11:52:03.425357"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.439479"], ["updated_at", "2021-02-25 11:52:03.439479"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.446124"], ["updated_at", "2021-02-25 11:52:03.446124"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.453208"], ["updated_at", "2021-02-25 11:52:03.453208"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.459756"], ["updated_at", "2021-02-25 11:52:03.459756"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.465234"], ["updated_at", "2021-02-25 11:52:03.465234"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.470567"], ["updated_at", "2021-02-25 11:52:03.470567"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.475778"], ["updated_at", "2021-02-25 11:52:03.475778"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nuovo Rosso"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "mediterranean"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.481182"], ["updated_at", "2021-02-25 11:52:03.481182"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.486560"], ["updated_at", "2021-02-25 11:52:03.486560"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 11], ["created_at", "2021-02-25 11:52:03.491862"], ["updated_at", "2021-02-25 11:52:03.491862"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1898)
Completed 201 Created in 1537ms (Views: 2.7ms | ActiveRecord: 21.0ms | Excon: 293.3ms | Allocations: 68359)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 11:52:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (85.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (73.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (70.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 11:52:17.902680"], ["updated_at", "2021-02-25 11:52:17.902680"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.910385"], ["updated_at", "2021-02-25 11:52:17.910385"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.916636"], ["updated_at", "2021-02-25 11:52:17.916636"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.922729"], ["updated_at", "2021-02-25 11:52:17.922729"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.928468"], ["updated_at", "2021-02-25 11:52:17.928468"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.934240"], ["updated_at", "2021-02-25 11:52:17.934240"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.940155"], ["updated_at", "2021-02-25 11:52:17.940155"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.945795"], ["updated_at", "2021-02-25 11:52:17.945795"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nuovo Rosso"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "mediterranean"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.951360"], ["updated_at", "2021-02-25 11:52:17.951360"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.956467"], ["updated_at", "2021-02-25 11:52:17.956467"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 12], ["created_at", "2021-02-25 11:52:17.974903"], ["updated_at", "2021-02-25 11:52:17.974903"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.6ms | Allocations: 1898)
Completed 201 Created in 1823ms (Views: 2.8ms | ActiveRecord: 14.8ms | Excon: 229.1ms | Allocations: 70001)


Started POST "/api/v1/sign_up" for ::1 at 2021-02-25 14:38:07 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "registration"=>{"user"=>{"email"=>"aaaaaa@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aaaaaa@example.com"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/registrations_controller.rb:12:in `create'
Completed 422 Unprocessable Entity in 208ms (Views: 0.1ms | ActiveRecord: 4.2ms | Allocations: 14038)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 14:42:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (80.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.8ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 14:42:21.790545"], ["updated_at", "2021-02-25 14:42:21.790545"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.824357"], ["updated_at", "2021-02-25 14:42:21.824357"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.831662"], ["updated_at", "2021-02-25 14:42:21.831662"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.845954"], ["updated_at", "2021-02-25 14:42:21.845954"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.852203"], ["updated_at", "2021-02-25 14:42:21.852203"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.857953"], ["updated_at", "2021-02-25 14:42:21.857953"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.863872"], ["updated_at", "2021-02-25 14:42:21.863872"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.869743"], ["updated_at", "2021-02-25 14:42:21.869743"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.875391"], ["updated_at", "2021-02-25 14:42:21.875391"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.880469"], ["updated_at", "2021-02-25 14:42:21.880469"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 16], ["created_at", "2021-02-25 14:42:21.884123"], ["updated_at", "2021-02-25 14:42:21.884123"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.6ms | Allocations: 3475)
Completed 201 Created in 863ms (Views: 3.6ms | ActiveRecord: 30.0ms | Excon: 80.7ms | Allocations: 75374)


Started GET "/api/v1/preferences" for ::1 at 2021-02-25 14:43:55 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 1.9ms | Allocations: 1096)
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 2019)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-25 14:44:58 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1", "preference"=>{}}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.5ms | Allocations: 150)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 1447)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-25 14:48:13 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.2ms | Allocations: 85)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 1102)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-25 14:48:16 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 86)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 1117)


Started GET "/api/v1/preferences/10" for ::1 at 2021-02-25 14:48:24 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"10"}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1088)


Started GET "/api/v1/preferences/1" for ::1 at 2021-02-25 14:48:44 +0000
Processing by Api::V1::PreferencesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:45:in `set_preference'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 86)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 1117)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 15:01:46 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Passssssierre", "content"=>["Action", "Horror"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
[31mUnpermitted parameter: :content[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.6ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Passssssierre"], ["user_id", 1], ["created_at", "2021-02-25 15:01:46.868136"], ["updated_at", "2021-02-25 15:01:46.868136"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 49)
Completed 201 Created in 16ms (Views: 0.5ms | ActiveRecord: 8.0ms | Allocations: 5241)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 15:02:42 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Passssssierre", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Passssssierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 15:02:42.547940"], ["updated_at", "2021-02-25 15:02:42.547940"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 77)
Completed 201 Created in 12ms (Views: 0.4ms | ActiveRecord: 7.4ms | Allocations: 4604)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 15:04:49 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Passssssierre", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Passssssierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 15:04:49.823511"], ["updated_at", "2021-02-25 15:04:49.823511"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 77)
Completed 201 Created in 14ms (Views: 0.5ms | ActiveRecord: 7.6ms | Allocations: 4596)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 15:04:58 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"www", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "www"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 15:04:58.864900"], ["updated_at", "2021-02-25 15:04:58.864900"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.1ms | Allocations: 77)
Completed 201 Created in 12ms (Views: 0.6ms | ActiveRecord: 7.3ms | Allocations: 4594)


Started GET "/api/v1/preferences" for ::1 at 2021-02-25 15:16:36 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 1.2ms | Allocations: 1410)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 1834)


Started GET "/api/v1/preferences" for ::1 at 2021-02-25 15:17:07 +0000
Processing by Api::V1::PreferencesController#index as JSON
  Rendering api/v1/preferences/index.json.jbuilder
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences"[0m
  ↳ app/views/api/v1/preferences/index.json.jbuilder:3
  Rendered api/v1/preferences/index.json.jbuilder (Duration: 2.1ms | Allocations: 1464)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.3ms | Allocations: 2191)


Started GET "/api/v1/lunches" for ::1 at 2021-02-25 17:17:33 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 100]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 200]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 64.1ms | Allocations: 39344)
Completed 200 OK in 73ms (Views: 57.2ms | ActiveRecord: 7.7ms | Allocations: 43640)


Started GET "/api/v1/lunches/25" for ::1 at 2021-02-25 17:17:36 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"25"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1235)


Started GET "/api/v1/lunches/1" for ::1 at 2021-02-25 17:17:43 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.0ms | Allocations: 1241)
Completed 200 OK in 8ms (Views: 5.1ms | ActiveRecord: 0.3ms | Allocations: 2464)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-25 17:17:59 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[1, 4], "attendees"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
[31mUnpermitted parameter: :release[0m
Completed 500 Internal Server Error in 38ms (ActiveRecord: 4.1ms | Allocations: 13523)


  
ActiveModel::UnknownAttributeError (unknown attribute 'attendees' for Lunch.):
  
app/controllers/api/v1/lunches_controller.rb:15:in `update'
Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-25 17:18:11 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[1, 4], "taste"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
[31mUnpermitted parameters: :release, :taste[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[36mLunch Update (0.3ms)[0m  [1m[33mUPDATE "lunches" SET "distance" = $1, "updated_at" = $2 WHERE "lunches"."id" = $3[0m  [["distance", "50"], ["updated_at", "2021-02-25 17:18:11.071801"], ["id", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1155)
Completed 200 OK in 15ms (Views: 2.0ms | ActiveRecord: 7.9ms | Allocations: 7431)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-25 17:18:19 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[2, 4], "taste"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
[31mUnpermitted parameters: :release, :taste[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[36mLunch Update (0.2ms)[0m  [1m[33mUPDATE "lunches" SET "price" = $1, "updated_at" = $2 WHERE "lunches"."id" = $3[0m  [["price", "{2,4}"], ["updated_at", "2021-02-25 17:18:19.347708"], ["id", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1152)
Completed 200 OK in 17ms (Views: 2.0ms | ActiveRecord: 8.0ms | Allocations: 7112)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-25 17:18:25 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[4, 4], "taste"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
[31mUnpermitted parameters: :release, :taste[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[36mLunch Update (0.3ms)[0m  [1m[33mUPDATE "lunches" SET "price" = $1, "updated_at" = $2 WHERE "lunches"."id" = $3[0m  [["price", "{4,4}"], ["updated_at", "2021-02-25 17:18:25.104747"], ["id", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1153)
Completed 200 OK in 19ms (Views: 2.0ms | ActiveRecord: 8.3ms | Allocations: 7109)


Started PATCH "/api/v1/lunches/1" for ::1 at 2021-02-25 17:18:29 +0000
Processing by Api::V1::LunchesController#update as JSON
  Parameters: {"lunch"=>{"release"=>"Arlon", "distance"=>50, "price"=>[2, 4], "taste"=>["Pierre"]}, "id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
[31mUnpermitted parameters: :release, :taste[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[36mLunch Update (0.2ms)[0m  [1m[33mUPDATE "lunches" SET "price" = $1, "updated_at" = $2 WHERE "lunches"."id" = $3[0m  [["price", "{2,4}"], ["updated_at", "2021-02-25 17:18:29.695570"], ["id", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:15:in `update'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 1152)
Completed 200 OK in 12ms (Views: 2.0ms | ActiveRecord: 2.3ms | Allocations: 7108)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:18:37 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (132.25ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 17:18:38.646786"], ["updated_at", "2021-02-25 17:18:38.646786"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.660881"], ["updated_at", "2021-02-25 17:18:38.660881"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.678919"], ["updated_at", "2021-02-25 17:18:38.678919"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.685310"], ["updated_at", "2021-02-25 17:18:38.685310"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.691420"], ["updated_at", "2021-02-25 17:18:38.691420"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.697476"], ["updated_at", "2021-02-25 17:18:38.697476"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.703525"], ["updated_at", "2021-02-25 17:18:38.703525"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.709524"], ["updated_at", "2021-02-25 17:18:38.709524"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.715423"], ["updated_at", "2021-02-25 17:18:38.715423"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.721295"], ["updated_at", "2021-02-25 17:18:38.721295"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 17], ["created_at", "2021-02-25 17:18:38.727231"], ["updated_at", "2021-02-25 17:18:38.727231"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1898)
Completed 201 Created in 1345ms (Views: 2.8ms | ActiveRecord: 23.6ms | Excon: 132.3ms | Allocations: 64959)


Started DELETE "/api/v1/lunches/17" for ::1 at 2021-02-25 17:19:09 +0000
Processing by Api::V1::LunchesController#destroy as JSON
  Parameters: {"id"=>"17", "lunch"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:74:in `set_lunch'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/policies/lunch_policy.rb:13:in `update?'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:66:in `destroy'
  [1m[36mLunch Destroy (1.0ms)[0m  [1m[31mDELETE FROM "lunches" WHERE "lunches"."id" = $1[0m  [["id", 17]]
  ↳ app/controllers/api/v1/lunches_controller.rb:66:in `destroy'
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:66:in `destroy'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.7ms | Allocations: 6025)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "lunches" violates foreign key constraint "fk_rails_1d01fff5ba" on table "restaurants"
DETAIL:  Key (id)=(17) is still referenced from table "restaurants".
):
  
app/controllers/api/v1/lunches_controller.rb:66:in `destroy'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:29:12 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"1111", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (86.44ms)  GET https://api.yelp.com/v3/businesses/search?location=1111,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19 KB)[0m
Completed 500 Internal Server Error in 1409ms (ActiveRecord: 7.3ms | Excon: 86.5ms | Allocations: 40459)


  
NoMethodError (undefined method `rating' for #<Lunch:0x000055c3698a1470>
Did you mean?  Rational):
  
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:29:38 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"1111", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (76.82ms)  GET https://api.yelp.com/v3/businesses/search?location=1111,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19 KB)[0m
Completed 422 Unprocessable Entity in 712ms (Views: 0.2ms | ActiveRecord: 7.9ms | Excon: 76.8ms | Allocations: 33574)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:29:49 +0000
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": aaa,
    "price": [1,4],
    "attendees": ["Pierre"]
   }}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": aaa,
    "price": [1,4],
    "attendees": ["Pierre"]
   }}'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": aaa,
    "price": [1,4],
    "attendees": ["Pierre"]
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:29:55 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"sss", "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (91.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=0&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.5 KB)[0m
Completed 422 Unprocessable Entity in 773ms (Views: 0.1ms | ActiveRecord: 0.4ms | Excon: 91.6ms | Allocations: 15113)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:30:14 +0000
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": ,
    "attendees": ["Pierre"]
   }}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": ,
    "attendees": ["Pierre"]
   }}'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": ,
    "attendees": ["Pierre"]
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:30:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 2592)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:33:in `to_a'
app/controllers/api/v1/lunches_controller.rb:33:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:30:30 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.8ms | Allocations: 9900)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:33:in `to_a'
app/controllers/api/v1/lunches_controller.rb:33:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:34:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.2ms | Allocations: 9900)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:33:in `to_a'
app/controllers/api/v1/lunches_controller.rb:33:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:34:52 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (119.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
Completed 500 Internal Server Error in 752ms (ActiveRecord: 2.9ms | Excon: 119.7ms | Allocations: 28914)


  
NameError (undefined local variable or method `taste' for #<Lunch:0x00007f4378d5ed38>):
  
app/models/lunch.rb:13:in `range_pice'
app/controllers/api/v1/lunches_controller.rb:57:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:35:25 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (87.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 17:35:26.341286"], ["updated_at", "2021-02-25 17:35:26.341286"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.367549"], ["updated_at", "2021-02-25 17:35:26.367549"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.373545"], ["updated_at", "2021-02-25 17:35:26.373545"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.379249"], ["updated_at", "2021-02-25 17:35:26.379249"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.384684"], ["updated_at", "2021-02-25 17:35:26.384684"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.390022"], ["updated_at", "2021-02-25 17:35:26.390022"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.395605"], ["updated_at", "2021-02-25 17:35:26.395605"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.401283"], ["updated_at", "2021-02-25 17:35:26.401283"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.407088"], ["updated_at", "2021-02-25 17:35:26.407088"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.413252"], ["updated_at", "2021-02-25 17:35:26.413252"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 18], ["created_at", "2021-02-25 17:35:26.419423"], ["updated_at", "2021-02-25 17:35:26.419423"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.8ms | Allocations: 3360)
Completed 201 Created in 729ms (Views: 5.5ms | ActiveRecord: 28.7ms | Excon: 88.0ms | Allocations: 82667)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:35:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms | Allocations: 2583)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:33:in `to_a'
app/controllers/api/v1/lunches_controller.rb:33:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:35:39 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (94.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 17:35:40.509112"], ["updated_at", "2021-02-25 17:35:40.509112"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.515123"], ["updated_at", "2021-02-25 17:35:40.515123"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.521103"], ["updated_at", "2021-02-25 17:35:40.521103"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.527053"], ["updated_at", "2021-02-25 17:35:40.527053"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.531908"], ["updated_at", "2021-02-25 17:35:40.531908"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.535590"], ["updated_at", "2021-02-25 17:35:40.535590"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.539309"], ["updated_at", "2021-02-25 17:35:40.539309"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.542954"], ["updated_at", "2021-02-25 17:35:40.542954"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.546570"], ["updated_at", "2021-02-25 17:35:40.546570"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.550326"], ["updated_at", "2021-02-25 17:35:40.550326"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 19], ["created_at", "2021-02-25 17:35:40.554491"], ["updated_at", "2021-02-25 17:35:40.554491"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:105:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.4ms | Allocations: 1898)
Completed 201 Created in 693ms (Views: 1.6ms | ActiveRecord: 13.9ms | Excon: 94.9ms | Allocations: 56741)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:35:47 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 9], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (85.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2,3,4,5,6,7,8,9&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (156 Bytes)[0m
  [1m[34mExcon Request[0m (81.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3500&price=1,2,3,4,5,6,7,8,9&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (156 Bytes)[0m
Completed 422 Unprocessable Entity in 517ms (Views: 0.2ms | ActiveRecord: 0.2ms | Excon: 167.2ms | Allocations: 15692)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:40:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 9], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:121:in `matching_preferences'
  [1m[34mExcon Request[0m (99.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2,3,4,5,6,7,8,9&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (156 Bytes)[0m
  [1m[34mExcon Request[0m (87.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3500&price=1,2,3,4,5,6,7,8,9&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (156 Bytes)[0m
Completed 422 Unprocessable Entity in 584ms (Views: 0.2ms | ActiveRecord: 6.7ms | Excon: 187.0ms | Allocations: 33749)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:40:25 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms | Allocations: 2568)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:33:in `to_a'
app/controllers/api/v1/lunches_controller.rb:33:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:40:51 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>[]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 2.9ms | Allocations: 10392)


  
NoMethodError (undefined method `max_by' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:133:in `choice_count'
app/controllers/api/v1/lunches_controller.rb:39:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:42:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (109.39ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-25 17:42:32.783057"], ["updated_at", "2021-02-25 17:42:32.783057"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.807245"], ["updated_at", "2021-02-25 17:42:32.807245"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.813144"], ["updated_at", "2021-02-25 17:42:32.813144"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.819084"], ["updated_at", "2021-02-25 17:42:32.819084"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.824791"], ["updated_at", "2021-02-25 17:42:32.824791"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.830607"], ["updated_at", "2021-02-25 17:42:32.830607"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.836406"], ["updated_at", "2021-02-25 17:42:32.836406"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.842226"], ["updated_at", "2021-02-25 17:42:32.842226"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.848154"], ["updated_at", "2021-02-25 17:42:32.848154"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.854489"], ["updated_at", "2021-02-25 17:42:32.854489"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 20], ["created_at", "2021-02-25 17:42:32.860743"], ["updated_at", "2021-02-25 17:42:32.860743"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.5ms | Allocations: 2600)
Completed 201 Created in 746ms (Views: 4.2ms | ActiveRecord: 30.6ms | Excon: 109.4ms | Allocations: 80503)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:42:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (5121.34ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=[]&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[34mExcon Request[0m (5116.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3500&price=[]&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["user_id", 1], ["created_at", "2021-02-25 17:42:47.545492"], ["updated_at", "2021-02-25 17:42:47.545492"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
Completed 500 Internal Server Error in 10603ms (Views: 0.1ms | ActiveRecord: 1.4ms | Excon: 10238.0ms | Allocations: 18065)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:92:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:61:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:43:26 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (97.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=[]&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[34mExcon Request[0m (75.20ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3500&price=[]&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["user_id", 1], ["created_at", "2021-02-25 17:46:12.183072"], ["updated_at", "2021-02-25 17:46:12.183072"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
Completed 500 Internal Server Error in 165452ms (Views: 0.2ms | ActiveRecord: 12.6ms | Excon: 172.7ms | Allocations: 475641)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:93:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:62:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:46:15 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (92.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=[]&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[34mExcon Request[0m (97.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3500&price=[]&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["user_id", 1], ["created_at", "2021-02-25 17:46:31.839110"], ["updated_at", "2021-02-25 17:46:31.839110"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
Completed 500 Internal Server Error in 16187ms (Views: 0.1ms | ActiveRecord: 14.3ms | Excon: 190.0ms | Allocations: 169677)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:93:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:62:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:50:28 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Redirected to 
Completed 500 Internal Server Error in 9ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 9602)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:23:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:51:52 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:23: syntax error, unexpected return, expecting end
...irect_to(empty_request)  return
...                         ^~~~~~):
  
app/controllers/api/v1/lunches_controller.rb:23: syntax error, unexpected return, expecting end
app/controllers/api/v1/lunches_controller.rb:23: syntax error, unexpected return, expecting end
app/controllers/api/v1/lunches_controller.rb:23: syntax error, unexpected return, expecting end
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:52:31 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Redirected to 
Completed 500 Internal Server Error in 15ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 9701)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api/v1/lunches_controller.rb:24:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:53:54 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 15ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 9652)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:54:22 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 9827)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:54:41 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (107.87ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 17:54:41.762485"], ["updated_at", "2021-02-25 17:54:41.762485"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.788068"], ["updated_at", "2021-02-25 17:54:41.788068"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.794357"], ["updated_at", "2021-02-25 17:54:41.794357"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (1.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.800492"], ["updated_at", "2021-02-25 17:54:41.800492"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.819504"], ["updated_at", "2021-02-25 17:54:41.819504"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.825802"], ["updated_at", "2021-02-25 17:54:41.825802"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.831729"], ["updated_at", "2021-02-25 17:54:41.831729"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.837715"], ["updated_at", "2021-02-25 17:54:41.837715"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.844338"], ["updated_at", "2021-02-25 17:54:41.844338"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.850594"], ["updated_at", "2021-02-25 17:54:41.850594"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 24], ["created_at", "2021-02-25 17:54:41.856540"], ["updated_at", "2021-02-25 17:54:41.856540"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.5ms | Allocations: 2600)
Completed 201 Created in 788ms (Views: 4.0ms | ActiveRecord: 28.4ms | Excon: 107.9ms | Allocations: 81559)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 17:54:48 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (91.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 17:54:49.499503"], ["updated_at", "2021-02-25 17:54:49.499503"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.513440"], ["updated_at", "2021-02-25 17:54:49.513440"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.519468"], ["updated_at", "2021-02-25 17:54:49.519468"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.525250"], ["updated_at", "2021-02-25 17:54:49.525250"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.531172"], ["updated_at", "2021-02-25 17:54:49.531172"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.537234"], ["updated_at", "2021-02-25 17:54:49.537234"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.543295"], ["updated_at", "2021-02-25 17:54:49.543295"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.549357"], ["updated_at", "2021-02-25 17:54:49.549357"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.555377"], ["updated_at", "2021-02-25 17:54:49.555377"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.571187"], ["updated_at", "2021-02-25 17:54:49.571187"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 25], ["created_at", "2021-02-25 17:54:49.577279"], ["updated_at", "2021-02-25 17:54:49.577279"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1892)
Completed 201 Created in 798ms (Views: 2.7ms | ActiveRecord: 21.1ms | Excon: 91.6ms | Allocations: 55451)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:04:56 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (92.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[36mLunch Create (0.7ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:04:57.393466"], ["updated_at", "2021-02-25 18:04:57.393466"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.406307"], ["updated_at", "2021-02-25 18:04:57.406307"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.412612"], ["updated_at", "2021-02-25 18:04:57.412612"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.418682"], ["updated_at", "2021-02-25 18:04:57.418682"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.428209"], ["updated_at", "2021-02-25 18:04:57.428209"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.439249"], ["updated_at", "2021-02-25 18:04:57.439249"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.449084"], ["updated_at", "2021-02-25 18:04:57.449084"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.456975"], ["updated_at", "2021-02-25 18:04:57.456975"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.463200"], ["updated_at", "2021-02-25 18:04:57.463200"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.471187"], ["updated_at", "2021-02-25 18:04:57.471187"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 26], ["created_at", "2021-02-25 18:04:57.479527"], ["updated_at", "2021-02-25 18:04:57.479527"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.2ms | Allocations: 1895)
Completed 201 Created in 931ms (Views: 4.2ms | ActiveRecord: 15.8ms | Excon: 92.9ms | Allocations: 54846)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:06:24 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (96.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:06:25.478879"], ["updated_at", "2021-02-25 18:06:25.478879"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.493809"], ["updated_at", "2021-02-25 18:06:25.493809"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.500648"], ["updated_at", "2021-02-25 18:06:25.500648"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.507133"], ["updated_at", "2021-02-25 18:06:25.507133"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.513368"], ["updated_at", "2021-02-25 18:06:25.513368"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.519745"], ["updated_at", "2021-02-25 18:06:25.519745"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.526088"], ["updated_at", "2021-02-25 18:06:25.526088"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.532338"], ["updated_at", "2021-02-25 18:06:25.532338"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.538700"], ["updated_at", "2021-02-25 18:06:25.538700"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.545369"], ["updated_at", "2021-02-25 18:06:25.545369"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 27], ["created_at", "2021-02-25 18:06:25.551136"], ["updated_at", "2021-02-25 18:06:25.551136"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1892)
Completed 201 Created in 652ms (Views: 2.7ms | ActiveRecord: 21.2ms | Excon: 96.3ms | Allocations: 52783)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:07:00 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (86.37ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:64:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:07:01.249395"], ["updated_at", "2021-02-25 18:07:01.249395"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:64:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:64:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.270164"], ["updated_at", "2021-02-25 18:07:01.270164"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.274546"], ["updated_at", "2021-02-25 18:07:01.274546"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.278584"], ["updated_at", "2021-02-25 18:07:01.278584"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.282138"], ["updated_at", "2021-02-25 18:07:01.282138"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.288060"], ["updated_at", "2021-02-25 18:07:01.288060"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.294529"], ["updated_at", "2021-02-25 18:07:01.294529"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.300860"], ["updated_at", "2021-02-25 18:07:01.300860"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.307994"], ["updated_at", "2021-02-25 18:07:01.307994"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.314646"], ["updated_at", "2021-02-25 18:07:01.314646"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 28], ["created_at", "2021-02-25 18:07:01.321332"], ["updated_at", "2021-02-25 18:07:01.321332"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.4ms | Allocations: 2594)
Completed 201 Created in 746ms (Views: 4.0ms | ActiveRecord: 30.7ms | Excon: 86.4ms | Allocations: 80793)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:07:05 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2489)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:07:17 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 9828)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:07:39 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 20301ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 134203)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:08:27 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.9ms | Allocations: 10045)


  
Pundit::NotDefinedError (unable to find policy `NilClassPolicy` for `nil`):
  
app/controllers/api/v1/lunches_controller.rb:31:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:09:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 2.9ms | Allocations: 10121)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:91:in `render_error'
app/controllers/api/v1/lunches_controller.rb:32:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:09:33 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 27ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 9830)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:10:44 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 9843)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:12:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 9830)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:12:30 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.8ms | Allocations: 9900)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:41:in `to_a'
app/controllers/api/v1/lunches_controller.rb:41:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:12:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (156.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:64:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:12:33.561229"], ["updated_at", "2021-02-25 18:12:33.561229"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:64:in `create'
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:64:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.586664"], ["updated_at", "2021-02-25 18:12:33.586664"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.593147"], ["updated_at", "2021-02-25 18:12:33.593147"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.599397"], ["updated_at", "2021-02-25 18:12:33.599397"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.605732"], ["updated_at", "2021-02-25 18:12:33.605732"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.612198"], ["updated_at", "2021-02-25 18:12:33.612198"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.618605"], ["updated_at", "2021-02-25 18:12:33.618605"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.624952"], ["updated_at", "2021-02-25 18:12:33.624952"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.630114"], ["updated_at", "2021-02-25 18:12:33.630114"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.633861"], ["updated_at", "2021-02-25 18:12:33.633861"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 29], ["created_at", "2021-02-25 18:12:33.638026"], ["updated_at", "2021-02-25 18:12:33.638026"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.2ms | Allocations: 2594)
Completed 201 Created in 841ms (Views: 2.4ms | ActiveRecord: 28.4ms | Excon: 157.0ms | Allocations: 72985)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:13:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:127:in `matching_preferences'
  [1m[34mExcon Request[0m (97.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:13:58.591615"], ["updated_at", "2021-02-25 18:13:58.591615"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.617583"], ["updated_at", "2021-02-25 18:13:58.617583"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.623984"], ["updated_at", "2021-02-25 18:13:58.623984"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.630049"], ["updated_at", "2021-02-25 18:13:58.630049"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.636075"], ["updated_at", "2021-02-25 18:13:58.636075"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.642243"], ["updated_at", "2021-02-25 18:13:58.642243"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.648103"], ["updated_at", "2021-02-25 18:13:58.648103"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.654585"], ["updated_at", "2021-02-25 18:13:58.654585"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.660970"], ["updated_at", "2021-02-25 18:13:58.660970"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.667453"], ["updated_at", "2021-02-25 18:13:58.667453"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 30], ["created_at", "2021-02-25 18:13:58.695594"], ["updated_at", "2021-02-25 18:13:58.695594"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.2ms | Allocations: 2595)
Completed 201 Created in 775ms (Views: 2.5ms | ActiveRecord: 30.2ms | Excon: 97.4ms | Allocations: 80174)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:14:02 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2489)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:19:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.9ms | Allocations: 10826)


  
NameError (uninitialized constant ApplicationController::ApiExceptions):
  
app/controllers/application_controller.rb:4:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:19:09 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (104.33ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:19:10.176633"], ["updated_at", "2021-02-25 18:19:10.176633"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.202261"], ["updated_at", "2021-02-25 18:19:10.202261"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.208473"], ["updated_at", "2021-02-25 18:19:10.208473"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.214379"], ["updated_at", "2021-02-25 18:19:10.214379"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.219955"], ["updated_at", "2021-02-25 18:19:10.219955"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.225465"], ["updated_at", "2021-02-25 18:19:10.225465"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.231477"], ["updated_at", "2021-02-25 18:19:10.231477"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.237049"], ["updated_at", "2021-02-25 18:19:10.237049"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.243042"], ["updated_at", "2021-02-25 18:19:10.243042"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.248638"], ["updated_at", "2021-02-25 18:19:10.248638"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 31], ["created_at", "2021-02-25 18:19:10.254361"], ["updated_at", "2021-02-25 18:19:10.254361"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.8ms | Allocations: 2594)
Completed 201 Created in 718ms (Views: 4.4ms | ActiveRecord: 26.9ms | Excon: 104.3ms | Allocations: 73953)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:19:25 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 2.8ms | Allocations: 10801)


  
NameError (uninitialized constant ApplicationController::ApiExceptions):
  
app/controllers/application_controller.rb:4:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:20:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 14ms (ActiveRecord: 3.3ms | Allocations: 10582)


  
NameError (uninitialized constant Api::ErrorHandler):
  
app/controllers/application_controller.rb:4:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:20:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (105.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:20:50.747804"], ["updated_at", "2021-02-25 18:20:50.747804"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.769086"], ["updated_at", "2021-02-25 18:20:50.769086"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.775130"], ["updated_at", "2021-02-25 18:20:50.775130"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.780853"], ["updated_at", "2021-02-25 18:20:50.780853"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.786375"], ["updated_at", "2021-02-25 18:20:50.786375"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.792364"], ["updated_at", "2021-02-25 18:20:50.792364"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.799776"], ["updated_at", "2021-02-25 18:20:50.799776"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.821786"], ["updated_at", "2021-02-25 18:20:50.821786"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.827576"], ["updated_at", "2021-02-25 18:20:50.827576"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.831530"], ["updated_at", "2021-02-25 18:20:50.831530"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 32], ["created_at", "2021-02-25 18:20:50.835069"], ["updated_at", "2021-02-25 18:20:50.835069"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.1ms | Allocations: 2594)
Completed 201 Created in 819ms (Views: 2.2ms | ActiveRecord: 23.3ms | Excon: 105.2ms | Allocations: 73389)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:39:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:47:57 +0000
Completed 500 Internal Server Error in 518612ms (ActiveRecord: 0.5ms | Allocations: 1585076)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:39:in `to_a'
app/controllers/api/v1/lunches_controller.rb:39:in `create'
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
No template found for Api::V1::LunchesController#create, rendering head :no_content
Completed 500 Internal Server Error in 18ms (ActiveRecord: 3.0ms | Allocations: 11657)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:48:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
No template found for Api::V1::LunchesController#create, rendering head :no_content
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.9ms | Allocations: 9844)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:48:54 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
No template found for Api::V1::LunchesController#create, rendering head :no_content
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.8ms | Allocations: 9844)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:49:22 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
No template found for Api::V1::LunchesController#create, rendering head :no_content
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.7ms | Allocations: 9847)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:51:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.0ms | Allocations: 9898)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:37:in `to_a'
app/controllers/api/v1/lunches_controller.rb:37:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:51:55 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:124:in `matching_preferences'
  [1m[34mExcon Request[0m (99.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:51:55.958158"], ["updated_at", "2021-02-25 18:51:55.958158"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:55.981349"], ["updated_at", "2021-02-25 18:51:55.981349"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:55.988623"], ["updated_at", "2021-02-25 18:51:55.988623"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:55.994938"], ["updated_at", "2021-02-25 18:51:55.994938"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.000483"], ["updated_at", "2021-02-25 18:51:56.000483"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.007224"], ["updated_at", "2021-02-25 18:51:56.007224"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.012975"], ["updated_at", "2021-02-25 18:51:56.012975"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.018652"], ["updated_at", "2021-02-25 18:51:56.018652"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.024209"], ["updated_at", "2021-02-25 18:51:56.024209"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.029733"], ["updated_at", "2021-02-25 18:51:56.029733"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 33], ["created_at", "2021-02-25 18:51:56.035196"], ["updated_at", "2021-02-25 18:51:56.035196"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2597)
Completed 201 Created in 853ms (Views: 3.8ms | ActiveRecord: 26.2ms | Excon: 99.3ms | Allocations: 73215)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:52:17 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (96.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (15.1 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1}"], ["user_id", 1], ["created_at", "2021-02-25 18:52:17.940145"], ["updated_at", "2021-02-25 18:52:17.940145"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:17.965864"], ["updated_at", "2021-02-25 18:52:17.965864"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Nonno"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:17.972285"], ["updated_at", "2021-02-25 18:52:17.972285"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Oggi Pasta"], ["restaurant_price", "€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:17.978450"], ["updated_at", "2021-02-25 18:52:17.978450"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "IIT Molto Tasty"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:17.984575"], ["updated_at", "2021-02-25 18:52:17.984575"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Queen"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:17.990943"], ["updated_at", "2021-02-25 18:52:17.990943"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Acqua e Farina"], ["restaurant_price", "€"], ["restaurant_city", "Woluwe-Saint-Lambert"], ["restaurant_category", "pizza"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:17.997628"], ["updated_at", "2021-02-25 18:52:17.997628"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Giulio's Tavola"], ["restaurant_price", "€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:18.004260"], ["updated_at", "2021-02-25 18:52:18.004260"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pizza Boom"], ["restaurant_price", "€"], ["restaurant_city", "Schaerbeek"], ["restaurant_category", "pizza"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:18.010610"], ["updated_at", "2021-02-25 18:52:18.010610"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Natura"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "breakfast_brunch"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:18.035228"], ["updated_at", "2021-02-25 18:52:18.035228"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Season Box"], ["restaurant_price", "€"], ["restaurant_city", "Brussels"], ["restaurant_category", "hotdogs"], ["lunch_id", 34], ["created_at", "2021-02-25 18:52:18.041767"], ["updated_at", "2021-02-25 18:52:18.041767"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.1ms | Allocations: 2594)
Completed 201 Created in 848ms (Views: 2.3ms | ActiveRecord: 28.8ms | Excon: 96.3ms | Allocations: 80736)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:52:21 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
No template found for Api::V1::LunchesController#create, rendering head :no_content
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 2508)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:52:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
No template found for Api::V1::LunchesController#create, rendering head :no_content
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 9844)


  
Pundit::AuthorizationNotPerformedError (Api::V1::LunchesController):
  
pundit (2.1.0) lib/pundit.rb:192:in `verify_authorized'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:136:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:54:45 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.9ms | Allocations: 9898)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:38:in `to_a'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:55:13 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.9ms | Allocations: 9898)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:38:in `to_a'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:55:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 13ms (ActiveRecord: 3.0ms | Allocations: 9898)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:38:in `to_a'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:55:59 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 21ms (ActiveRecord: 3.9ms | Allocations: 9912)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:38:in `to_a'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:56:07 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 9898)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:38:in `to_a'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:56:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 9898)


  
RangeError (cannot convert endless range to an array):
  
app/controllers/api/v1/lunches_controller.rb:38:in `to_a'
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:58:03 +0000
  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/api/v1/lunches_controller.rb:6:in `[]'
app/controllers/api/v1/lunches_controller.rb:6:in `<class:LunchesController>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:58:36 +0000
  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/api/v1/lunches_controller.rb:6:in `[]'
app/controllers/api/v1/lunches_controller.rb:6:in `<class:LunchesController>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 18:59:06 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :user_not_authorized rendered or redirected
Completed 404 Not Found in 15ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 9362)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:00:01 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.9ms | Allocations: 9418)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/controllers/api/v1/base_controller.rb:12:in `user_not_authorized'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:00:13 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 145ms (ActiveRecord: 3.2ms | Allocations: 124734)


  
NameError (undefined local variable or method `empty_array' for #<Api::V1::LunchesController:0x00007f4384ad7428>
Did you mean?  empy_array):
  
app/controllers/api/v1/lunches_controller.rb:172:in `controller_validation'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:00:26 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 2.9ms | Allocations: 9696)


  
ArgumentError (Unrecognized status code :error):
  
app/controllers/api/v1/base_controller.rb:27:in `empty_array'
app/controllers/api/v1/lunches_controller.rb:172:in `controller_validation'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:00:37 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 14ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 9355)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:01:07 +0000
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": ,
    "attendees": ["Pierre"]
   }}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": ,
    "attendees": ["Pierre"]
   }}'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": ,
    "attendees": ["Pierre"]
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:01:20 +0000
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": [],
    "attendees": 
   }}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": [],
    "attendees": 
   }}'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": [],
    "attendees": 
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:01:25 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 8856)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:01:41 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 10ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 9318)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:01:45 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", ""]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.5ms | Allocations: 5833)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:03:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", ""]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.7ms | Allocations: 13248)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:03:28 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", ""]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 2.6ms | Allocations: 13248)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:03:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["a"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "a"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.4ms | Allocations: 4005)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:03:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (96.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:03:43.875583"], ["updated_at", "2021-02-25 19:03:43.875583"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.899980"], ["updated_at", "2021-02-25 19:03:43.899980"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.906287"], ["updated_at", "2021-02-25 19:03:43.906287"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.911678"], ["updated_at", "2021-02-25 19:03:43.911678"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.917166"], ["updated_at", "2021-02-25 19:03:43.917166"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.923420"], ["updated_at", "2021-02-25 19:03:43.923420"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.928985"], ["updated_at", "2021-02-25 19:03:43.928985"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.934504"], ["updated_at", "2021-02-25 19:03:43.934504"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.939882"], ["updated_at", "2021-02-25 19:03:43.939882"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.945264"], ["updated_at", "2021-02-25 19:03:43.945264"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 35], ["created_at", "2021-02-25 19:03:43.950661"], ["updated_at", "2021-02-25 19:03:43.950661"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 2600)
Completed 201 Created in 857ms (Views: 3.7ms | ActiveRecord: 24.6ms | Excon: 96.0ms | Allocations: 74688)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:04:09 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 21ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 9356)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:04:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2034)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:05:08 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:05:49 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": 35000,
    "price": [1,2],
    "attendees": ['pierre']
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:05:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (74.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:05:58.262205"], ["updated_at", "2021-02-25 19:05:58.262205"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.287685"], ["updated_at", "2021-02-25 19:05:58.287685"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.295045"], ["updated_at", "2021-02-25 19:05:58.295045"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.300472"], ["updated_at", "2021-02-25 19:05:58.300472"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.305785"], ["updated_at", "2021-02-25 19:05:58.305785"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.311142"], ["updated_at", "2021-02-25 19:05:58.311142"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.316615"], ["updated_at", "2021-02-25 19:05:58.316615"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.321946"], ["updated_at", "2021-02-25 19:05:58.321946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.327248"], ["updated_at", "2021-02-25 19:05:58.327248"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.332507"], ["updated_at", "2021-02-25 19:05:58.332507"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 36], ["created_at", "2021-02-25 19:05:58.337766"], ["updated_at", "2021-02-25 19:05:58.337766"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.1ms | Allocations: 2600)
Completed 201 Created in 745ms (Views: 3.5ms | ActiveRecord: 30.7ms | Excon: 74.0ms | Allocations: 82099)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:06:05 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2032)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:06:20 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:09 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:20 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 20ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 8966)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:29 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:35 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:42 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:46 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:52 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (113.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:07:53.498048"], ["updated_at", "2021-02-25 19:07:53.498048"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.522664"], ["updated_at", "2021-02-25 19:07:53.522664"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.528880"], ["updated_at", "2021-02-25 19:07:53.528880"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.534954"], ["updated_at", "2021-02-25 19:07:53.534954"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.540776"], ["updated_at", "2021-02-25 19:07:53.540776"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.546585"], ["updated_at", "2021-02-25 19:07:53.546585"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.552505"], ["updated_at", "2021-02-25 19:07:53.552505"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.558220"], ["updated_at", "2021-02-25 19:07:53.558220"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.564181"], ["updated_at", "2021-02-25 19:07:53.564181"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.570106"], ["updated_at", "2021-02-25 19:07:53.570106"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 37], ["created_at", "2021-02-25 19:07:53.576247"], ["updated_at", "2021-02-25 19:07:53.576247"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 2600)
Completed 201 Created in 855ms (Views: 3.6ms | ActiveRecord: 30.1ms | Excon: 113.0ms | Allocations: 80565)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:07:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2032)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:08:01 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2031)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:08:02 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 2031)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:08:08 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (94.51ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:08:09.117436"], ["updated_at", "2021-02-25 19:08:09.117436"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.142323"], ["updated_at", "2021-02-25 19:08:09.142323"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.149306"], ["updated_at", "2021-02-25 19:08:09.149306"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.155754"], ["updated_at", "2021-02-25 19:08:09.155754"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.162069"], ["updated_at", "2021-02-25 19:08:09.162069"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.168322"], ["updated_at", "2021-02-25 19:08:09.168322"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.173797"], ["updated_at", "2021-02-25 19:08:09.173797"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.179937"], ["updated_at", "2021-02-25 19:08:09.179937"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.186271"], ["updated_at", "2021-02-25 19:08:09.186271"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.191940"], ["updated_at", "2021-02-25 19:08:09.191940"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 38], ["created_at", "2021-02-25 19:08:09.197645"], ["updated_at", "2021-02-25 19:08:09.197645"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1898)
Completed 201 Created in 788ms (Views: 2.7ms | ActiveRecord: 20.0ms | Excon: 94.5ms | Allocations: 56462)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:08:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", ""]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms | Allocations: 4092)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:08:34 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:08:56 +0000
  
NameError (undefined local variable or method `nil_attendees_array' for main:Object):
  
app/controllers/api/v1/base_controller.rb:38:in `<main>'
app/controllers/api/v1/lunches_controller.rb:2:in `<main>'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:09:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", ""]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 2.8ms | Allocations: 13366)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:09:58 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:11:17 +0000
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", ""]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
Completed 500 Internal Server Error in 86950ms (ActiveRecord: 3.1ms | Allocations: 708041)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
app/controllers/api/v1/lunches_controller.rb:42:in `create'
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 11ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 9531)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:11:57 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:173: syntax error, unexpected [, expecting then or ';' or '\n'
... lunch_params["attendees"].== [""]
...                              ^):
  
app/controllers/api/v1/lunches_controller.rb:173: syntax error, unexpected [, expecting then or ';' or '\n'
app/controllers/api/v1/lunches_controller.rb:173: syntax error, unexpected [, expecting then or ';' or '\n'
app/controllers/api/v1/lunches_controller.rb:173: syntax error, unexpected [, expecting then or ';' or '\n'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:12:06 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 10ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 9535)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:12:20 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"a", "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2120)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:12:27 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"a", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (107.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=0&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.4 KB)[0m
Completed 422 Unprocessable Entity in 775ms (Views: 0.1ms | ActiveRecord: 5.8ms | Excon: 107.5ms | Allocations: 26302)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:13:06 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>9999999999, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (86.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=9999999999&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (148 Bytes)[0m
  [1m[34mExcon Request[0m (91.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=999999999&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (146 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "9999999999"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:13:06.948022"], ["updated_at", "2021-02-25 19:13:06.948022"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
Completed 500 Internal Server Error in 556ms (ActiveRecord: 15.3ms | Excon: 177.4ms | Allocations: 35986)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:93:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:62:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:13:23 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (70.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (86.79ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (69.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
Completed 422 Unprocessable Entity in 1558ms (Views: 0.2ms | ActiveRecord: 0.3ms | Excon: 226.5ms | Allocations: 28900)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:13:41 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (132.67ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:13:41.817866"], ["updated_at", "2021-02-25 19:13:41.817866"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.850455"], ["updated_at", "2021-02-25 19:13:41.850455"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.857009"], ["updated_at", "2021-02-25 19:13:41.857009"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.862998"], ["updated_at", "2021-02-25 19:13:41.862998"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.868998"], ["updated_at", "2021-02-25 19:13:41.868998"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.874889"], ["updated_at", "2021-02-25 19:13:41.874889"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.880835"], ["updated_at", "2021-02-25 19:13:41.880835"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.886796"], ["updated_at", "2021-02-25 19:13:41.886796"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.892392"], ["updated_at", "2021-02-25 19:13:41.892392"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.898569"], ["updated_at", "2021-02-25 19:13:41.898569"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 40], ["created_at", "2021-02-25 19:13:41.904843"], ["updated_at", "2021-02-25 19:13:41.904843"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.3ms | Allocations: 2600)
Completed 201 Created in 660ms (Views: 4.6ms | ActiveRecord: 24.1ms | Excon: 132.7ms | Allocations: 65194)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:13:46 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>9999999999999999, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (89.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=9999999999999999&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (160 Bytes)[0m
  [1m[34mExcon Request[0m (89.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=999999999999999&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (158 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "9999999999999999"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:13:47.023111"], ["updated_at", "2021-02-25 19:13:47.023111"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
Completed 500 Internal Server Error in 529ms (ActiveRecord: 2.0ms | Excon: 179.7ms | Allocations: 18105)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:93:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:62:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:18:18 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (97.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (5100.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (89.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
Completed 422 Unprocessable Entity in 6732ms (Views: 0.2ms | ActiveRecord: 7.8ms | Excon: 5287.1ms | Allocations: 48482)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:18:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (96.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (77.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (75.91ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:18:44.867080"], ["updated_at", "2021-02-25 19:18:44.867080"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.915936"], ["updated_at", "2021-02-25 19:18:44.915936"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.922962"], ["updated_at", "2021-02-25 19:18:44.922962"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.928600"], ["updated_at", "2021-02-25 19:18:44.928600"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.934693"], ["updated_at", "2021-02-25 19:18:44.934693"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.940335"], ["updated_at", "2021-02-25 19:18:44.940335"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.946163"], ["updated_at", "2021-02-25 19:18:44.946163"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.952510"], ["updated_at", "2021-02-25 19:18:44.952510"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.958359"], ["updated_at", "2021-02-25 19:18:44.958359"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.964180"], ["updated_at", "2021-02-25 19:18:44.964180"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 42], ["created_at", "2021-02-25 19:18:44.969499"], ["updated_at", "2021-02-25 19:18:44.969499"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 2602)
Completed 201 Created in 1562ms (Views: 3.1ms | ActiveRecord: 22.6ms | Excon: 249.9ms | Allocations: 94652)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:18:50 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>9999999999, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1949)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:18:59 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"aaaa", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms | Allocations: 2230)


  
ArgumentError (comparison of String with 39999 failed):
  
app/controllers/api/v1/lunches_controller.rb:171:in `>'
app/controllers/api/v1/lunches_controller.rb:171:in `controller_validation'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:19:40 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"aaaa", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (91.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=0&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "aaaa"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:20:23.305976"], ["updated_at", "2021-02-25 19:20:23.305976"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.324104"], ["updated_at", "2021-02-25 19:20:23.324104"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.327898"], ["updated_at", "2021-02-25 19:20:23.327898"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.331750"], ["updated_at", "2021-02-25 19:20:23.331750"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.335704"], ["updated_at", "2021-02-25 19:20:23.335704"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.339553"], ["updated_at", "2021-02-25 19:20:23.339553"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.343359"], ["updated_at", "2021-02-25 19:20:23.343359"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.347192"], ["updated_at", "2021-02-25 19:20:23.347192"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.350825"], ["updated_at", "2021-02-25 19:20:23.350825"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Momo"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.355958"], ["updated_at", "2021-02-25 19:20:23.355958"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 43], ["created_at", "2021-02-25 19:20:23.363421"], ["updated_at", "2021-02-25 19:20:23.363421"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.4ms | Allocations: 2602)
Completed 201 Created in 42479ms (Views: 3.9ms | ActiveRecord: 27.0ms | Excon: 92.0ms | Allocations: 142956)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:20:54 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (84.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (114.66ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (79.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:20:56.100904"], ["updated_at", "2021-02-25 19:20:56.100904"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.127451"], ["updated_at", "2021-02-25 19:20:56.127451"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.134510"], ["updated_at", "2021-02-25 19:20:56.134510"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.141284"], ["updated_at", "2021-02-25 19:20:56.141284"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.147420"], ["updated_at", "2021-02-25 19:20:56.147420"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.153806"], ["updated_at", "2021-02-25 19:20:56.153806"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.159454"], ["updated_at", "2021-02-25 19:20:56.159454"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.164597"], ["updated_at", "2021-02-25 19:20:56.164597"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.170080"], ["updated_at", "2021-02-25 19:20:56.170080"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.176009"], ["updated_at", "2021-02-25 19:20:56.176009"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 44], ["created_at", "2021-02-25 19:20:56.181704"], ["updated_at", "2021-02-25 19:20:56.181704"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2602)
Completed 201 Created in 1590ms (Views: 3.8ms | ActiveRecord: 27.8ms | Excon: 278.5ms | Allocations: 103836)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:21:02 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"aaaa", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 2234)


  
ArgumentError (comparison of String with 39999 failed):
  
app/controllers/api/v1/lunches_controller.rb:171:in `>'
app/controllers/api/v1/lunches_controller.rb:171:in `controller_validation'
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:21:32 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"aaaa", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 10ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 9355)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:21:38 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (107.06ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (80.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (88.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:22:12.036327"], ["updated_at", "2021-02-25 19:22:12.036327"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.062473"], ["updated_at", "2021-02-25 19:22:12.062473"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.068462"], ["updated_at", "2021-02-25 19:22:12.068462"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.074216"], ["updated_at", "2021-02-25 19:22:12.074216"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.079911"], ["updated_at", "2021-02-25 19:22:12.079911"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.085877"], ["updated_at", "2021-02-25 19:22:12.085877"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.092181"], ["updated_at", "2021-02-25 19:22:12.092181"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.097875"], ["updated_at", "2021-02-25 19:22:12.097875"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.103755"], ["updated_at", "2021-02-25 19:22:12.103755"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.109600"], ["updated_at", "2021-02-25 19:22:12.109600"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 45], ["created_at", "2021-02-25 19:22:12.115384"], ["updated_at", "2021-02-25 19:22:12.115384"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2602)
Completed 201 Created in 33362ms (Views: 3.7ms | ActiveRecord: 25.8ms | Excon: 276.1ms | Allocations: 131190)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:22:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.7ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (89.86ms)  GET https://api.yelp.com/v3/businesses/search?location=,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (100.32ms)  GET https://api.yelp.com/v3/businesses/search?location=,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (12.5 KB)[0m
Completed 422 Unprocessable Entity in 16092ms (Views: 0.1ms | ActiveRecord: 0.9ms | Excon: 190.2ms | Allocations: 152409)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:22:43 +0000
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": ,
    "distance":50,
    "price": [1,2],
    "attendees": ["Pierre"]
   }}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "lunch": {
    "localisation": ,
    "distance":50,
    "price": [1,2],
    "attendees": ["Pierre"]
   }}'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": ,
    "distance":50,
    "price": [1,2],
    "attendees": ["Pierre"]
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:22:51 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"222", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (91.29ms)  GET https://api.yelp.com/v3/businesses/search?location=222,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (59.41ms)  GET https://api.yelp.com/v3/businesses/search?location=222,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (71.01ms)  GET https://api.yelp.com/v3/businesses/search?location=222,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.1 KB)[0m
Completed 422 Unprocessable Entity in 2521ms (Views: 0.1ms | ActiveRecord: 5.4ms | Excon: 221.7ms | Allocations: 47748)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:22:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"aaaaa", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (86.57ms)  GET https://api.yelp.com/v3/businesses/search?location=aaaaa,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (116 Bytes)[0m
  [1m[34mExcon Request[0m (93.10ms)  GET https://api.yelp.com/v3/businesses/search?location=aaaaa,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (116 Bytes)[0m
  [1m[34mExcon Request[0m (244.18ms)  GET https://api.yelp.com/v3/businesses/search?location=aaaaa,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (15.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "aaaaa"], ["distance", "50"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:23:00.105994"], ["updated_at", "2021-02-25 19:23:00.105994"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Red Rose"], ["restaurant_price", "$$"], ["restaurant_city", "Springfield"], ["restaurant_category", "pizza"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.124505"], ["updated_at", "2021-02-25 19:23:00.124505"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Frigo Gourmet Foods"], ["restaurant_price", "$"], ["restaurant_city", "Springfield"], ["restaurant_category", "delis"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.128149"], ["updated_at", "2021-02-25 19:23:00.128149"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Fiorentina Pastry Shop"], ["restaurant_price", "$"], ["restaurant_city", "Springfield"], ["restaurant_category", "bakeries"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.131667"], ["updated_at", "2021-02-25 19:23:00.131667"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Family Pizzeria and Restaurant"], ["restaurant_price", "$$"], ["restaurant_city", "Springfield"], ["restaurant_category", "pizza"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.135643"], ["updated_at", "2021-02-25 19:23:00.135643"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Tony's Pizza"], ["restaurant_price", "$$"], ["restaurant_city", "Springfield"], ["restaurant_category", "pizza"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.139213"], ["updated_at", "2021-02-25 19:23:00.139213"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Typical Sicilian"], ["restaurant_price", "$$"], ["restaurant_city", "Springfield"], ["restaurant_category", "italian"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.142611"], ["updated_at", "2021-02-25 19:23:00.142611"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ciro's"], ["restaurant_price", "$$"], ["restaurant_city", "Springfield"], ["restaurant_category", "italian"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.145940"], ["updated_at", "2021-02-25 19:23:00.145940"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "350 Grill"], ["restaurant_price", "$$"], ["restaurant_city", "Springfield"], ["restaurant_category", "newamerican"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.149629"], ["updated_at", "2021-02-25 19:23:00.149629"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "John's Pizzeria & Restaurant"], ["restaurant_price", "$$"], ["restaurant_city", "Chicopee"], ["restaurant_category", "pizza"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.153420"], ["updated_at", "2021-02-25 19:23:00.153420"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Palazzo Cafe"], ["restaurant_price", "$"], ["restaurant_city", "Springfield"], ["restaurant_category", "italian"], ["lunch_id", 46], ["created_at", "2021-02-25 19:23:00.157198"], ["updated_at", "2021-02-25 19:23:00.157198"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 2609)
Completed 201 Created in 2330ms (Views: 2.0ms | ActiveRecord: 21.0ms | Excon: 423.9ms | Allocations: 76171)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:23:12 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>[""]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2295)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:23:30 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
Completed 422 Unprocessable Entity in 8ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 6170)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:23:35 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"Pierre", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Pierre"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 5422)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:23:39 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"pierre", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "pierre"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
Completed 422 Unprocessable Entity in 42ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 5407)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:23:46 +0000
Error occurred while parsing request parameters.
Contents:

{ "preference": { 
        "name": "www",
        "taste": 
       } }
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "preference": { 
        "name": "www",
        "taste": 
       } }'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "preference": { 
        "name": "www",
        "taste": 
       } }
Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:23:50 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"www", "taste"=>[]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "www"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
Completed 422 Unprocessable Entity in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 5392)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:23:55 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"aaaa", "taste"=>[]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "aaaa"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[36mPreference Create (0.4ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "aaaa"], ["user_id", 1], ["created_at", "2021-02-25 19:23:55.587950"], ["updated_at", "2021-02-25 19:23:55.587950"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:28:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.5ms | Allocations: 124)
Completed 201 Created in 11ms (Views: 1.6ms | ActiveRecord: 1.8ms | Allocations: 6151)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:29:09 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"www", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 102ms (ActiveRecord: 1.8ms | Allocations: 67825)


  
NoMethodError (undefined method `controller_validation' for #<Api::V1::PreferencesController:0x00007f4388593468>
Did you mean?  controller_validationtaste):
  
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:181:in `block (2 levels) in halting_and_conditional'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:29:39 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"www", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 102ms (ActiveRecord: 2.1ms | Allocations: 67835)


  
NoMethodError (undefined method `controller_validation' for #<Api::V1::PreferencesController:0x00007f43846005d0>
Did you mean?  controller_validationtaste):
  
activesupport (6.0.3.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:181:in `block (2 levels) in halting_and_conditional'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.3.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.3.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.3.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.3.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:29:54 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"www", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
  [1m[36mPreference Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "www"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
Completed 422 Unprocessable Entity in 21ms (Views: 0.1ms | ActiveRecord: 5.8ms | Allocations: 17553)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:29:58 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"wwww", "taste"=>["Italian", "Lebanese", "Japanese", "Belgian"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
  [1m[36mPreference Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "wwww"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "wwww"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-25 19:29:58.674812"], ["updated_at", "2021-02-25 19:29:58.674812"]]
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/preferences_controller.rb:29:in `create'
  Rendering api/v1/preferences/show.json.jbuilder
  Rendered api/v1/preferences/show.json.jbuilder (Duration: 0.2ms | Allocations: 87)
Completed 201 Created in 19ms (Views: 0.9ms | ActiveRecord: 8.3ms | Allocations: 6158)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:30:04 +0000
Error occurred while parsing request parameters.
Contents:

{ "preference": { 
        "name": "wwwww",
        "taste": 
       } }
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "preference": { 
        "name": "wwwww",
        "taste": 
       } }'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "preference": { 
        "name": "wwwww",
        "taste": 
       } }
Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:30:09 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"wwswww", "taste"=>[]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1916)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:30:15 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"wwswwdw", "taste"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 1984)


Started POST "/api/v1/preferences" for ::1 at 2021-02-25 19:31:06 +0000
Processing by Api::V1::PreferencesController#create as JSON
  Parameters: {"preference"=>{"name"=>"wwwww", "taste"=>[]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 10ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 9330)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:32:56 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (106.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (94.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (101.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:32:58.152465"], ["updated_at", "2021-02-25 19:32:58.152465"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.173390"], ["updated_at", "2021-02-25 19:32:58.173390"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.178245"], ["updated_at", "2021-02-25 19:32:58.178245"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.181639"], ["updated_at", "2021-02-25 19:32:58.181639"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.185476"], ["updated_at", "2021-02-25 19:32:58.185476"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.189910"], ["updated_at", "2021-02-25 19:32:58.189910"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.193854"], ["updated_at", "2021-02-25 19:32:58.193854"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.199312"], ["updated_at", "2021-02-25 19:32:58.199312"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.205008"], ["updated_at", "2021-02-25 19:32:58.205008"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.210961"], ["updated_at", "2021-02-25 19:32:58.210961"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 47], ["created_at", "2021-02-25 19:32:58.216590"], ["updated_at", "2021-02-25 19:32:58.216590"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.3ms | Allocations: 2602)
Completed 201 Created in 1640ms (Views: 3.8ms | ActiveRecord: 31.7ms | Excon: 302.1ms | Allocations: 96297)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:35:44 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (108.46ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "35000"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:35:44.814769"], ["updated_at", "2021-02-25 19:35:44.814769"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.826021"], ["updated_at", "2021-02-25 19:35:44.826021"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.829726"], ["updated_at", "2021-02-25 19:35:44.829726"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.833248"], ["updated_at", "2021-02-25 19:35:44.833248"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.836603"], ["updated_at", "2021-02-25 19:35:44.836603"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.839945"], ["updated_at", "2021-02-25 19:35:44.839945"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.844183"], ["updated_at", "2021-02-25 19:35:44.844183"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.851553"], ["updated_at", "2021-02-25 19:35:44.851553"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.858440"], ["updated_at", "2021-02-25 19:35:44.858440"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.864465"], ["updated_at", "2021-02-25 19:35:44.864465"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Pasticcio"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 48], ["created_at", "2021-02-25 19:35:44.870042"], ["updated_at", "2021-02-25 19:35:44.870042"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.8ms | Allocations: 1898)
Completed 201 Created in 736ms (Views: 3.1ms | ActiveRecord: 19.5ms | Excon: 108.5ms | Allocations: 57152)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:41:40 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"", "distance"=>35000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (89.53ms)  GET https://api.yelp.com/v3/businesses/search?location=,BE&radius=35000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.2 KB)[0m
Completed 422 Unprocessable Entity in 661ms (Views: 0.2ms | ActiveRecord: 8.7ms | Excon: 89.5ms | Allocations: 39828)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:41:59 +0000
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": ,
    "price": [1,2],
    "attendees": ["Pierre"]
   }}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": ,
    "price": [1,2],
    "attendees": ["Pierre"]
   }}'):
  
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:114:in `rescue in parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:110:in `parse_formatted_parameters'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:389:in `block in POST'
rack (2.2.3) lib/rack/request.rb:69:in `fetch'
rack (2.2.3) lib/rack/request.rb:69:in `fetch_header'
actionpack (6.0.3.5) lib/action_dispatch/http/request.rb:388:in `POST'
actionpack (6.0.3.5) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:278:in `_wrapper_enabled?'
actionpack (6.0.3.5) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (6.0.3.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
sweet_notifications (1.1.0) lib/sweet_notifications/controller_runtime.rb:21:in `block (2 levels) in controller_runtime'
actionpack (6.0.3.5) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.3.5) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.0.3.5) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/cookies.rb:648:in `call'
activerecord (6.0.3.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.5) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.5) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.5) lib/rails/engine.rb:527:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{ "lunch": {
    "localisation": "Saint Gilles",
    "distance": ,
    "price": [1,2],
    "attendees": ["Pierre"]
   }}
Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:42:05 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"ss", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (151.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=0&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "ss"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:42:07.230155"], ["updated_at", "2021-02-25 19:42:07.230155"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.256695"], ["updated_at", "2021-02-25 19:42:07.256695"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.263496"], ["updated_at", "2021-02-25 19:42:07.263496"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.270061"], ["updated_at", "2021-02-25 19:42:07.270061"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.276632"], ["updated_at", "2021-02-25 19:42:07.276632"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.283162"], ["updated_at", "2021-02-25 19:42:07.283162"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.289359"], ["updated_at", "2021-02-25 19:42:07.289359"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.295889"], ["updated_at", "2021-02-25 19:42:07.295889"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.302360"], ["updated_at", "2021-02-25 19:42:07.302360"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Momo"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.308290"], ["updated_at", "2021-02-25 19:42:07.308290"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 49], ["created_at", "2021-02-25 19:42:07.314031"], ["updated_at", "2021-02-25 19:42:07.314031"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.7ms | Allocations: 3362)
Completed 201 Created in 2016ms (Views: 5.4ms | ActiveRecord: 25.4ms | Excon: 151.9ms | Allocations: 65643)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:42:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"50", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:125:in `matching_preferences'
  [1m[34mExcon Request[0m (107.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=50&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (118 Bytes)[0m
  [1m[34mExcon Request[0m (81.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=500&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (3.09 KB)[0m
  [1m[34mExcon Request[0m (76.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=5000&price=1,2&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.3 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,2}"], ["user_id", 1], ["created_at", "2021-02-25 19:42:21.422380"], ["updated_at", "2021-02-25 19:42:21.422380"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:61:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.432951"], ["updated_at", "2021-02-25 19:42:21.432951"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.437276"], ["updated_at", "2021-02-25 19:42:21.437276"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.440977"], ["updated_at", "2021-02-25 19:42:21.440977"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.446876"], ["updated_at", "2021-02-25 19:42:21.446876"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.453354"], ["updated_at", "2021-02-25 19:42:21.453354"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.459385"], ["updated_at", "2021-02-25 19:42:21.459385"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Cipiace"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.465356"], ["updated_at", "2021-02-25 19:42:21.465356"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Sans 13"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.471435"], ["updated_at", "2021-02-25 19:42:21.471435"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.477319"], ["updated_at", "2021-02-25 19:42:21.477319"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Sapore Della Dolce Vita"], ["restaurant_price", "€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 50], ["created_at", "2021-02-25 19:42:21.483418"], ["updated_at", "2021-02-25 19:42:21.483418"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.4ms | Allocations: 1900)
Completed 201 Created in 1720ms (Views: 2.8ms | ActiveRecord: 19.1ms | Excon: 265.7ms | Allocations: 70780)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:42:59 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>50000, "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 16ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 9462)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:43:08 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>"1", "price"=>[1, 2], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1944)


Started POST "/api/v1/lunches" for ::1 at 2021-02-25 19:58:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Filter chain halted as :controller_validation rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 2237)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:06:36 +0000
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
...   def initialize(lunch_params["distance"])
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
...ialize(lunch_params["distance"])
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:07:08 +0000
  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/controllers/api/v1/lunches_controller.rb:8:in `initialize'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:07:44 +0000
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/controllers/api/v1/lunches_controller.rb:8:in `initialize'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:08:10 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
...   def initialize(lunch_params["distance"])
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
...ialize(lunch_params["distance"])
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:08:40 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '(', expecting ')'
...   def initialize(lunch_params("distance"))
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ')', expecting end
...ialize(lunch_params("distance"))
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '(', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ')', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '(', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ')', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected '(', expecting ')'
app/controllers/api/v1/lunches_controller.rb:8: syntax error, unexpected ')', expecting end
app/controllers/api/v1/lunches_controller.rb:188: syntax error, unexpected end, expecting end-of-input
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:09:01 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (6.8ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:129:in `matching_preferences'
  [1m[34mExcon Request[0m (86.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[36mLunch Create (2.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:09:07.397933"], ["updated_at", "2021-02-26 12:09:07.397933"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:65:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (1.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.418588"], ["updated_at", "2021-02-26 12:09:07.418588"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.423860"], ["updated_at", "2021-02-26 12:09:07.423860"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.427293"], ["updated_at", "2021-02-26 12:09:07.427293"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.430719"], ["updated_at", "2021-02-26 12:09:07.430719"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.434026"], ["updated_at", "2021-02-26 12:09:07.434026"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.437408"], ["updated_at", "2021-02-26 12:09:07.437408"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.440818"], ["updated_at", "2021-02-26 12:09:07.440818"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.444639"], ["updated_at", "2021-02-26 12:09:07.444639"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.448360"], ["updated_at", "2021-02-26 12:09:07.448360"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 51], ["created_at", "2021-02-26 12:09:07.451521"], ["updated_at", "2021-02-26 12:09:07.451521"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.8ms | Allocations: 3364)
Completed 201 Created in 5934ms (Views: 3.2ms | ActiveRecord: 34.0ms | Excon: 86.9ms | Allocations: 112287)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:09:22 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '(', expecting ')'
...   def initialize(lunch_params("distance"))
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ')', expecting end
...ialize(lunch_params("distance"))
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '(', expecting ')'
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ')', expecting end
app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '(', expecting ')'
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ')', expecting end
app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '(', expecting ')'
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ')', expecting end
app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:09:35 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '[', expecting ')'
...   def initialize(lunch_params["distance"])
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ']', expecting end
...ialize(lunch_params["distance"])
...                              ^
/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected '[', expecting ')'
app/controllers/api/v1/lunches_controller.rb:28: syntax error, unexpected ']', expecting end
app/controllers/api/v1/lunches_controller.rb:190: syntax error, unexpected end, expecting end-of-input
Started GET "/api/v1/lunches" for ::1 at 2021-02-26 12:42:08 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.4ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 100]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 200]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (4.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 23]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 39]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 41]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 135.8ms | Allocations: 101891)
Completed 200 OK in 155ms (Views: 123.5ms | ActiveRecord: 14.9ms | Allocations: 106367)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:42:10 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:130:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:42:10.374453"], ["updated_at", "2021-02-26 12:42:10.374453"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[34mExcon Request[0m (84.28ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.002489"], ["updated_at", "2021-02-26 12:42:11.002489"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.013229"], ["updated_at", "2021-02-26 12:42:11.013229"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.016996"], ["updated_at", "2021-02-26 12:42:11.016996"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.020369"], ["updated_at", "2021-02-26 12:42:11.020369"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.023748"], ["updated_at", "2021-02-26 12:42:11.023748"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.027098"], ["updated_at", "2021-02-26 12:42:11.027098"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.031980"], ["updated_at", "2021-02-26 12:42:11.031980"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.037814"], ["updated_at", "2021-02-26 12:42:11.037814"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.043526"], ["updated_at", "2021-02-26 12:42:11.043526"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["lunch_id", 52], ["created_at", "2021-02-26 12:42:11.048966"], ["updated_at", "2021-02-26 12:42:11.048966"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.6ms | Allocations: 1978)
Completed 201 Created in 714ms (Views: 3.3ms | ActiveRecord: 32.1ms | Excon: 84.3ms | Allocations: 74315)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:42:20 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:130:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:42:20.972874"], ["updated_at", "2021-02-26 12:42:20.972874"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[34mExcon Request[0m (81.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (8.71 KB)[0m
  [1m[34mExcon Request[0m (80.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.47ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (8.71 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "San Daniele"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ganshoren"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.201812"], ["updated_at", "2021-02-26 12:42:22.201812"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Buone Maniere"], ["restaurant_price", "€€€€"], ["restaurant_city", "Etterbeek"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.214090"], ["updated_at", "2021-02-26 12:42:22.214090"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Second Degré"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.219577"], ["updated_at", "2021-02-26 12:42:22.219577"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Romana"], ["restaurant_price", "€€€€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.224978"], ["updated_at", "2021-02-26 12:42:22.224978"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Mercato Alimentare"], ["restaurant_price", "€€€€"], ["restaurant_city", "Uccle"], ["restaurant_category", "delicatessen"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.230263"], ["updated_at", "2021-02-26 12:42:22.230263"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Mimmo"], ["restaurant_price", "€€€€"], ["restaurant_city", "Woluwe-saint-lambert"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.235344"], ["updated_at", "2021-02-26 12:42:22.235344"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Perfetto"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.240509"], ["updated_at", "2021-02-26 12:42:22.240509"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Gusto Di Flamant"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.245713"], ["updated_at", "2021-02-26 12:42:22.245713"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Castello Banfi"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 53], ["created_at", "2021-02-26 12:42:22.251063"], ["updated_at", "2021-02-26 12:42:22.251063"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:114:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.0ms | Allocations: 1806)
Completed 201 Created in 1287ms (Views: 2.3ms | ActiveRecord: 24.5ms | Excon: 250.4ms | Allocations: 63249)


Started GET "/api/v1/lunches" for ::1 at 2021-02-26 12:45:42 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:1
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 100]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 200]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 8]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 9]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 10]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 11]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 12]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 13]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 14]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 16]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 17]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 18]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 19]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 20]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 21]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 22]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 23]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 24]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 25]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 26]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 27]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 28]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 29]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 30]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 31]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 32]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 33]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 34]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 35]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 36]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 37]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 38]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 39]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 40]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 41]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 42]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 43]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 44]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 45]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 46]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 47]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 48]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 49]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 50]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 51]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 53]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 79.4ms | Allocations: 102846)
Completed 200 OK in 82ms (Views: 70.4ms | ActiveRecord: 9.4ms | Allocations: 105954)


Started GET "/api/v1/lunches/15" for ::1 at 2021-02-26 12:45:55 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"15"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:85:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 15]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 0.8ms | Allocations: 976)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 2167)


Started GET "/api/v1/lunches/100" for ::1 at 2021-02-26 12:45:59 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"100"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:85:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 100]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.0ms | Allocations: 975)
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.4ms | Allocations: 1996)


Started GET "/api/v1/lunches/52" for ::1 at 2021-02-26 12:46:12 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"52"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:85:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 52]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.2ms | Allocations: 1906)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 2927)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:46:29 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:110:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:46:29.079251"], ["updated_at", "2021-02-26 12:46:29.079251"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[34mExcon Request[0m (138.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=[4,%204]&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[34mExcon Request[0m (100.65ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3600&price=[4,%204]&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (120 Bytes)[0m
Completed 500 Internal Server Error in 618ms (ActiveRecord: 13.0ms | Excon: 239.5ms | Allocations: 33166)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:164:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:46:34 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:46:34.875981"], ["updated_at", "2021-02-26 12:46:34.875981"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:59:in `create'
  [1m[34mExcon Request[0m (81.11ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (8.71 KB)[0m
  [1m[34mExcon Request[0m (88.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (62.95ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (8.71 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "San Daniele"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ganshoren"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.056687"], ["updated_at", "2021-02-26 12:46:36.056687"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Buone Maniere"], ["restaurant_price", "€€€€"], ["restaurant_city", "Etterbeek"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.069079"], ["updated_at", "2021-02-26 12:46:36.069079"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Second Degré"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.074464"], ["updated_at", "2021-02-26 12:46:36.074464"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Romana"], ["restaurant_price", "€€€€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.079931"], ["updated_at", "2021-02-26 12:46:36.079931"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Mercato Alimentare"], ["restaurant_price", "€€€€"], ["restaurant_city", "Uccle"], ["restaurant_category", "delicatessen"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.085178"], ["updated_at", "2021-02-26 12:46:36.085178"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Mimmo"], ["restaurant_price", "€€€€"], ["restaurant_city", "Woluwe-saint-lambert"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.090356"], ["updated_at", "2021-02-26 12:46:36.090356"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Perfetto"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.095635"], ["updated_at", "2021-02-26 12:46:36.095635"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Gusto Di Flamant"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.100771"], ["updated_at", "2021-02-26 12:46:36.100771"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Castello Banfi"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 55], ["created_at", "2021-02-26 12:46:36.106028"], ["updated_at", "2021-02-26 12:46:36.106028"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:182:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 55]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.9ms | Allocations: 2517)
Completed 201 Created in 1274ms (Views: 3.4ms | ActiveRecord: 28.4ms | Excon: 232.3ms | Allocations: 88631)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:47:41 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:110:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:47:41.582154"], ["updated_at", "2021-02-26 12:47:41.582154"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:57:in `create'
  [1m[34mExcon Request[0m (81.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=[4,%204]&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (120 Bytes)[0m
  [1m[34mExcon Request[0m (87.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=3600&price=[4,%204]&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (120 Bytes)[0m
Completed 500 Internal Server Error in 603ms (ActiveRecord: 8.8ms | Excon: 169.0ms | Allocations: 36876)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:169:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:58:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:47:58 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:113:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:47:58.800946"], ["updated_at", "2021-02-26 12:47:58.800946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:60:in `create'
  [1m[34mExcon Request[0m (80.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (8.71 KB)[0m
  [1m[34mExcon Request[0m (70.77ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (62.92ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (8.71 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "San Daniele"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ganshoren"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.042213"], ["updated_at", "2021-02-26 12:48:00.042213"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Buone Maniere"], ["restaurant_price", "€€€€"], ["restaurant_city", "Etterbeek"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.053262"], ["updated_at", "2021-02-26 12:48:00.053262"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Second Degré"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.059022"], ["updated_at", "2021-02-26 12:48:00.059022"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Romana"], ["restaurant_price", "€€€€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.063633"], ["updated_at", "2021-02-26 12:48:00.063633"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Mercato Alimentare"], ["restaurant_price", "€€€€"], ["restaurant_city", "Uccle"], ["restaurant_category", "delicatessen"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.068340"], ["updated_at", "2021-02-26 12:48:00.068340"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (1.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Mimmo"], ["restaurant_price", "€€€€"], ["restaurant_city", "Woluwe-saint-lambert"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.071793"], ["updated_at", "2021-02-26 12:48:00.071793"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Perfetto"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.086359"], ["updated_at", "2021-02-26 12:48:00.086359"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Gusto Di Flamant"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.091982"], ["updated_at", "2021-02-26 12:48:00.091982"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Castello Banfi"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 57], ["created_at", "2021-02-26 12:48:00.097780"], ["updated_at", "2021-02-26 12:48:00.097780"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:185:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 57]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.0ms | Allocations: 2518)
Completed 201 Created in 1327ms (Views: 3.5ms | ActiveRecord: 28.5ms | Excon: 213.9ms | Allocations: 90762)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:58:49 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint Gilles", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.6ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint Gilles"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:58:49.765098"], ["updated_at", "2021-02-26 12:58:49.765098"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (92.05ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (8.71 KB)[0m
  [1m[34mExcon Request[0m (69.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (71.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20Gilles,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (8.71 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "San Daniele"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ganshoren"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.891579"], ["updated_at", "2021-02-26 12:58:50.891579"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Buone Maniere"], ["restaurant_price", "€€€€"], ["restaurant_city", "Etterbeek"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.905012"], ["updated_at", "2021-02-26 12:58:50.905012"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Second Degré"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.911337"], ["updated_at", "2021-02-26 12:58:50.911337"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Osteria Romana"], ["restaurant_price", "€€€€"], ["restaurant_city", "City of Brussels"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.917184"], ["updated_at", "2021-02-26 12:58:50.917184"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Mercato Alimentare"], ["restaurant_price", "€€€€"], ["restaurant_city", "Uccle"], ["restaurant_category", "delicatessen"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.922943"], ["updated_at", "2021-02-26 12:58:50.922943"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Mimmo"], ["restaurant_price", "€€€€"], ["restaurant_city", "Woluwe-saint-lambert"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.929001"], ["updated_at", "2021-02-26 12:58:50.929001"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Perfetto"], ["restaurant_price", "€€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.934578"], ["updated_at", "2021-02-26 12:58:50.934578"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Il Gusto Di Flamant"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.940501"], ["updated_at", "2021-02-26 12:58:50.940501"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Castello Banfi"], ["restaurant_price", "€€€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["lunch_id", 58], ["created_at", "2021-02-26 12:58:50.946289"], ["updated_at", "2021-02-26 12:58:50.946289"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:186:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 58]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 2520)
Completed 201 Created in 1217ms (Views: 3.8ms | ActiveRecord: 22.3ms | Excon: 233.9ms | Allocations: 88306)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 12:59:40 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 12:59:40.309739"], ["updated_at", "2021-02-26 12:59:40.309739"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (60.42ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (76.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (72.30ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 971ms (ActiveRecord: 8.8ms | Excon: 208.8ms | Allocations: 44103)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:162:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:55:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:00:01 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[4, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{4,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:00:01.231201"], ["updated_at", "2021-02-26 13:00:01.231201"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (84.32ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (92.16ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (68.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
Completed 404 Not Found in 1102ms (Views: 0.2ms | ActiveRecord: 9.2ms | Excon: 245.1ms | Allocations: 44447)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:00:08 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:00:08.091740"], ["updated_at", "2021-02-26 13:00:08.091740"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (157.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (77.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (66.29ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 61], ["created_at", "2021-02-26 13:00:09.841645"], ["updated_at", "2021-02-26 13:00:09.841645"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 61], ["created_at", "2021-02-26 13:00:09.848224"], ["updated_at", "2021-02-26 13:00:09.848224"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 61]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.0ms | Allocations: 1862)
Completed 201 Created in 1767ms (Views: 3.6ms | ActiveRecord: 13.4ms | Excon: 301.5ms | Allocations: 41696)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:00:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:00:17.032107"], ["updated_at", "2021-02-26 13:00:17.032107"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (145.58ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (104.36ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (65.57ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 62], ["created_at", "2021-02-26 13:00:18.270523"], ["updated_at", "2021-02-26 13:00:18.270523"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 62], ["created_at", "2021-02-26 13:00:18.282001"], ["updated_at", "2021-02-26 13:00:18.282001"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 62]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.5ms | Allocations: 1865)
Completed 201 Created in 1279ms (Views: 1.8ms | ActiveRecord: 19.2ms | Excon: 315.6ms | Allocations: 60957)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:00:24 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:00:24.134631"], ["updated_at", "2021-02-26 13:00:24.134631"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (66.56ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (76.03ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (76.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 1002ms (ActiveRecord: 8.8ms | Excon: 219.4ms | Allocations: 44181)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:168:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:55:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:01:12 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:01:12.480333"], ["updated_at", "2021-02-26 13:01:12.480333"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (74.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (107.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (68.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
Completed 500 Internal Server Error in 1101ms (ActiveRecord: 8.9ms | Excon: 250.2ms | Allocations: 44184)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:168:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:55:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:01:19 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:01:19.579954"], ["updated_at", "2021-02-26 13:01:19.579954"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (68.06ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (81.01ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (60.18ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 65], ["created_at", "2021-02-26 13:01:20.734428"], ["updated_at", "2021-02-26 13:01:20.734428"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 65], ["created_at", "2021-02-26 13:01:20.746855"], ["updated_at", "2021-02-26 13:01:20.746855"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:184:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 65]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 1865)
Completed 201 Created in 1204ms (Views: 3.2ms | ActiveRecord: 18.8ms | Excon: 209.3ms | Allocations: 60645)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:04:23 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:04:23.206016"], ["updated_at", "2021-02-26 13:04:23.206016"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (95.72ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (16.7 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.965346"], ["updated_at", "2021-02-26 13:04:23.965346"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.971595"], ["updated_at", "2021-02-26 13:04:23.971595"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.977026"], ["updated_at", "2021-02-26 13:04:23.977026"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Hostellerie du Peiffeschof"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "hotels"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.982569"], ["updated_at", "2021-02-26 13:04:23.982569"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.987897"], ["updated_at", "2021-02-26 13:04:23.987897"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.993364"], ["updated_at", "2021-02-26 13:04:23.993364"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:23.998723"], ["updated_at", "2021-02-26 13:04:23.998723"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:24.004183"], ["updated_at", "2021-02-26 13:04:24.004183"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:24.010461"], ["updated_at", "2021-02-26 13:04:24.010461"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 66], ["created_at", "2021-02-26 13:04:24.016962"], ["updated_at", "2021-02-26 13:04:24.016962"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 66]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.1ms | Allocations: 2611)
Completed 201 Created in 839ms (Views: 3.6ms | ActiveRecord: 19.3ms | Excon: 95.7ms | Allocations: 80319)


Started GET "/api/v1/lunches/66" for ::1 at 2021-02-26 13:04:58 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"66"}
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:85:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 66]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.1ms | Allocations: 1907)
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 0.4ms | Allocations: 3051)


Started GET "/api/v1/lunches/65" for ::1 at 2021-02-26 13:05:02 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"65"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:85:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 65]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.6ms | Allocations: 1161)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 2182)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:05:44 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:05:44.076968"], ["updated_at", "2021-02-26 13:05:44.076968"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (109.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (105.52ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=Restaurants[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (14.9 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Wasabi"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "japanese"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.377994"], ["updated_at", "2021-02-26 13:05:45.377994"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Or Saison"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.390120"], ["updated_at", "2021-02-26 13:05:45.390120"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.394823"], ["updated_at", "2021-02-26 13:05:45.394823"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le fils de Paul"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.400799"], ["updated_at", "2021-02-26 13:05:45.400799"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Faubourg 101"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "belgian"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.407421"], ["updated_at", "2021-02-26 13:05:45.407421"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Geppetto"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.413539"], ["updated_at", "2021-02-26 13:05:45.413539"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Zorba le Grec"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "greek"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.419042"], ["updated_at", "2021-02-26 13:05:45.419042"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Van De Kerckhove/E."], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "bakeries"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.424747"], ["updated_at", "2021-02-26 13:05:45.424747"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Soho"], ["restaurant_price", "€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "irish_pubs"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.429854"], ["updated_at", "2021-02-26 13:05:45.429854"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "La Régalade"], ["restaurant_price", "€€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "restaurants"], ["lunch_id", 67], ["created_at", "2021-02-26 13:05:45.433932"], ["updated_at", "2021-02-26 13:05:45.433932"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:187:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 67]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.3ms | Allocations: 1898)
Completed 201 Created in 1365ms (Views: 1.3ms | ActiveRecord: 26.5ms | Excon: 215.4ms | Allocations: 61892)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:07:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:07:36.584239"], ["updated_at", "2021-02-26 13:07:36.584239"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (94.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (124.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (95.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (66.21ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:179:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:179:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 68], ["created_at", "2021-02-26 13:07:38.210366"], ["updated_at", "2021-02-26 13:07:38.210366"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:179:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:179:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 68]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.6ms | Allocations: 1772)
Completed 201 Created in 1672ms (Views: 2.0ms | ActiveRecord: 16.8ms | Excon: 380.7ms | Allocations: 63304)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:07:47 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:07:47.897823"], ["updated_at", "2021-02-26 13:07:47.897823"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (81.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (78.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (79.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (62.73ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (138 Bytes)[0m
Completed 500 Internal Server Error in 1883ms (ActiveRecord: 7.6ms | Excon: 302.6ms | Allocations: 50782)


  
NoMethodError (undefined method `count' for nil:NilClass):
  
app/controllers/api/v1/lunches_controller.rb:163:in `upper_limit'
app/controllers/api/v1/lunches_controller.rb:55:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:08:40 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>500, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "500"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:08:40.814228"], ["updated_at", "2021-02-26 13:08:40.814228"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (99.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (89.13ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (69.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (110.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 70], ["created_at", "2021-02-26 13:08:42.699633"], ["updated_at", "2021-02-26 13:08:42.699633"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 70]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.5ms | Allocations: 1772)
Completed 201 Created in 1922ms (Views: 3.1ms | ActiveRecord: 19.6ms | Excon: 368.3ms | Allocations: 63363)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:09:05 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:09:05.761428"], ["updated_at", "2021-02-26 13:09:05.761428"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (76.83ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (74.41ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (102.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 71], ["created_at", "2021-02-26 13:09:06.924589"], ["updated_at", "2021-02-26 13:09:06.924589"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 71]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.5ms | Allocations: 1060)
Completed 201 Created in 1184ms (Views: 4.9ms | ActiveRecord: 9.6ms | Excon: 253.5ms | Allocations: 30718)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:09:17 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:09:17.973234"], ["updated_at", "2021-02-26 13:09:17.973234"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (91.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (82.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (77.55ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 72], ["created_at", "2021-02-26 13:09:19.223928"], ["updated_at", "2021-02-26 13:09:19.223928"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 72], ["created_at", "2021-02-26 13:09:19.239147"], ["updated_at", "2021-02-26 13:09:19.239147"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 72]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.9ms | Allocations: 1153)
Completed 201 Created in 1307ms (Views: 2.2ms | ActiveRecord: 11.2ms | Excon: 250.8ms | Allocations: 33085)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:09:35 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[3, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{3,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:09:35.094915"], ["updated_at", "2021-02-26 13:09:35.094915"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (74.06ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (76.60ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (85.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 73], ["created_at", "2021-02-26 13:09:36.154769"], ["updated_at", "2021-02-26 13:09:36.154769"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 73]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.6ms | Allocations: 1060)
Completed 201 Created in 1077ms (Views: 1.9ms | ActiveRecord: 16.1ms | Excon: 236.2ms | Allocations: 30746)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:09:40 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:112:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:09:40.867310"], ["updated_at", "2021-02-26 13:09:40.867310"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:54:in `create'
  [1m[34mExcon Request[0m (95.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (81.84ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 74], ["created_at", "2021-02-26 13:09:42.486445"], ["updated_at", "2021-02-26 13:09:42.486445"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 74], ["created_at", "2021-02-26 13:09:42.498074"], ["updated_at", "2021-02-26 13:09:42.498074"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:177:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 74]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:4
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.5ms | Allocations: 1153)
Completed 201 Created in 1642ms (Views: 1.8ms | ActiveRecord: 16.6ms | Excon: 272.7ms | Allocations: 34761)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:17:12 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:17:14 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input
app/controllers/api/v1/lunches_controller.rb:143: syntax error, unexpected end, expecting end-of-input
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:17:23 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:17:23.773736"], ["updated_at", "2021-02-26 13:17:23.773736"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (88.98ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mRestaurant Create (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 75], ["created_at", "2021-02-26 13:17:24.296364"], ["updated_at", "2021-02-26 13:17:24.296364"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 75], ["created_at", "2021-02-26 13:17:24.303772"], ["updated_at", "2021-02-26 13:17:24.303772"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 75]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.9ms | Allocations: 2626)
Completed 201 Created in 579ms (Views: 4.8ms | ActiveRecord: 18.1ms | Excon: 89.0ms | Allocations: 55048)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:17:35 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>5, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "5"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:17:35.438235"], ["updated_at", "2021-02-26 13:17:35.438235"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (149.59ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
Completed 404 Not Found in 461ms (Views: 0.1ms | ActiveRecord: 2.6ms | Excon: 149.6ms | Allocations: 13253)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:17:55 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:17:55.589216"], ["updated_at", "2021-02-26 13:17:55.589216"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (79.12ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
Completed 404 Not Found in 421ms (Views: 0.1ms | ActiveRecord: 7.7ms | Excon: 79.1ms | Allocations: 13229)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:18:03 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>50, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:18:03.964044"], ["updated_at", "2021-02-26 13:18:03.964044"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (106.63ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (81.64ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (75.37ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (73.94ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (77.00ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 78], ["created_at", "2021-02-26 13:18:06.068835"], ["updated_at", "2021-02-26 13:18:06.068835"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 78]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.6ms | Allocations: 1772)
Completed 201 Created in 2135ms (Views: 3.1ms | ActiveRecord: 13.0ms | Excon: 414.7ms | Allocations: 70184)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:18:17 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>5000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "5000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:18:17.309398"], ["updated_at", "2021-02-26 13:18:17.309398"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (62.82ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (68.62ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (68.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 79], ["created_at", "2021-02-26 13:18:18.384534"], ["updated_at", "2021-02-26 13:18:18.384534"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 79]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.6ms | Allocations: 1060)
Completed 201 Created in 1092ms (Views: 1.8ms | ActiveRecord: 10.4ms | Excon: 199.8ms | Allocations: 30133)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:18:34 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:109:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:18:34.064559"], ["updated_at", "2021-02-26 13:18:34.064559"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (84.54ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (81.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (72.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 80], ["created_at", "2021-02-26 13:18:35.299641"], ["updated_at", "2021-02-26 13:18:35.299641"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 80], ["created_at", "2021-02-26 13:18:35.312394"], ["updated_at", "2021-02-26 13:18:35.312394"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:171:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 80]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1153)
Completed 201 Created in 1258ms (Views: 1.9ms | ActiveRecord: 17.6ms | Excon: 239.0ms | Allocations: 34756)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:19:42 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>36000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:110:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:53:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "36000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:19:42.560569"], ["updated_at", "2021-02-26 13:19:42.560569"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:53:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:53:in `create'
  [1m[34mExcon Request[0m (112.86ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:20:55 +0000
  [1m[34mExcon Request[0m (91.69ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=360000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (5096.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=36000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 81], ["created_at", "2021-02-26 13:21:17.956129"], ["updated_at", "2021-02-26 13:21:17.956129"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 81], ["created_at", "2021-02-26 13:21:17.962892"], ["updated_at", "2021-02-26 13:21:17.962892"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 81]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.8ms | Allocations: 1868)
Completed 201 Created in 95435ms (Views: 3.3ms | ActiveRecord: 15.1ms | Excon: 5301.4ms | Allocations: 780017)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>3000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "3000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:21:18.061480"], ["updated_at", "2021-02-26 13:21:18.061480"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[34mExcon Request[0m (62.91ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=3000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (81.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (5081.96ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=300000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (79.80ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=30000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 82], ["created_at", "2021-02-26 13:21:24.783480"], ["updated_at", "2021-02-26 13:21:24.783480"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 82], ["created_at", "2021-02-26 13:21:24.795975"], ["updated_at", "2021-02-26 13:21:24.795975"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 82]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.6ms | Allocations: 1865)
Completed 201 Created in 6766ms (Views: 3.1ms | ActiveRecord: 20.6ms | Excon: 5305.8ms | Allocations: 67803)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:21:30 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>5, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "5"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:21:30.774915"], ["updated_at", "2021-02-26 13:21:30.774915"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[34mExcon Request[0m (73.53ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (73.81ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (75.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (65.85ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (80.31ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (79.04ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 83], ["created_at", "2021-02-26 13:21:33.087188"], ["updated_at", "2021-02-26 13:21:33.087188"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 83]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 1061)
Completed 201 Created in 2331ms (Views: 2.1ms | ActiveRecord: 15.4ms | Excon: 447.7ms | Allocations: 49581)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:21:56 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:108:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:21:56.178698"], ["updated_at", "2021-02-26 13:21:56.178698"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[34mExcon Request[0m (78.22ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (5095.97ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (86.45ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 84], ["created_at", "2021-02-26 13:22:02.421662"], ["updated_at", "2021-02-26 13:22:02.421662"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 84], ["created_at", "2021-02-26 13:22:02.427731"], ["updated_at", "2021-02-26 13:22:02.427731"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:170:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 84]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.7ms | Allocations: 1153)
Completed 201 Created in 6260ms (Views: 1.9ms | ActiveRecord: 10.4ms | Excon: 5260.7ms | Allocations: 34221)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:31:35 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
  module fechting_all
         ^~~~~~~~~~~~):
  
app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:31:36 +0000
  
SyntaxError (/home/pierre/code/pcroch/lunch-picker-api/app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
  module fechting_all
         ^~~~~~~~~~~~):
  
app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
app/controllers/api/v1/lunches_controller.rb:98: class/module name must be CONSTANT
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:31:54 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 156ms (ActiveRecord: 4.1ms | Allocations: 126668)


  
NameError (undefined local variable or method `matching_preferences' for #<Api::V1::LunchesController:0x00007f8c00b41ca0>):
  
app/controllers/api/v1/lunches_controller.rb:38:in `create'
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 13:32:10 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:110:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 13:32:10.768630"], ["updated_at", "2021-02-26 13:32:10.768630"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:51:in `create'
  [1m[34mExcon Request[0m (82.71ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (75.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (75.14ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["lunch_id", 85], ["created_at", "2021-02-26 13:32:12.126554"], ["updated_at", "2021-02-26 13:32:12.126554"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["lunch_id", 85], ["created_at", "2021-02-26 13:32:12.132974"], ["updated_at", "2021-02-26 13:32:12.132974"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:172:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 85]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.1ms | Allocations: 2623)
Completed 201 Created in 1396ms (Views: 4.9ms | ActiveRecord: 13.9ms | Excon: 233.1ms | Allocations: 66773)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (17.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (17.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (175.4ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (74.7ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" character varying, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "restaurant_distance" integer, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-26 14:49:19.355063"], ["updated_at", "2021-02-26 14:49:19.355063"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$l6bLKVLiryLeYv2dI5BBOurCVa9jPEWRgO43dpwR2u66ldJunbnui"], ["created_at", "2021-02-26 14:49:19.627886"], ["updated_at", "2021-02-26 14:49:19.627886"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "AC1ZedmyvE9XBJCfnyzJ"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$36AJL3IdSXgDxMsfedWbVOTut83gx3KoJFmNPHACHq46Utyae9ncq"], ["created_at", "2021-02-26 14:49:19.813919"], ["updated_at", "2021-02-26 14:49:19.813919"], ["authentication_token", "AC1ZedmyvE9XBJCfnyzJ"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "1dsE29r1NUKZ5qAjYWfm"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$.CyxXVfCCx7H0UF/cP/eIuks9RNrhtRMbXieJ02/fCV4nZ1mjaniq"], ["created_at", "2021-02-26 14:49:19.994381"], ["updated_at", "2021-02-26 14:49:19.994381"], ["authentication_token", "1dsE29r1NUKZ5qAjYWfm"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "Qy7JG5Bn4DwMLz-q_NHx"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$2JRcgksvAhItn/zyRi0cFuXb3xmvGEffWPYbidCKKQH/ehBZVg/VK"], ["created_at", "2021-02-26 14:49:20.174910"], ["updated_at", "2021-02-26 14:49:20.174910"], ["authentication_token", "Qy7JG5Bn4DwMLz-q_NHx"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Pierre"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.4ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-26 14:49:20.189540"], ["updated_at", "2021-02-26 14:49:20.189540"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Gilles"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-26 14:49:20.194096"], ["updated_at", "2021-02-26 14:49:20.194096"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Vince"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-26 14:49:20.198330"], ["updated_at", "2021-02-26 14:49:20.198330"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Sam"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.1ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-26 14:49:20.202779"], ["updated_at", "2021-02-26 14:49:20.202779"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1000], ["localisation", "Arlon"], ["distance", "1000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:49:20.221662"], ["updated_at", "2021-02-26 14:49:20.221662"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1001], ["localisation", "Saint Gilles"], ["distance", "50"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:49:20.225582"], ["updated_at", "2021-02-26 14:49:20.225582"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:49:25 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:49:25.112368"], ["updated_at", "2021-02-26 14:49:25.112368"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (111.70ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (72.99ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (95.75ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:50:32 +0000
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["restaurant_distance", 0], ["lunch_id", 1], ["created_at", "2021-02-26 14:50:42.886615"], ["updated_at", "2021-02-26 14:50:42.886615"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["restaurant_distance", 0], ["lunch_id", 1], ["created_at", "2021-02-26 14:50:45.429849"], ["updated_at", "2021-02-26 14:50:45.429849"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.4ms | Allocations: 2742)
Completed 201 Created in 80379ms (Views: 6.2ms | ActiveRecord: 28.6ms | Excon: 280.5ms | Allocations: 1520571)


Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:50:45.557364"], ["updated_at", "2021-02-26 14:50:45.557364"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (5219.23ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (110.76ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (88.92ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 2], ["created_at", "2021-02-26 14:50:52.369147"], ["updated_at", "2021-02-26 14:50:52.369147"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 2], ["created_at", "2021-02-26 14:50:52.383389"], ["updated_at", "2021-02-26 14:50:52.383389"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 3.2ms | Allocations: 1868)
Completed 201 Created in 6876ms (Views: 4.2ms | ActiveRecord: 20.4ms | Excon: 5419.0ms | Allocations: 60477)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:51:36 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:51:36.820364"], ["updated_at", "2021-02-26 14:51:36.820364"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (77.38ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (74.92ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (71.40ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 3], ["created_at", "2021-02-26 14:51:38.184027"], ["updated_at", "2021-02-26 14:51:38.184027"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 3], ["created_at", "2021-02-26 14:51:38.206098"], ["updated_at", "2021-02-26 14:51:38.206098"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.1ms | Allocations: 2768)
Completed 201 Created in 1436ms (Views: 5.8ms | ActiveRecord: 19.6ms | Excon: 223.8ms | Allocations: 67870)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:51:57 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>5, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "5"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:51:57.479232"], ["updated_at", "2021-02-26 14:51:57.479232"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (104.27ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (5101.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (120.24ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=500&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (115 Bytes)[0m
  [1m[34mExcon Request[0m (102.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[34mExcon Request[0m (142.74ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=50000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m400 Bad Request (138 Bytes)[0m
  [1m[34mExcon Request[0m (210.26ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=5000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1018 Bytes)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 4], ["created_at", "2021-02-26 14:52:05.359465"], ["updated_at", "2021-02-26 14:52:05.359465"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.6ms | Allocations: 1152)
Completed 201 Created in 7893ms (Views: 2.3ms | ActiveRecord: 9.9ms | Excon: 5781.6ms | Allocations: 50778)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:52:36 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:52:36.421492"], ["updated_at", "2021-02-26 14:52:36.421492"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (74.19ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (87.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (72.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 5], ["created_at", "2021-02-26 14:52:37.799940"], ["updated_at", "2021-02-26 14:52:37.799940"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 5], ["created_at", "2021-02-26 14:52:37.812802"], ["updated_at", "2021-02-26 14:52:37.812802"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 5]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.9ms | Allocations: 1176)
Completed 201 Created in 1401ms (Views: 2.3ms | ActiveRecord: 16.6ms | Excon: 234.3ms | Allocations: 34614)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:54:48 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Arlon", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Arlon"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:54:48.201659"], ["updated_at", "2021-02-26 14:54:48.201659"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (94.68ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (1.81 KB)[0m
  [1m[34mExcon Request[0m (72.89ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=350000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m400 Bad Request (140 Bytes)[0m
  [1m[34mExcon Request[0m (70.43ms)  GET https://api.yelp.com/v3/businesses/search?location=Arlon,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (1.81 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Da Franco's"], ["restaurant_price", "€€€"], ["restaurant_city", "Arlon"], ["restaurant_category", "italian"], ["restaurant_distance", 1826], ["lunch_id", 6], ["created_at", "2021-02-26 14:54:49.699459"], ["updated_at", "2021-02-26 14:54:49.699459"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Paradisio"], ["restaurant_price", "€€"], ["restaurant_city", "Longwy"], ["restaurant_category", "italian"], ["restaurant_distance", 17216], ["lunch_id", 6], ["created_at", "2021-02-26 14:54:49.710193"], ["updated_at", "2021-02-26 14:54:49.710193"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 6]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.2ms | Allocations: 1889)
Completed 201 Created in 1556ms (Views: 2.5ms | ActiveRecord: 24.0ms | Excon: 238.0ms | Allocations: 61181)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 14:55:04 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", "35000"], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 14:55:04.691709"], ["updated_at", "2021-02-26 14:55:04.691709"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (77.07ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.414516"], ["updated_at", "2021-02-26 14:55:05.414516"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.427073"], ["updated_at", "2021-02-26 14:55:05.427073"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.432487"], ["updated_at", "2021-02-26 14:55:05.432487"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.438279"], ["updated_at", "2021-02-26 14:55:05.438279"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.443013"], ["updated_at", "2021-02-26 14:55:05.443013"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.447579"], ["updated_at", "2021-02-26 14:55:05.447579"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.452035"], ["updated_at", "2021-02-26 14:55:05.452035"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.455494"], ["updated_at", "2021-02-26 14:55:05.455494"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.458603"], ["updated_at", "2021-02-26 14:55:05.458603"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 7], ["created_at", "2021-02-26 14:55:05.461750"], ["updated_at", "2021-02-26 14:55:05.461750"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 7]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.3ms | Allocations: 2001)
Completed 201 Created in 779ms (Views: 1.4ms | ActiveRecord: 25.0ms | Excon: 77.1ms | Allocations: 55644)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (23.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (16.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (67.9ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (68.4ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" integer, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "restaurant_distance" integer, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-26 15:14:20.203909"], ["updated_at", "2021-02-26 15:14:20.203909"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$B81e6Q9LbdZFL44yYCPiWew/mlMvErRhMZ7WJNqbfvWofsJHLa60q"], ["created_at", "2021-02-26 15:14:20.469318"], ["updated_at", "2021-02-26 15:14:20.469318"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "Mer9VzyHwxAjo1kwQF9s"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$M1iVk4iLeqET2/APLDqn2eybPH3OaCHx7pp3NEQtMDLH8RPpVhWrS"], ["created_at", "2021-02-26 15:14:20.650497"], ["updated_at", "2021-02-26 15:14:20.650497"], ["authentication_token", "Mer9VzyHwxAjo1kwQF9s"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "jXPQgaKQTJpFyPDzq1k2"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$MNFkGhApRBoVLqy9RHyPiei1Rt5FXWJmFH0Itc5apcW/T7hNuuMii"], ["created_at", "2021-02-26 15:14:20.831914"], ["updated_at", "2021-02-26 15:14:20.831914"], ["authentication_token", "jXPQgaKQTJpFyPDzq1k2"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "Teznw81dwG_bGWVS4rRj"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$YiihfpXprk2cbP0aByppL.NfL7wHb6m3zfdZTBZ5bCYlb1zsfQsLm"], ["created_at", "2021-02-26 15:14:21.013257"], ["updated_at", "2021-02-26 15:14:21.013257"], ["authentication_token", "Teznw81dwG_bGWVS4rRj"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Pierre"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-26 15:14:21.029328"], ["updated_at", "2021-02-26 15:14:21.029328"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Gilles"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-26 15:14:21.034169"], ["updated_at", "2021-02-26 15:14:21.034169"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Vince"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-26 15:14:21.038639"], ["updated_at", "2021-02-26 15:14:21.038639"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Sam"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.2ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-26 15:14:21.042956"], ["updated_at", "2021-02-26 15:14:21.042956"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1000], ["localisation", "Arlon"], ["distance", 1000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:14:21.062779"], ["updated_at", "2021-02-26 15:14:21.062779"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.2ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1001], ["localisation", "Saint Gilles"], ["distance", 50], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:14:21.066781"], ["updated_at", "2021-02-26 15:14:21.066781"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:14:23 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.3ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.5ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", 35000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:14:23.870383"], ["updated_at", "2021-02-26 15:14:23.870383"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (84.05ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.529208"], ["updated_at", "2021-02-26 15:14:24.529208"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.539836"], ["updated_at", "2021-02-26 15:14:24.539836"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.543215"], ["updated_at", "2021-02-26 15:14:24.543215"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.546803"], ["updated_at", "2021-02-26 15:14:24.546803"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.549946"], ["updated_at", "2021-02-26 15:14:24.549946"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.554924"], ["updated_at", "2021-02-26 15:14:24.554924"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.560670"], ["updated_at", "2021-02-26 15:14:24.560670"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.564971"], ["updated_at", "2021-02-26 15:14:24.564971"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.569443"], ["updated_at", "2021-02-26 15:14:24.569443"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 1], ["created_at", "2021-02-26 15:14:24.573644"], ["updated_at", "2021-02-26 15:14:24.573644"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 3576)
Completed 201 Created in 760ms (Views: 4.1ms | ActiveRecord: 37.4ms | Excon: 84.1ms | Allocations: 87465)


Started GET "/api/v1/lunches" for ::1 at 2021-02-26 15:14:43 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1000]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1001]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 3.6ms | Allocations: 4790)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.4ms | Allocations: 5556)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:15:45 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.1ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", 35000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:15:45.168759"], ["updated_at", "2021-02-26 15:15:45.168759"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (94.50ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.026904"], ["updated_at", "2021-02-26 15:15:46.026904"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.032792"], ["updated_at", "2021-02-26 15:15:46.032792"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.038781"], ["updated_at", "2021-02-26 15:15:46.038781"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.045785"], ["updated_at", "2021-02-26 15:15:46.045785"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.052142"], ["updated_at", "2021-02-26 15:15:46.052142"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.058251"], ["updated_at", "2021-02-26 15:15:46.058251"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.064343"], ["updated_at", "2021-02-26 15:15:46.064343"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.069810"], ["updated_at", "2021-02-26 15:15:46.069810"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.075678"], ["updated_at", "2021-02-26 15:15:46.075678"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 2], ["created_at", "2021-02-26 15:15:46.081932"], ["updated_at", "2021-02-26 15:15:46.081932"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.8ms | Allocations: 2074)
Completed 201 Created in 923ms (Views: 3.4ms | ActiveRecord: 20.7ms | Excon: 94.5ms | Allocations: 56650)


Started GET "/api/v1/lunches/1" for ::1 at 2021-02-26 15:15:51 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:82:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 1.8ms | Allocations: 2002)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms | Allocations: 3133)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5010.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:18:36 +0000
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", 35000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:18:36.158378"], ["updated_at", "2021-02-26 15:18:36.158378"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (79.05ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.772681"], ["updated_at", "2021-02-26 15:18:36.772681"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.784930"], ["updated_at", "2021-02-26 15:18:36.784930"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.800813"], ["updated_at", "2021-02-26 15:18:36.800813"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.805301"], ["updated_at", "2021-02-26 15:18:36.805301"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.808699"], ["updated_at", "2021-02-26 15:18:36.808699"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.812001"], ["updated_at", "2021-02-26 15:18:36.812001"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.815174"], ["updated_at", "2021-02-26 15:18:36.815174"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.818486"], ["updated_at", "2021-02-26 15:18:36.818486"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.821836"], ["updated_at", "2021-02-26 15:18:36.821836"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 3], ["created_at", "2021-02-26 15:18:36.826092"], ["updated_at", "2021-02-26 15:18:36.826092"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 3]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.7ms | Allocations: 1995)
Completed 201 Created in 679ms (Views: 2.9ms | ActiveRecord: 25.8ms | Excon: 79.1ms | Allocations: 56916)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:18:43 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", 35000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:18:43.761777"], ["updated_at", "2021-02-26 15:18:43.761777"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (78.15ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.410547"], ["updated_at", "2021-02-26 15:18:44.410547"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.421591"], ["updated_at", "2021-02-26 15:18:44.421591"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.425937"], ["updated_at", "2021-02-26 15:18:44.425937"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.430170"], ["updated_at", "2021-02-26 15:18:44.430170"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.436446"], ["updated_at", "2021-02-26 15:18:44.436446"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.442195"], ["updated_at", "2021-02-26 15:18:44.442195"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.448199"], ["updated_at", "2021-02-26 15:18:44.448199"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.454789"], ["updated_at", "2021-02-26 15:18:44.454789"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.461086"], ["updated_at", "2021-02-26 15:18:44.461086"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 4], ["created_at", "2021-02-26 15:18:44.467273"], ["updated_at", "2021-02-26 15:18:44.467273"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 4]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.8ms | Allocations: 1994)
Completed 201 Created in 717ms (Views: 3.2ms | ActiveRecord: 26.5ms | Excon: 78.2ms | Allocations: 56408)


Started GET "/api/v1/lunches/1" for ::1 at 2021-02-26 15:18:47 +0000
Processing by Api::V1::LunchesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:82:in `set_lunch'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.2ms | Allocations: 2002)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms | Allocations: 3022)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (37.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (19.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (66.2ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (78.6ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" integer, "price" integer[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "restaurant_distance" integer, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-26 15:19:01.581451"], ["updated_at", "2021-02-26 15:19:01.581451"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$l/GeaXl4dZjVIWoQOKDELe5Dx8Hi3Hv94zAWlhHh6hCgYwrhhhwSC"], ["created_at", "2021-02-26 15:19:01.872085"], ["updated_at", "2021-02-26 15:19:01.872085"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "xDPiENM5nukfi7mepGsh"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$mexrOsYIEL4soaTclxk8QOujBZDBTUtdtbpqBhLYqBigaeYW0t/bK"], ["created_at", "2021-02-26 15:19:02.053118"], ["updated_at", "2021-02-26 15:19:02.053118"], ["authentication_token", "xDPiENM5nukfi7mepGsh"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "s7X6BaQdBg2JZbpjyez-"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$rHjcHyCeq4OP.JnB5.jFOuA34LAodXDMwKmeT0wQiwRWWaua0lIy6"], ["created_at", "2021-02-26 15:19:02.233570"], ["updated_at", "2021-02-26 15:19:02.233570"], ["authentication_token", "s7X6BaQdBg2JZbpjyez-"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "AFdRvYgwzLPkD9kxfpmz"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$mKTFK/aUb.UJAsfpyKHV3O85neX3UkSjj679RUkskPG32z2JvFlhO"], ["created_at", "2021-02-26 15:19:02.413362"], ["updated_at", "2021-02-26 15:19:02.413362"], ["authentication_token", "AFdRvYgwzLPkD9kxfpmz"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Pierre"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.5ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-26 15:19:02.429176"], ["updated_at", "2021-02-26 15:19:02.429176"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Gilles"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-26 15:19:02.433966"], ["updated_at", "2021-02-26 15:19:02.433966"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Vince"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-26 15:19:02.438352"], ["updated_at", "2021-02-26 15:19:02.438352"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Sam"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-26 15:19:02.451525"], ["updated_at", "2021-02-26 15:19:02.451525"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:19:11 +0000
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
Completed 422 Unprocessable Entity in 42ms (Views: 0.1ms | ActiveRecord: 8.7ms | Allocations: 26999)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:19:16 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
Completed 422 Unprocessable Entity in 12ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 4656)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (22.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_development"[0m
  [1m[35m (15.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lunch_picker_api_test"[0m
  [1m[35m (72.3ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_development" ENCODING = 'unicode'[0m
  [1m[35m (70.0ms)[0m  [1m[35mCREATE DATABASE "lunch_picker_api_test" ENCODING = 'unicode'[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(107090900610847650)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20210223143541)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223143541"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePreferences (20210223145014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "preferences" ("id" bigserial primary key, "name" character varying, "taste" text[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_87f1c9c7bd"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_preferences_on_user_id" ON "preferences"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223145014"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunches (20210223150010)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "lunches" ("id" bigserial primary key, "localisation" character varying, "distance" integer, "price" character varying[] DEFAULT '{}', "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_860867b609"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_lunches_on_user_id" ON "lunches"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150010"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLunchPreferences (20210223150145)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "lunch_preferences" ("id" bigserial primary key, "lunch_id" bigint NOT NULL, "preference_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_903087d7dd"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
, CONSTRAINT "fk_rails_1158371461"
FOREIGN KEY ("preference_id")
  REFERENCES "preferences" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_lunch_id" ON "lunch_preferences"  ("lunch_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_lunch_preferences_on_preference_id" ON "lunch_preferences"  ("preference_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223150145"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTokenToUsers (20210223153506)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "authentication_token" character varying(30)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_authentication_token" ON "users"  ("authentication_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210223153506"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20210224134452)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "restaurant_name" character varying, "restaurant_price" character varying, "restaurant_city" character varying, "restaurant_category" character varying, "restaurant_distance" integer, "lunch_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1d01fff5ba"
FOREIGN KEY ("lunch_id")
  REFERENCES "lunches" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_lunch_id" ON "restaurants"  ("lunch_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210224134452"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-02-26 15:19:45.568319"], ["updated_at", "2021-02-26 15:19:45.568319"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(107090900610847650)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pierre@pierre.pierre"], ["encrypted_password", "$2a$12$cnVPTtkq7su9gN23gBedxuy8.3mp12t7XUnEjA4sTspmL5RLqHTj6"], ["created_at", "2021-02-26 15:19:45.851969"], ["updated_at", "2021-02-26 15:19:45.851969"], ["authentication_token", "KdapjiY6vz-sBkKmNieF"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gilles@gilles.gilles"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "wW3ofQDYDJmtHKmocGMP"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "gilles@gilles.gilles"], ["encrypted_password", "$2a$12$bjqydXagIyQ6an2SyTF/YeYrEzPK.g6eyJn0trRELz5CaYq0jGTBy"], ["created_at", "2021-02-26 15:19:46.032916"], ["updated_at", "2021-02-26 15:19:46.032916"], ["authentication_token", "wW3ofQDYDJmtHKmocGMP"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vince@vince.vince"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "aLkNivz7AyGhG5EWibP5"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "vince@vince.vince"], ["encrypted_password", "$2a$12$/w8FT0rlGM6ST4guIUvniOf4bztZ51tq1djRhMkuS2m7ByF4I9g3."], ["created_at", "2021-02-26 15:19:46.215116"], ["updated_at", "2021-02-26 15:19:46.215116"], ["authentication_token", "aLkNivz7AyGhG5EWibP5"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sam@sam.sam"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."authentication_token" = $1[0m  [["authentication_token", "m26J1YjixFgi8ADNGG6B"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "authentication_token") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "sam@sam.sam"], ["encrypted_password", "$2a$12$AKwoLJNB7FE1oiu92fAboOiU0aB92lXpccPPLb4XGJge.NxD92Sre"], ["created_at", "2021-02-26 15:19:46.395019"], ["updated_at", "2021-02-26 15:19:46.395019"], ["authentication_token", "m26J1YjixFgi8ADNGG6B"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPreference Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Pierre"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.3ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Pierre"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 1], ["created_at", "2021-02-26 15:19:46.408099"], ["updated_at", "2021-02-26 15:19:46.408099"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Gilles"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.1ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Gilles"], ["taste", "{Italian,Lebanese,Japanese,Belgian}"], ["user_id", 2], ["created_at", "2021-02-26 15:19:46.412475"], ["updated_at", "2021-02-26 15:19:46.412475"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Vince"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.1ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Vince"], ["taste", "{Italian,Japanese,Lebanese}"], ["user_id", 2], ["created_at", "2021-02-26 15:19:46.416664"], ["updated_at", "2021-02-26 15:19:46.416664"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPreference Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "preferences" WHERE LOWER("preferences"."name") = LOWER($1) LIMIT $2[0m  [["name", "Sam"], ["LIMIT", 1]]
  [1m[36mPreference Create (0.1ms)[0m  [1m[32mINSERT INTO "preferences" ("name", "taste", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Sam"], ["taste", "{Belgian}"], ["user_id", 4], ["created_at", "2021-02-26 15:19:46.421073"], ["updated_at", "2021-02-26 15:19:46.421073"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1000], ["localisation", "Arlon"], ["distance", 1000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:19:46.431374"], ["updated_at", "2021-02-26 15:19:46.431374"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLunch Create (0.1ms)[0m  [1m[32mINSERT INTO "lunches" ("id", "localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1001], ["localisation", "Saint Gilles"], ["distance", 50], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:19:46.435055"], ["updated_at", "2021-02-26 15:19:46.435055"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:19:52 +0000
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.4ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", 35000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:19:52.114293"], ["updated_at", "2021-02-26 15:19:52.114293"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (101.90ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.02ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (1.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.886807"], ["updated_at", "2021-02-26 15:19:52.886807"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.906659"], ["updated_at", "2021-02-26 15:19:52.906659"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (1.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.921485"], ["updated_at", "2021-02-26 15:19:52.921485"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.935074"], ["updated_at", "2021-02-26 15:19:52.935074"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.2ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.943315"], ["updated_at", "2021-02-26 15:19:52.943315"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.948992"], ["updated_at", "2021-02-26 15:19:52.948992"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.953036"], ["updated_at", "2021-02-26 15:19:52.953036"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.956830"], ["updated_at", "2021-02-26 15:19:52.956830"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.964937"], ["updated_at", "2021-02-26 15:19:52.964937"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 1], ["created_at", "2021-02-26 15:19:52.968572"], ["updated_at", "2021-02-26 15:19:52.968572"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 2.9ms | Allocations: 3578)
Completed 201 Created in 900ms (Views: 3.9ms | ActiveRecord: 41.0ms | Excon: 101.9ms | Allocations: 87014)


Started POST "/api/v1/lunches" for ::1 at 2021-02-26 15:20:56 +0000
Processing by Api::V1::LunchesController#create as JSON
  Parameters: {"lunch"=>{"localisation"=>"Saint gilles", "distance"=>35000, "price"=>[1, 4], "attendees"=>["Pierre"]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "pierre@pierre.pierre"], ["LIMIT", 1]]
  [1m[36mPreference Load (0.2ms)[0m  [1m[34mSELECT "preferences".* FROM "preferences" WHERE "preferences"."name" = $1[0m  [["name", "Pierre"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:111:in `matching_preferences'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[36mLunch Create (0.3ms)[0m  [1m[32mINSERT INTO "lunches" ("localisation", "distance", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["localisation", "Saint gilles"], ["distance", 35000], ["price", "{1,4}"], ["user_id", 1], ["created_at", "2021-02-26 15:20:56.458793"], ["updated_at", "2021-02-26 15:20:56.458793"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:52:in `create'
  [1m[34mExcon Request[0m (95.17ms)  GET https://api.yelp.com/v3/businesses/search?location=Saint%20gilles,BE&radius=35000&price=1,2,3,4&categories=italian[0m
  [1m[34mExcon Response[0m (0.01ms)  [1m200 OK (19.4 KB)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.3ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "La Bottega Della Pizza"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "pizza"], ["restaurant_distance", 992], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.075578"], ["updated_at", "2021-02-26 15:20:57.075578"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Pasta Divina"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 2038], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.086560"], ["updated_at", "2021-02-26 15:20:57.086560"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Osteria Bolognese"], ["restaurant_price", "€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1782], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.091293"], ["updated_at", "2021-02-26 15:20:57.091293"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Winehouse Osteria"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1807], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.096262"], ["updated_at", "2021-02-26 15:20:57.096262"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Dolce Amaro"], ["restaurant_price", "€€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 925], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.100588"], ["updated_at", "2021-02-26 15:20:57.100588"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Gazzetta"], ["restaurant_price", "€€"], ["restaurant_city", "Brussels"], ["restaurant_category", "italian"], ["restaurant_distance", 1273], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.104943"], ["updated_at", "2021-02-26 15:20:57.104943"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Posto Al Sole"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Gilles"], ["restaurant_category", "italian"], ["restaurant_distance", 248], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.109326"], ["updated_at", "2021-02-26 15:20:57.109326"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "N 7"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1548], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.114716"], ["updated_at", "2021-02-26 15:20:57.114716"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Ricciocapriccio"], ["restaurant_price", "€€€"], ["restaurant_city", "Ixelles"], ["restaurant_category", "italian"], ["restaurant_distance", 1409], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.120009"], ["updated_at", "2021-02-26 15:20:57.120009"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mLunch Load (0.1ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches" WHERE "lunches"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[36mRestaurant Create (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("restaurant_name", "restaurant_price", "restaurant_city", "restaurant_category", "restaurant_distance", "lunch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["restaurant_name", "Le Millennium"], ["restaurant_price", "€€"], ["restaurant_city", "Saint-Josse-ten-Noode"], ["restaurant_category", "italian"], ["restaurant_distance", 3032], ["lunch_id", 2], ["created_at", "2021-02-26 15:20:57.125275"], ["updated_at", "2021-02-26 15:20:57.125275"]]
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/lunches_controller.rb:174:in `upper_limit'
  Rendering api/v1/lunches/show.json.jbuilder
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/show.json.jbuilder:6
  Rendered api/v1/lunches/show.json.jbuilder (Duration: 4.1ms | Allocations: 2074)
Completed 201 Created in 681ms (Views: 4.9ms | ActiveRecord: 18.7ms | Excon: 95.2ms | Allocations: 57341)


Started GET "/api/v1/lunches" for ::1 at 2021-02-26 15:21:03 +0000
Processing by Api::V1::LunchesController#index as JSON
  Rendering api/v1/lunches/index.json.jbuilder
  [1m[36mLunch Load (0.3ms)[0m  [1m[34mSELECT "lunches".* FROM "lunches"[0m
  ↳ app/views/api/v1/lunches/index.json.jbuilder:3
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1000]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1001]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 1]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."lunch_id" = $1[0m  [["lunch_id", 2]]
  ↳ app/views/api/v1/lunches/index.json.jbuilder:5
  Rendered api/v1/lunches/index.json.jbuilder (Duration: 8.1ms | Allocations: 6809)
Completed 200 OK in 11ms (Views: 7.7ms | ActiveRecord: 0.8ms | Allocations: 7408)


